import{r as o,j as e,S as N}from"./app-CoagF3OV.js";import{B as m}from"./button-DiwSB_ws.js";import{C as v}from"./calendar-D70yaHeE.js";import{P as b,a as y,b as w}from"./popover-DO9WFbL6.js";import{c as _}from"./utils-C9PFdcQI.js";import{D as E}from"./dollar-sign-Pv8lz7I8.js";import{E as A,F as z,C as O}from"./filter-KO5fTT6x.js";import{T,a as B}from"./trending-up-CM7d3dJ_.js";import{U as L}from"./users-CD6CtQqW.js";import{B as R}from"./book-open-Dj5v9Uv8.js";import{S as U}from"./star-By8uaqCj.js";import{C as D}from"./calendar-CGlPaQNq.js";import{C as S}from"./chevron-down-C6u_SFWf.js";import{X as H}from"./x--5bXEWR7.js";import{f as x}from"./format-Bp4OdCl_.js";import{i as C}from"./id-Don4TG_0.js";import"./index-BXEQ4bzJ.js";import"./index-CvEpHCJr.js";import"./chevron-left-C0IwG4PR.js";import"./createLucideIcon-CbJIzLBb.js";import"./chevron-right-CedjaeBW.js";import"./index-CokJC4k2.js";import"./floating-ui.react-dom-BaCIZNLQ.js";import"./Combination-BqWVWUy8.js";const i=s=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(s),K=s=>`${s>=0?"+":""}${s.toFixed(1)}%`,G=s=>s>0?"text-green-600":s<0?"text-red-600":"text-gray-600",J=s=>s>0?e.jsx(T,{className:"h-3 w-3"}):s<0?e.jsx(B,{className:"h-3 w-3"}):e.jsx(O,{className:"h-3 w-3"});function he({stats:s,filters:t}){var h;const[r,l]=o.useState(()=>{if(t!=null&&t.start_date){const a=new Date(t.start_date+"T00:00:00");return isNaN(a.getTime())?void 0:a}}),[n,c]=o.useState(()=>{if(t!=null&&t.end_date){const a=new Date(t.end_date+"T00:00:00");return isNaN(a.getTime())?void 0:a}}),[F,u]=o.useState(!1),[P,p]=o.useState(!1),M=()=>{const a={};r&&(a.start_date=x(r,"yyyy-MM-dd")),n&&(a.end_date=x(n,"yyyy-MM-dd")),N.get(route("dashboard"),a,{preserveState:!1,preserveScroll:!0})},k=()=>{l(void 0),c(void 0),N.get(route("dashboard"),{},{preserveState:!1,preserveScroll:!0})},g=r&&n;o.useEffect(()=>{if(t!=null&&t.start_date){const a=new Date(t.start_date+"T00:00:00");isNaN(a.getTime())||l(a)}else l(void 0);if(t!=null&&t.end_date){const a=new Date(t.end_date+"T00:00:00");isNaN(a.getTime())||c(a)}else c(void 0)},[t==null?void 0:t.start_date,t==null?void 0:t.end_date]);const I=[{title:"Total Pendapatan",value:i(s.total_revenue),icon:e.jsx(E,{className:"text-muted-foreground size-5"}),color:"bg-green-100",subtitle:g&&s.filtered_date_range?`${s.filtered_date_range.start} - ${s.filtered_date_range.end}`:"Semua periode"},{title:"Pendapatan Bulan Ini",value:i(s.revenue_this_month),icon:e.jsx(A,{className:"text-muted-foreground size-5"}),color:"bg-blue-100",percentage:s.monthly_revenue_change,comparison:` bulan lalu (${i(s.revenue_last_month)})`},{title:"Pendapatan Hari Ini",value:i(s.revenue_today),icon:e.jsx(T,{className:"text-muted-foreground size-5"}),color:"bg-yellow-100",percentage:s.daily_revenue_change,comparison:` kemarin (${i(s.revenue_yesterday)})`}],$=[{title:"Total Siswa Anda",value:s.total_students.toLocaleString("id-ID"),icon:e.jsx(L,{className:"text-muted-foreground size-5"}),color:"bg-purple-100"},{title:"Jumlah Kelas Aktif",value:s.active_courses.toLocaleString("id-ID"),icon:e.jsx(R,{className:"text-muted-foreground size-5"}),color:"bg-green-100"},{title:"Rating Rata-rata",value:s.average_rating?Number(s.average_rating).toFixed(1):"N/A",icon:e.jsx(U,{className:"text-muted-foreground size-5"}),color:"bg-yellow-100"}],f=((h=s.recent_enrollments)==null?void 0:h.filter(a=>{var d,j;return((d=a==null?void 0:a.user)==null?void 0:d.name)&&((j=a==null?void 0:a.course)==null?void 0:j.title)}))||[];return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-card mb-6 rounded-lg border p-4",children:e.jsxs("div",{className:"flex flex-col gap-4 2xl:flex-row 2xl:items-end",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Filter Total Pendapatan"}),e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row",children:[e.jsxs(b,{open:F,onOpenChange:u,children:[e.jsx(y,{asChild:!0,children:e.jsxs(m,{variant:"outline",className:_("w-full justify-between text-left font-normal sm:w-[200px]",!r&&"text-muted-foreground"),children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(D,{className:"mr-2 h-4 w-4"}),r?x(r,"dd MMM yyyy",{locale:C}):"Tanggal mulai"]}),e.jsx(S,{className:"h-4 w-4"})]})}),e.jsx(w,{className:"w-auto overflow-hidden p-0",align:"start",children:e.jsx(v,{mode:"single",selected:r,captionLayout:"dropdown",onSelect:a=>{l(a),u(!1)},disabled:a=>a>new Date||(n?a>n:!1),initialFocus:!0})})]}),e.jsxs(b,{open:P,onOpenChange:p,children:[e.jsx(y,{asChild:!0,children:e.jsxs(m,{variant:"outline",className:_("w-full justify-between text-left font-normal sm:w-[200px]",!n&&"text-muted-foreground"),children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(D,{className:"mr-2 h-4 w-4"}),n?x(n,"dd MMM yyyy",{locale:C}):"Tanggal selesai"]}),e.jsx(S,{className:"h-4 w-4"})]})}),e.jsx(w,{className:"w-auto overflow-hidden p-0",align:"start",children:e.jsx(v,{mode:"single",selected:n,captionLayout:"dropdown",onSelect:a=>{c(a),p(!1)},disabled:a=>a>new Date||(r?a<r:!1),initialFocus:!0})})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(m,{onClick:M,disabled:!r||!n,className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-4 w-4"}),"Terapkan Filter"]}),g&&e.jsxs(m,{variant:"outline",onClick:k,className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-4 w-4"}),"Hapus Filter"]})]})]})}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:I.map((a,d)=>e.jsxs("div",{className:"border-border bg-card text-card-foreground rounded-xl border p-6 shadow-sm",children:[e.jsxs("div",{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx("h3",{className:"text-sm font-medium tracking-tight",children:a.title}),e.jsx("div",{className:`flex h-10 w-10 items-center justify-center rounded-full ${a.color}`,children:a.icon})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 text-2xl font-bold",children:a.value}),a.subtitle&&e.jsx("p",{className:"text-muted-foreground mb-2 text-xs",children:a.subtitle}),a.percentage!==void 0&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsxs("span",{className:`flex items-center text-xs font-medium ${G(a.percentage)}`,children:[J(a.percentage),e.jsx("span",{className:"ml-1",children:K(a.percentage)})]}),e.jsx("span",{className:"text-muted-foreground text-xs",children:a.comparison})]})]})]},d))}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:$.map((a,d)=>e.jsxs("div",{className:"border-border bg-card text-card-foreground rounded-xl border p-6 shadow-sm",children:[e.jsxs("div",{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx("h3",{className:"text-sm font-medium tracking-tight",children:a.title}),e.jsx("div",{className:`flex h-10 w-10 items-center justify-center rounded-full ${a.color}`,children:a.icon})]}),e.jsx("div",{children:e.jsx("div",{className:"text-2xl font-bold",children:a.value})})]},d))}),e.jsxs("div",{className:"border-border bg-card text-card-foreground rounded-xl border p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Pendaftar Terbaru di Kelas Anda"}),e.jsx("p",{className:"text-muted-foreground mb-4 text-sm",children:"Siswa yang baru saja mendaftar di kelas Anda."}),e.jsx("div",{className:"space-y-6",children:f.length===0?e.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center gap-4 py-12",children:[e.jsx("img",{src:"/assets/images/not-found.webp",alt:"Pendaftar Tidak Tersedia",className:"w-48"}),e.jsx("div",{className:"text-center text-gray-500",children:"Belum ada pendaftar baru saat ini."})]}):f.map(a=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-muted flex size-10 items-center justify-center rounded-full",children:e.jsx("span",{className:"font-medium",children:a.user.name.substring(0,2).toUpperCase()})}),e.jsxs("div",{className:"ml-4 flex-1 space-y-1",children:[e.jsx("p",{className:"text-sm leading-none font-medium",children:a.user.name}),e.jsxs("p",{className:"text-muted-foreground text-sm",children:['Mendaftar di kelas "',a.course.title,'"']})]}),e.jsx("div",{className:"text-muted-foreground text-sm",children:new Date(a.created_at).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"})})]},a.id))})]})]})})}export{he as default};
