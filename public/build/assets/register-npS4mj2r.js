import{r as x,m as N,j as e,L as v}from"./app-BqUceOHM.js";import{I as n}from"./input-error-Dmxw2tC2.js";import{T as _}from"./text-link-BsRmr07A.js";import{B as y}from"./button-BYFoJWp8.js";import{I as l}from"./input-CrJ7cRmB.js";import{L as m}from"./label-DtODoVTV.js";import{A as k}from"./auth-layout-DFkQAxbB.js";import{E as h}from"./eye-BKhwAFiw.js";import{E as g}from"./eye-off-DkfDRF_r.js";import{L as I}from"./loader-circle-BW4c6ETT.js";import"./utils-mqEhXaFl.js";import"./index-CEvf_mc-.js";import"./index-DI7JrXI7.js";import"./index-D9cjGE-G.js";import"./sonner-BUFtKBpQ.js";import"./index-xJU7nXuK.js";import"./createLucideIcon-BJfuwJgf.js";function G({affiliate_code:d}){const[a,p]=x.useState(!1),f=()=>{if(d)return sessionStorage.setItem("referral_code",d),d;const s=sessionStorage.getItem("referral_code");return s||"ARS2025"},{data:t,setData:r,post:j,processing:o,errors:i,reset:b}=N({name:"",email:"",phone_number:"",password:"",password_confirmation:"",affiliate_code:f()});x.useEffect(()=>{const c=new URLSearchParams(window.location.search).get("ref");if(c)sessionStorage.setItem("referral_code",c),r("affiliate_code",c);else{const u=sessionStorage.getItem("referral_code");u&&r("affiliate_code",u)}},[r]);const w=s=>{s.preventDefault(),j(route("register"),{onFinish:()=>b("password","password_confirmation"),onSuccess:()=>{sessionStorage.removeItem("referral_code")}})};return e.jsxs(k,{title:"Register",description:"Buat akun baru untuk memulai",children:[e.jsx(v,{title:"Register"}),e.jsxs("form",{className:"flex flex-col gap-6",onSubmit:w,children:[e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"name",children:"Nama"}),e.jsx(l,{id:"name",type:"text",required:!0,autoFocus:!0,tabIndex:1,autoComplete:"name",value:t.name,onChange:s=>r("name",s.target.value),disabled:o,placeholder:"Nama lengkap Anda"}),e.jsx(n,{message:i.name,className:"mt-2"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"email",children:"Email"}),e.jsx(l,{id:"email",type:"email",required:!0,tabIndex:2,autoComplete:"email",value:t.email,onChange:s=>r("email",s.target.value),disabled:o,placeholder:"email@example.com"}),e.jsx(n,{message:i.email})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"phone_number",children:"No. Telepon"}),e.jsx(l,{id:"phone_number",type:"phone_number",required:!0,tabIndex:2,autoComplete:"phone_number",value:t.phone_number,onChange:s=>r("phone_number",s.target.value),disabled:o,placeholder:"08xxxxxxxxxx"}),e.jsx(n,{message:i.phone_number})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(l,{id:"password",type:a?"text":"password",required:!0,tabIndex:3,autoComplete:"new-password",value:t.password,onChange:s=>r("password",s.target.value),disabled:o,placeholder:"Password",className:"pr-10"}),e.jsxs("button",{type:"button",className:"absolute inset-y-0 right-0 h-full px-3 hover:cursor-pointer",onClick:()=>p(!a),children:[a?e.jsx(h,{className:"size-4 text-gray-500"}):e.jsx(g,{className:"size-4 text-gray-500"}),e.jsxs("span",{className:"sr-only",children:[a?"Sembunyikan":"Tampilkan"," password"]})]})]}),e.jsx(n,{message:i.password})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"password_confirmation",children:"Konfirmasi password"}),e.jsxs("div",{className:"relative",children:[e.jsx(l,{id:"password_confirmation",type:a?"text":"password",required:!0,tabIndex:4,autoComplete:"new-password",value:t.password_confirmation,onChange:s=>r("password_confirmation",s.target.value),disabled:o,placeholder:"Konfirmasi password",className:"pr-10"}),e.jsxs("button",{type:"button",className:"absolute inset-y-0 right-0 h-full px-3 hover:cursor-pointer",onClick:()=>p(!a),children:[a?e.jsx(h,{className:"size-4 text-gray-500"}):e.jsx(g,{className:"size-4 text-gray-500"}),e.jsxs("span",{className:"sr-only",children:[a?"Sembunyikan":"Tampilkan"," password"]})]})]}),e.jsx(n,{message:i.password_confirmation})]}),t.affiliate_code&&e.jsx("div",{className:"rounded-lg border border-green-200 bg-green-50 p-3 dark:border-green-800 dark:bg-green-900/20",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),e.jsxs("p",{className:"text-sm text-green-700 dark:text-green-300",children:["Mendaftar melalui referral: ",e.jsx("span",{className:"font-mono font-medium",children:t.affiliate_code})]})]})}),e.jsxs(y,{type:"submit",className:"mt-2 w-full",tabIndex:5,disabled:o,children:[o&&e.jsx(I,{className:"h-4 w-4 animate-spin"}),"Buat akun"]})]}),e.jsxs("div",{className:"text-muted-foreground text-center text-sm",children:["Sudah memiliki akun?"," ",e.jsx(_,{href:route("login"),tabIndex:6,children:"Masuk"})]})]})]})}export{G as default};
