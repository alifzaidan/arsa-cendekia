import{r as h,j as e,L as X,S as Z}from"./app-BfgZ1jJD.js";import{B as x}from"./button-BJ2tfxUg.js";import{C as y}from"./calendar-D3tFlogO.js";import{C as ee}from"./checkbox-C-xsN1qh.js";import{C as ae,a as te,b as re,c as se,d as ne,e as oe}from"./command-2dXOIy87.js";import{u as ie,F as le,a as l,b as c,c as m,d as g,f as d,e as j,s as ce,o as me,i as de,n as v,g as p,j as pe}from"./types-D7toDUMA.js";import{I as u}from"./input-DAiJIf4x.js";import{L as ue}from"./label-wqJbabk0.js";import{P as f,a as k,b}from"./popover-ndYA_jBk.js";import{S as he}from"./switch-DocqSJvB.js";import{T as N}from"./textarea-S1Ut0AOE.js";import{A as ge}from"./admin-layout-DjhmQln_.js";import{c as B,r as R,p as q}from"./utils-C1iKCs30.js";import{E as xe}from"./Editor-BFaZ3ESN.js";import{t as z}from"./index-CUDXU6sL.js";import{B as je}from"./book-marked-CZ5f778O.js";import{C as ve}from"./chevrons-up-down-BfiKwgcd.js";import{C as fe}from"./check-A_SiYeLL.js";import{C as ke}from"./calendar-fold-TWYM8i_k.js";import{C as _}from"./chevron-down-8e4zqodG.js";import"./index-Cmel2OYl.js";import"./index-yQBepqoG.js";import"./format-Bp4OdCl_.js";import"./chevron-left-D4wjm_3Q.js";import"./createLucideIcon-DE9Tn2K0.js";import"./chevron-right-BoyAfqJq.js";import"./index-Z40DZPLH.js";import"./index-tEHxzkPb.js";import"./index-Dn_VzzJM.js";import"./floating-ui.react-dom-C37UeumF.js";import"./index-CB0yihhM.js";import"./index-Co0ZWakJ.js";import"./index-DtSPkv89.js";import"./Combination-Dyc663Sd.js";import"./search-Rnue6JFp.js";import"./sonner-DK45uaK0.js";import"./breadcrumbs-CIofoTQN.js";import"./x-CquPhaxv.js";import"./tooltip-YszIhp1B.js";import"./index-DkgfW9Gg.js";import"./dropdown-menu-D-RFvgcT.js";import"./index-W6qf3D2J.js";import"./user-954k5RzP.js";import"./app-sidebar-header-DinrI-BJ.js";import"./monitor-play-DF4fahFT.js";import"./banknote-f_p9E3cg.js";import"./dollar-sign-Dexcs9z8.js";import"./index-Dq44xvsW.js";const be=me({title:p().nonempty("Judul harus diisi"),category_id:p().nonempty("Kategori harus dipilih"),description:p().nullable(),benefits:p().nullable(),thumbnail:pe().nullable(),start_time:p(),end_time:p(),registration_deadline:p(),host_name:p().nullable(),host_description:p().nullable(),strikethrough_price:v().min(0),price:v().min(0),quota:v().min(0),group_url:p().nullable(),batch:v().min(0),tools:de(p()).optional()}).refine(r=>r.strikethrough_price>0?r.strikethrough_price>r.price:!0,{message:"Harga coret harus lebih besar dari harga normal.",path:["strikethrough_price"]});function xa({webinar:r,categories:D,tools:U}){var E,L,O;const[Y,w]=h.useState(!1),[A,$]=h.useState(!1),[G,T]=h.useState(!1),[H,F]=h.useState(!1),[P,K]=h.useState(r.strikethrough_price>0),[I,M]=h.useState(null),[J,C]=h.useState(!1),V=[{title:"Webinar",href:route("webinars.index")},{title:r.title,href:route("webinars.show",{webinar:r.id})},{title:"Edit Webinar",href:route("webinars.edit",{webinar:r.id})}],n=ie({resolver:ce(be),defaultValues:{title:r.title??"",category_id:r.category_id??"",description:r.description??"",benefits:r.benefits??"",thumbnail:"",start_time:typeof r.start_time=="string"?r.start_time:((E=r.start_time)==null?void 0:E.toISOString())??"",end_time:typeof r.end_time=="string"?r.end_time:((L=r.end_time)==null?void 0:L.toISOString())??"",registration_deadline:typeof r.registration_deadline=="string"?r.registration_deadline:((O=r.registration_deadline)==null?void 0:O.toISOString())??"",host_name:r.host_name??"",host_description:r.host_description??"",strikethrough_price:r.strikethrough_price??0,price:r.price??0,quota:r.quota??0,group_url:r.group_url??"",batch:r.batch??1,tools:r.tools?r.tools.map(a=>a.id):[]}});function Q(a){Z.post(route("webinars.update",{webinar:r.id}),{...a,_method:"PUT"},{forceFormData:!0})}return e.jsxs(ge,{breadcrumbs:V,children:[e.jsx(X,{title:`Edit Webinar - ${r.title}`}),e.jsxs("div",{className:"px-4 py-4 md:px-6",children:[e.jsxs("h1",{className:"text-2xl font-semibold",children:["Edit Webinar ",r.title]}),e.jsx("p",{className:"text-muted-foreground mb-6 max-w-2xl text-sm",children:'Silakan isi form di bawah ini untuk mengedit webinar. Setelah selesai, klik tombol "Simpan Draft" untuk menyimpan perubahan sebagai draft.'}),e.jsx(le,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(Q),className:"grid grid-cols-1 items-start gap-6 lg:grid-cols-2",children:[e.jsxs("div",{className:"space-y-6 rounded-lg border p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(je,{size:16}),e.jsx("h3",{className:"font-medium",children:"Detail Informasi Webinar"})]}),e.jsx(l,{control:n.control,name:"title",render:({field:a})=>e.jsxs(c,{children:[e.jsxs(m,{children:["Judul Webinar ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(g,{children:e.jsx(u,{placeholder:"Masukkan judul webinar",...a,autoComplete:"off"})}),e.jsx(d,{})]})}),e.jsx(l,{control:n.control,name:"category_id",render:({field:a})=>{var t;return e.jsxs(c,{className:"flex flex-col",children:[e.jsxs(m,{children:["Kategori ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(f,{open:Y,onOpenChange:w,children:[e.jsx(k,{asChild:!0,children:e.jsx(g,{children:e.jsxs(x,{variant:"outline",role:"combobox",className:B("justify-between",!a.value&&"text-muted-foreground"),children:[a.value?(t=D.find(s=>s.id===a.value))==null?void 0:t.name:"Pilih kategori",e.jsx("span",{className:"sr-only",children:"Pilih kategori"}),e.jsx(ve,{className:"opacity-50"})]})})}),e.jsx(b,{className:"p-0",children:e.jsxs(ae,{children:[e.jsx(te,{placeholder:"Cari kategori...",className:"h-9"}),e.jsxs(re,{children:[e.jsx(se,{children:"Tidak ada kategori ditemukan."}),e.jsx(ne,{children:D.map(s=>e.jsxs(oe,{value:s.name,onSelect:()=>{n.setValue("category_id",s.id),w(!1)},children:[s.name,e.jsx(fe,{className:B("ml-auto",s.id===a.value?"opacity-100":"opacity-0")})]},s.id))})]})]})})]}),e.jsx(d,{})]})}}),e.jsx(l,{control:n.control,name:"tools",render:()=>e.jsxs(c,{children:[e.jsx(m,{children:"Tools yang Digunakan"}),e.jsx("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4",children:U.map(a=>e.jsx(l,{control:n.control,name:"tools",render:({field:t})=>{var s;return e.jsxs(c,{className:"flex flex-row items-center gap-2 space-y-0",children:[e.jsx(g,{children:e.jsx(ee,{checked:(s=t.value)==null?void 0:s.includes(a.id),onCheckedChange:i=>{var o;i?t.onChange([...t.value??[],a.id]):t.onChange((o=t.value)==null?void 0:o.filter(S=>S!==a.id))}})}),e.jsx(m,{className:"text-sm font-normal",children:a.name})]})}},a.id))}),e.jsx(d,{})]})}),e.jsx(l,{control:n.control,name:"description",render:({field:a})=>e.jsxs(c,{children:[e.jsx(m,{children:"Deskripsi Lengkap"}),e.jsx(N,{...a,value:a.value??"",className:"w-full rounded border p-2",placeholder:"Masukkan deskripsi lengkap",autoComplete:"off"}),e.jsx(d,{})]})}),e.jsx(l,{control:n.control,name:"thumbnail",render:({field:a})=>e.jsxs(c,{children:[e.jsx(m,{children:"Thumbnail (File Upload)"}),e.jsx("img",{src:I||(r.thumbnail?`/storage/${r.thumbnail}`:"/assets/images/placeholder.png"),alt:r.title,className:"my-1 mt-2 h-40 w-64 rounded border object-cover"}),e.jsx(u,{type:"file",name:a.name,accept:"image/png, image/jpeg, image/jpg",className:J?"border-red-500 focus-visible:ring-red-500":"",onChange:t=>{var i;const s=((i=t.target.files)==null?void 0:i[0])??null;if(s){if(!["image/png","image/jpeg","image/jpg"].includes(s.type)){C(!0),z("Gambar harus png, jpg, atau jpeg");return}if(s.size>2*1024*1024){C(!0),z("Ukuran file maksimal 2MB!");return}}if(C(!1),a.onChange(s),s){const o=new FileReader;o.onload=S=>{var W;return M((W=S.target)==null?void 0:W.result)},o.readAsDataURL(s)}else M(null)}}),e.jsx(j,{className:"ms-1",children:"Upload Icon. Format: PNG atau JPG Max 2 Mb"}),e.jsx(d,{})]})}),e.jsxs("div",{className:"space-y-4 rounded-md border p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(he,{id:"show-strikethrough",checked:P,onCheckedChange:a=>{K(a),a||n.setValue("strikethrough_price",0)}}),e.jsx(ue,{htmlFor:"show-strikethrough",children:"Aktifkan Harga Coret (Opsional)"})]}),P&&e.jsx(l,{control:n.control,name:"strikethrough_price",render:({field:a})=>e.jsxs(c,{children:[e.jsx(m,{children:"Harga Coret"}),e.jsx(u,{...a,type:"text",placeholder:"Rp 0",value:R.format(a.value||0),onChange:t=>a.onChange(q(t.target.value)),autoComplete:"off"}),e.jsx(j,{children:"Harga asli yang akan ditampilkan tercoret."}),e.jsx(d,{})]})})]}),e.jsx(l,{control:n.control,name:"price",render:({field:a})=>e.jsxs(c,{children:[e.jsxs(m,{children:["Harga ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(u,{...a,type:"text",placeholder:"Masukkan harga kursus",value:R.format(a.value||0),onChange:t=>a.onChange(q(t.target.value)),autoComplete:"off"}),e.jsx(j,{className:"ms-1",children:"Isi 0 untuk harga webinar gratis"}),e.jsx(d,{})]})}),e.jsx(l,{control:n.control,name:"batch",render:({field:a})=>e.jsxs(c,{children:[e.jsx(m,{children:"Batch"}),e.jsx(g,{children:e.jsx(u,{type:"number",...a,onChange:t=>a.onChange(parseInt(t.target.value,10)),placeholder:"Masukkan batch",autoComplete:"off"})}),e.jsx(d,{})]})}),e.jsx(l,{control:n.control,name:"quota",render:({field:a})=>e.jsxs(c,{children:[e.jsx(m,{children:"Kuota Peserta"}),e.jsx(g,{children:e.jsx(u,{type:"number",...a,onChange:t=>a.onChange(parseInt(t.target.value,10)),placeholder:"Masukkan kuota peserta",autoComplete:"off"})}),e.jsx(j,{className:"ms-1",children:"Isi 0 untuk kuota tak terbatas"}),e.jsx(d,{})]})}),e.jsx(l,{control:n.control,name:"group_url",render:({field:a})=>e.jsxs(c,{children:[e.jsx(m,{children:"Link Group Peserta"}),e.jsx(N,{...a,value:a.value??"",className:"w-full rounded border p-2",placeholder:"Masukkan link grup peserta",autoComplete:"off"}),e.jsx(d,{})]})})]}),e.jsxs("div",{className:"space-y-6 rounded-lg border p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ke,{size:16}),e.jsx("h3",{className:"font-medium",children:"Tanggal dan Informasi Pemateri"})]}),e.jsx(l,{control:n.control,name:"start_time",render:({field:a})=>e.jsxs(c,{className:"flex flex-col",children:[e.jsxs(m,{children:["Waktu Mulai ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex flex-col gap-3",children:e.jsxs(f,{open:A,onOpenChange:$,children:[e.jsx(k,{asChild:!0,children:e.jsxs(x,{variant:"outline",id:"date",className:"w-32 justify-between font-normal",type:"button",children:[a.value?new Date(a.value).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}):"Pilih tanggal",e.jsx(_,{})]})}),e.jsx(b,{className:"w-auto overflow-hidden p-0",align:"start",children:e.jsx(y,{mode:"single",selected:a.value?new Date(a.value):void 0,captionLayout:"dropdown",onSelect:t=>{if(!t)return;const i=(a.value?new Date(a.value):new Date).toTimeString().slice(0,8)||"00:00:00",o=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`;a.onChange(`${o}T${i}`),$(!1)}})})]})}),e.jsx("div",{className:"flex flex-col gap-3",children:e.jsx(u,{type:"time",id:"time",step:"60",value:a.value?new Date(a.value).toTimeString().slice(0,5):"10:30",onChange:t=>{const s=a.value?new Date(a.value):new Date,i=`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`,o=t.target.value||"00:00";a.onChange(`${i}T${o}:00`)},className:"bg-background appearance-none [&::-webkit-calendar-picker-indicator]:hidden [&::-webkit-calendar-picker-indicator]:appearance-none"})})]}),e.jsx(d,{})]})}),e.jsx(l,{control:n.control,name:"end_time",render:({field:a})=>e.jsxs(c,{className:"flex flex-col",children:[e.jsxs(m,{children:["Waktu Selesai ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex flex-col gap-3",children:e.jsxs(f,{open:G,onOpenChange:T,children:[e.jsx(k,{asChild:!0,children:e.jsxs(x,{variant:"outline",id:"date",className:"w-32 justify-between font-normal",type:"button",children:[a.value?new Date(a.value).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}):"Pilih tanggal",e.jsx(_,{})]})}),e.jsx(b,{className:"w-auto overflow-hidden p-0",align:"start",children:e.jsx(y,{mode:"single",selected:a.value?new Date(a.value):void 0,captionLayout:"dropdown",onSelect:t=>{const i=(a.value?new Date(a.value):new Date).toTimeString().split(" ")[0],o=t?`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`:"";a.onChange(o&&i?`${o}T${i}`:""),T(!1)}})})]})}),e.jsx("div",{className:"flex flex-col gap-3",children:e.jsx(u,{type:"time",id:"time",step:"60",value:a.value?new Date(a.value).toTimeString().slice(0,5):"10:30",onChange:t=>{const s=a.value?new Date(a.value):new Date,i=`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`,o=t.target.value||"00:00";a.onChange(`${i}T${o}:00`)},className:"bg-background appearance-none [&::-webkit-calendar-picker-indicator]:hidden [&::-webkit-calendar-picker-indicator]:appearance-none"})})]}),e.jsx(d,{})]})}),e.jsx(l,{control:n.control,name:"registration_deadline",render:({field:a})=>e.jsxs(c,{className:"flex flex-col",children:[e.jsxs(m,{children:["Deadline Pendaftaran ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex flex-col gap-3",children:e.jsxs(f,{open:H,onOpenChange:F,children:[e.jsx(k,{asChild:!0,children:e.jsxs(x,{variant:"outline",id:"date",className:"w-32 justify-between font-normal",type:"button",children:[a.value?new Date(a.value).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}):"Pilih tanggal",e.jsx(_,{})]})}),e.jsx(b,{className:"w-auto overflow-hidden p-0",align:"start",children:e.jsx(y,{mode:"single",selected:a.value?new Date(a.value):void 0,captionLayout:"dropdown",onSelect:t=>{const i=(a.value?new Date(a.value):new Date).toTimeString().split(" ")[0],o=t?`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`:"";a.onChange(o&&i?`${o}T${i}`:""),F(!1)}})})]})}),e.jsx("div",{className:"flex flex-col gap-3",children:e.jsx(u,{type:"time",id:"time",step:"60",value:a.value?new Date(a.value).toTimeString().slice(0,5):"10:30",onChange:t=>{const s=a.value?new Date(a.value):new Date,i=`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`,o=t.target.value||"00:00";a.onChange(`${i}T${o}:00`)},className:"bg-background appearance-none [&::-webkit-calendar-picker-indicator]:hidden [&::-webkit-calendar-picker-indicator]:appearance-none"})})]}),e.jsx(d,{})]})}),e.jsx(l,{control:n.control,name:"host_name",render:({field:a})=>e.jsxs(c,{children:[e.jsx(m,{children:"Nama Pemateri"}),e.jsx(g,{children:e.jsx(u,{placeholder:"Masukkan nama pemateri",...a,value:a.value??"",autoComplete:"off"})}),e.jsx(d,{})]})}),e.jsx(l,{control:n.control,name:"host_description",render:({field:a})=>e.jsxs(c,{children:[e.jsx(m,{children:"Deskripsi Pemateri"}),e.jsx(N,{...a,value:a.value??"",className:"w-full rounded border p-2",placeholder:"Masukkan deskripsi pemateri",autoComplete:"off"}),e.jsx(d,{})]})}),e.jsx(l,{control:n.control,name:"benefits",render:({field:a})=>e.jsxs(c,{children:[e.jsx(m,{children:"Benefit Mengikuti Webinar"}),e.jsx(xe,{apiKey:"ezdq40mjneld4d8pnta3pfr55y39ttbvvtyp6xrhqswrefxz",value:a.value??"",onEditorChange:t=>a.onChange(t),init:{plugins:["anchor","autolink","charmap","codesample","emoticons","image","link","lists","media","searchreplace","table","visualblocks","wordcount"],onboarding:!1,toolbar:"undo redo | blocks fontfamily fontsize | bold italic underline strikethrough | link image media table mergetags | addcomment showcomments | spellcheckdialog a11ycheck typography | align lineheight | checklist numlist bullist indent outdent | emoticons charmap | removeformat",tinycomments_mode:"embedded",tinycomments_author:"Author name",mergetags_list:[{value:"First.Name",title:"First Name"},{value:"Email",title:"Email"}],height:300}}),e.jsx(d,{})]})})]}),e.jsx(x,{type:"submit",className:"hover:cursor-pointer",children:"Simpan Perubahan"})]})})]})]})}export{xa as default};
