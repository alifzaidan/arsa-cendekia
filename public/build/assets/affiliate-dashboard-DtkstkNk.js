import{r as d,j as e,S as f}from"./app-DJanRBGl.js";import{B as m}from"./button-Bifx8rgB.js";import{C as b}from"./calendar-CGsg3qX5.js";import{P as v,a as j,b as N}from"./popover-CrkFnK1a.js";import{c as w}from"./utils-DR74k2Cn.js";import{t as k}from"./index-BMMgGDcw.js";import{D as M}from"./dollar-sign-CpDmjeLc.js";import{E as A,F as E,C as K}from"./filter-B9SIWC_i.js";import{T as D,a as L}from"./trending-up-CTnMiapK.js";import{U as O}from"./users-C6tS75nL.js";import{C as y}from"./calendar-BFu_Tv1J.js";import{C as _}from"./chevron-down-ysu_lXVV.js";import{X as R}from"./x-BgLTBkg8.js";import{C as B}from"./copy-IauPQRiW.js";import{f as x}from"./format-Bp4OdCl_.js";import{i as C}from"./id-Don4TG_0.js";import"./index-BSP57wh6.js";import"./index-CaYodV7O.js";import"./chevron-left-_KMMEj_d.js";import"./createLucideIcon-C0a0JXVI.js";import"./chevron-right-BXsuuH2D.js";import"./index-DUJzXC_7.js";import"./floating-ui.react-dom-DPYed0W_.js";import"./Combination-BCQ0aFO3.js";const l=t=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(t),z=t=>`${t>=0?"+":""}${t.toFixed(1)}%`,U=t=>t>0?"text-green-600":t<0?"text-red-600":"text-gray-600",G=t=>t>0?e.jsx(D,{className:"h-3 w-3"}):t<0?e.jsx(L,{className:"h-3 w-3"}):e.jsx(K,{className:"h-3 w-3"}),H=t=>{var i,a;return(i=t.course_items)!=null&&i.length?`Kelas: ${t.course_items[0].course.title}`:(a=t.webinar_items)!=null&&a.length?`Webinar: ${t.webinar_items[0].webinar.title}`:"Produk tidak diketahui"};function pe({user:t,stats:i,filters:a}){const[r,o]=d.useState(()=>a!=null&&a.start_date?new Date(a.start_date+"T00:00:00"):void 0),[n,c]=d.useState(()=>a!=null&&a.end_date?new Date(a.end_date+"T00:00:00"):void 0),[S,u]=d.useState(!1),[T,h]=d.useState(!1),$=()=>{const s={};r&&(s.start_date=x(r,"yyyy-MM-dd")),n&&(s.end_date=x(n,"yyyy-MM-dd")),f.get(route("dashboard"),s,{preserveState:!1,preserveScroll:!0})},F=()=>{o(void 0),c(void 0),f.get(route("dashboard"),{},{preserveState:!1,preserveScroll:!0})},p=r&&n;d.useEffect(()=>{if(a!=null&&a.start_date){const s=new Date(a.start_date+"T00:00:00");o(isNaN(s.getTime())?void 0:s)}else o(void 0);if(a!=null&&a.end_date){const s=new Date(a.end_date+"T00:00:00");c(isNaN(s.getTime())?void 0:s)}else c(void 0)},[a==null?void 0:a.start_date,a==null?void 0:a.end_date]);const I=async()=>{try{const s=`https://arsacendekia.com/register?ref=${t.affiliate_code}`;await navigator.clipboard.writeText(s),k.success("Link afiliasi berhasil disalin!")}catch{k.error("Gagal menyalin link afiliasi")}},P=[{title:"Total Komisi",value:l(i.total_commission),icon:e.jsx(M,{className:"size-5 text-indigo-600 dark:text-indigo-300"}),gradient:"from-indigo-500/15 via-indigo-400/10 to-sky-400/10",subtitle:p&&i.filtered_date_range?`${i.filtered_date_range.start} - ${i.filtered_date_range.end}`:"Semua periode"},{title:"Komisi Bulan Ini",value:l(i.commission_this_month),icon:e.jsx(A,{className:"size-5 text-emerald-600 dark:text-emerald-300"}),gradient:"from-emerald-500/15 via-emerald-400/10 to-teal-400/10",percentage:i.monthly_commission_change,comparison:` bulan lalu (${l(i.commission_last_month)})`},{title:"Komisi Hari Ini",value:l(i.commission_today),icon:e.jsx(D,{className:"size-5 text-amber-600 dark:text-amber-300"}),gradient:"from-amber-500/20 via-amber-400/10 to-orange-400/10",percentage:i.daily_commission_change,comparison:` kemarin (${l(i.commission_yesterday)})`},{title:"Total Pendaftaran",value:i.total_referrals.toLocaleString("id-ID"),icon:e.jsx(O,{className:"size-5 text-purple-600 dark:text-purple-300"}),gradient:"from-purple-500/20 via-fuchsia-400/10 to-pink-400/10"}];return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"dark:via-background relative overflow-hidden rounded-xl border bg-gradient-to-br from-indigo-50/70 via-white to-sky-50/60 p-5 dark:from-indigo-950/40 dark:to-sky-900/20",children:[e.jsxs("div",{className:"pointer-events-none absolute inset-0",children:[e.jsx("div",{className:"absolute top-4 -left-6 h-24 w-24 rounded-full bg-indigo-400/10 blur-xl dark:bg-indigo-500/15"}),e.jsx("div",{className:"absolute right-4 bottom-2 h-28 w-28 rounded-full bg-sky-400/10 blur-xl dark:bg-sky-500/15"})]}),e.jsxs("div",{className:"relative flex flex-col gap-4 2xl:flex-row 2xl:items-end",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Filter Total Komisi"}),e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row",children:[e.jsxs(v,{open:S,onOpenChange:u,children:[e.jsx(j,{asChild:!0,children:e.jsxs(m,{variant:"outline",className:w("w-full justify-between sm:w-[200px]",!r&&"text-muted-foreground"),children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(y,{className:"mr-2 h-4 w-4"}),r?x(r,"dd MMM yyyy",{locale:C}):"Tanggal mulai"]}),e.jsx(_,{className:"h-4 w-4"})]})}),e.jsx(N,{className:"w-auto overflow-hidden p-0",align:"start",children:e.jsx(b,{mode:"single",selected:r,captionLayout:"dropdown",onSelect:s=>{o(s),u(!1)},disabled:s=>s>new Date||(n?s>n:!1),initialFocus:!0})})]}),e.jsxs(v,{open:T,onOpenChange:h,children:[e.jsx(j,{asChild:!0,children:e.jsxs(m,{variant:"outline",className:w("w-full justify-between sm:w-[200px]",!n&&"text-muted-foreground"),children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(y,{className:"mr-2 h-4 w-4"}),n?x(n,"dd MMM yyyy",{locale:C}):"Tanggal selesai"]}),e.jsx(_,{className:"h-4 w-4"})]})}),e.jsx(N,{className:"w-auto overflow-hidden p-0",align:"start",children:e.jsx(b,{mode:"single",selected:n,captionLayout:"dropdown",onSelect:s=>{c(s),h(!1)},disabled:s=>s>new Date||(r?s<r:!1),initialFocus:!0})})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(m,{onClick:$,disabled:!r||!n,className:"gap-2 bg-indigo-600 hover:bg-indigo-600/90",children:[e.jsx(E,{className:"h-4 w-4"}),"Terapkan"]}),p&&e.jsxs(m,{variant:"outline",onClick:F,className:"gap-2",children:[e.jsx(R,{className:"h-4 w-4"}),"Reset"]})]})]})]}),e.jsx("div",{className:"grid gap-5 md:grid-cols-2 lg:grid-cols-4",children:P.map((s,g)=>e.jsxs("div",{className:"group relative overflow-hidden rounded-xl border bg-white/60 p-5 backdrop-blur dark:bg-white/5",children:[e.jsx("div",{className:`pointer-events-none absolute inset-0 bg-gradient-to-br ${s.gradient} opacity-90 transition-opacity group-hover:opacity-100`}),e.jsxs("div",{className:"relative flex items-start justify-between",children:[e.jsx("h3",{className:"text-sm font-medium",children:s.title}),e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-white/70 shadow-sm ring-1 ring-black/5 dark:bg-white/10",children:s.icon})]}),e.jsxs("div",{className:"relative mt-3 space-y-2",children:[e.jsx("div",{className:"text-2xl font-bold tracking-tight",children:s.value}),s.subtitle&&e.jsx("p",{className:"text-muted-foreground text-xs",children:s.subtitle}),s.percentage!==void 0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:`flex items-center text-xs font-medium ${U(s.percentage)}`,children:[G(s.percentage),e.jsx("span",{className:"ml-1",children:z(s.percentage)})]}),e.jsx("span",{className:"text-muted-foreground text-xs",children:s.comparison})]})]}),e.jsx("div",{className:"pointer-events-none absolute -top-6 -right-6 h-20 w-20 rounded-full bg-white/40 blur-xl dark:bg-white/10"})]},g))}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"dark:via-background relative overflow-hidden rounded-xl border bg-white p-6 lg:col-span-2 dark:from-indigo-950/40 dark:to-sky-900/20",children:[e.jsxs("div",{className:"pointer-events-none absolute inset-0",children:[e.jsx("div",{className:"absolute top-6 -left-8 h-36 w-36 rounded-full bg-indigo-400/15 blur-2xl dark:bg-indigo-500/25"}),e.jsx("div",{className:"absolute right-0 bottom-0 h-48 w-48 rounded-full bg-sky-400/15 blur-2xl dark:bg-sky-600/25"})]}),e.jsxs("div",{className:"relative mb-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Referral Terbaru"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Pendaftaran terbaru melalui link Anda."})]}),i.recent_referrals.length>0&&e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-muted-foreground text-xs",children:"Total Komisi"}),e.jsx("p",{className:"font-semibold text-green-600",children:l(i.recent_referrals.reduce((s,g)=>s+g.amount,0))})]})]}),e.jsx("div",{className:"relative space-y-4",children:i.recent_referrals.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 rounded-lg border border-dashed bg-white/60 py-14 backdrop-blur dark:bg-white/5",children:[e.jsx("img",{src:"/assets/images/not-found.webp",alt:"Referral kosong",className:"w-40 opacity-80"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Belum ada referral baru."})]}):i.recent_referrals.map(s=>e.jsxs("div",{className:"relative flex items-center gap-4 rounded-lg border bg-white/70 p-4 backdrop-blur transition hover:shadow-sm dark:bg-white/10",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-gradient-to-br from-indigo-500/15 to-sky-500/15 text-sm font-medium",children:s.invoice.user.name.substring(0,2).toUpperCase()}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"leading-tight font-medium",children:s.invoice.user.name}),e.jsx("p",{className:"text-muted-foreground text-xs",children:H(s.invoice)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-semibold text-green-600",children:l(s.amount)}),e.jsxs("div",{className:"text-muted-foreground text-[11px]",children:["Komisi ",t.commission,"%"]})]})]},s.id))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"dark:via-background relative overflow-hidden rounded-xl border bg-white p-6 dark:from-indigo-950/40 dark:to-sky-900/20",children:[e.jsxs("div",{className:"pointer-events-none absolute inset-0",children:[e.jsx("div",{className:"absolute -top-4 -left-6 h-24 w-24 rounded-full bg-indigo-400/15 blur-2xl dark:bg-indigo-500/25"}),e.jsx("div",{className:"absolute right-0 bottom-0 h-32 w-32 rounded-full bg-sky-400/15 blur-2xl dark:bg-sky-600/25"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("h3",{className:"mb-2 text-lg font-semibold",children:"Link Afiliasi"}),e.jsx("p",{className:"text-muted-foreground mb-4 text-sm",children:"Bagikan untuk mendapatkan komisi."}),e.jsxs("div",{className:"flex items-center gap-2 rounded-lg border bg-white/70 p-3 backdrop-blur dark:bg-white/10",children:[e.jsx("p",{className:"text-muted-foreground flex-1 overflow-hidden text-xs text-ellipsis whitespace-nowrap",children:`arsacendekia.com/register?ref=${t.affiliate_code}`}),e.jsx("button",{onClick:I,className:"rounded-md p-2 hover:bg-white/60 dark:hover:bg-white/20",title:"Salin",children:e.jsx(B,{className:"h-4 w-4"})})]})]})]}),e.jsxs("div",{className:"dark:via-background relative overflow-hidden rounded-xl border bg-white p-6 dark:from-indigo-950/40 dark:to-sky-900/20",children:[e.jsx("div",{className:"pointer-events-none absolute inset-0",children:e.jsx("div",{className:"absolute top-4 left-4 h-20 w-20 rounded-full bg-indigo-400/15 blur-xl dark:bg-indigo-500/25"})}),e.jsxs("div",{className:"relative",children:[e.jsx("h3",{className:"mb-4 text-lg font-semibold",children:"Profil Afiliasi"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Kode:"}),e.jsx("span",{className:"font-mono",children:t.affiliate_code})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Status:"}),e.jsx("span",{className:`rounded-full px-2 py-0.5 text-xs font-medium ${t.affiliate_status==="Active"?"bg-green-100 text-green-700 dark:bg-green-500/15 dark:text-green-300":"bg-red-100 text-red-700 dark:bg-red-500/15 dark:text-red-300"}`,children:t.affiliate_status})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Rate Komisi:"}),e.jsxs("span",{className:"font-semibold text-green-600",children:[t.commission,"%"]})]}),e.jsx("div",{className:"border-t pt-3",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Total Earning:"}),e.jsx("span",{className:"text-base font-bold",children:l(i.total_commission)})]})})]})]})]})]})]})]})}export{pe as default};
