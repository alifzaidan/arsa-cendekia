import{r as o,m as j,j as e}from"./app-k8zswjN4.js";import{I as w}from"./input-error-D_1uxFxj.js";import{B as d}from"./button-DXavOchq.js";import{D as b,a as v,b as k,g as D,c as _,d as y,e as L}from"./dialog-BuCqyxzX.js";import{I as E}from"./input-Dxh7gntF.js";import{L as u}from"./label-C9tmqixz.js";import{P as I}from"./plus-CPA61-ge.js";import"./utils-CkV0Qb-V.js";import"./index-yeKsPfmp.js";import"./index-pHOxZwLY.js";import"./index-pXs-r0Ho.js";import"./index-D6V9crY2.js";import"./Combination-BrdjsB_W.js";import"./x-Brw5WuUb.js";import"./createLucideIcon-D-iNy-Um.js";function N(t){const i=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,a=t.match(i);return a&&a[2].length===11?a[2]:""}function $({webinarId:t,currentRecordingUrl:i}){const[a,l]=o.useState(!1),{data:s,setData:m,patch:p,processing:g,errors:x,reset:h}=j({recording_url:i||""}),[n,c]=o.useState("");o.useEffect(()=>{if(s.recording_url){const r=N(s.recording_url);c(r?`https://www.youtube.com/embed/${r}`:"")}else c("")},[s.recording_url]);const f=r=>{r.preventDefault(),p(route("webinars.add-recording",{webinar:t}),{onSuccess:()=>{h(),l(!1)}})};return e.jsxs(b,{open:a,onOpenChange:l,children:[e.jsx(v,{asChild:!0,children:e.jsxs(d,{className:"w-full",children:[e.jsx(I,{}),i?"Edit Link Rekaman":"Upload Link Rekaman"]})}),e.jsxs(k,{className:"sm:max-w-[425px]",children:[e.jsxs(D,{children:[e.jsx(_,{children:"Link Rekaman Webinar"}),e.jsx(y,{children:"Masukkan link video dari YouTube. Pastikan link valid agar peserta dapat melihat rekaman."})]}),e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(u,{htmlFor:"recording_url",children:"Link YouTube"}),e.jsx(E,{id:"recording_url",value:s.recording_url,onChange:r=>m("recording_url",r.target.value),placeholder:"https://www.youtube.com/watch?v=xxxxxx",autoComplete:"off"}),e.jsx(w,{message:x.recording_url})]}),n&&e.jsxs("div",{children:[e.jsx(u,{children:"Pratinjau Video"}),e.jsx("div",{className:"mt-2 aspect-video w-full",children:e.jsx("iframe",{className:"h-full w-full rounded-lg border",src:n,title:"YouTube Preview",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]}),e.jsx(L,{children:e.jsx(d,{type:"submit",disabled:g,children:"Simpan Link"})})]})]})]})}export{$ as default};
