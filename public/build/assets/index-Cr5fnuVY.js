var W=Object.defineProperty;var U=(t,i,n)=>i in t?W(t,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[i]=n;var Q=(t,i,n)=>U(t,typeof i!="symbol"?i+"":i,n);import{R as X,j as e,$ as F,r as C,L as O,S as A}from"./app-C0K1I_jK.js";import{B as S}from"./button-C0f-v_s_.js";import{T as R}from"./triangle-alert-Co4PQ0LE.js";import{S as G,w as J,b as B,c as V,d as H,u as Y,e as Z,f as ee,g as se,h as te,x as re,A as ne,i as ae}from"./breadcrumbs-BsN9U3wA.js";import{N as le,A as ie}from"./app-sidebar-header-jZI6s3li.js";import{I as oe}from"./icon-DJh7tiVj.js";import{A as de,a as ce,b as me,c as ue}from"./accordion-CZlKniSs.js";import{P as xe}from"./progress-BHl4MN8M.js";import{c as he,T as fe,a as pe,b as ge}from"./tooltip-Djw6bv58.js";import{C as z}from"./circle-check-big-Cczl6f6O.js";import{C as je}from"./circle-B3o1emxb.js";import{C as E}from"./circle-help-OwOrtC7H.js";import{c as be}from"./createLucideIcon-DWBoakhq.js";import{F as Ne}from"./file-text-B3z9zLTW.js";import{C as ve}from"./circle-play-BcLdLHE6.js";import{T as ye}from"./sonner-Dy6n30eS.js";import{t as _}from"./index-CK5zo55w.js";import{C as ke}from"./chevron-left-DzEyRrcd.js";import{C as I}from"./chevron-right-DI1fXzk1.js";import{C as we}from"./circle-x-CNvIFGMz.js";import{E as K}from"./external-link-BYud9A_e.js";import"./index-ckKaZFui.js";import"./index-f6q-RnpV.js";import"./utils-CdAyi53O.js";import"./index-7sZO0JmH.js";import"./index-KzWdGhLx.js";import"./Combination-BOkQOgPX.js";import"./x-Dpjmwsro.js";import"./dropdown-menu-B9Lv5--e.js";import"./index-BZY2Yx9m.js";import"./index-CsZu0GWq.js";import"./floating-ui.react-dom-BGNFrYFh.js";import"./index-CSVoZn40.js";import"./index-D1pJEIZI.js";import"./check-DbTA4r3O.js";import"./user--dYrJdZJ.js";import"./chevrons-up-down-DibPyUO8.js";import"./proxy-EMVnVot3.js";import"./index-DmObuSOr.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],$=be("FileDown",Ce);class Se extends X.Component{constructor(n){super(n);Q(this,"retry",()=>{this.setState({hasError:!1,error:void 0})});this.state={hasError:!1}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,l){console.error("Error caught by boundary:",n,l)}render(){if(this.state.hasError){if(this.props.fallback){const n=this.props.fallback;return e.jsx(n,{error:this.state.error,retry:this.retry})}return e.jsxs("div",{className:"bg-muted/40 flex h-full flex-col items-center justify-center rounded-lg p-8 text-center",children:[e.jsx(R,{className:"text-red-500 mb-4 h-16 w-16"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Terjadi Kesalahan"}),e.jsx("p",{className:"text-muted-foreground text-sm mb-4",children:"Maaf, terjadi kesalahan tak terduga. Silakan coba lagi."}),this.state.error&&e.jsxs("details",{className:"mb-4 text-xs text-muted-foreground",children:[e.jsx("summary",{className:"cursor-pointer",children:"Detail Error"}),e.jsx("pre",{className:"mt-2 text-left bg-gray-100 p-2 rounded text-xs overflow-auto",children:this.state.error.message})]}),e.jsx(S,{onClick:this.retry,children:"Coba Lagi"})]})}return this.props.children}}function ze({items:t,className:i,...n}){return e.jsx(G,{...n,className:`group-data-[collapsible=icon]:p-0 ${i||""}`,children:e.jsx(J,{children:e.jsx(B,{children:t.map(l=>e.jsx(V,{children:e.jsx(H,{asChild:!0,className:"text-neutral-600 hover:text-neutral-800 dark:text-neutral-300 dark:hover:text-neutral-100",children:e.jsxs(F,{href:l.href,children:[l.icon&&e.jsx(oe,{iconNode:l.icon,className:"h-5 w-5"}),e.jsx("span",{children:l.title})]})})},l.title))})})})}function Te({courseSlug:t,modules:i,selectedLesson:n,setSelectedLesson:l,onLessonComplete:s,onProgressUpdate:f}){const[v,y]=C.useState(null),{state:r}=Y();C.useEffect(()=>{i.length>0&&v===null&&y(i[0].id)},[i,v]);const p=[{title:"Keluar Kelas",href:`/profile/my-courses/${t}`,icon:re}],k={video:e.jsx(ve,{className:"text-muted-foreground h-4 w-4"}),text:e.jsx(Ne,{className:"text-muted-foreground h-4 w-4"}),file:e.jsx($,{className:"text-muted-foreground h-4 w-4"}),quiz:e.jsx(E,{className:"text-muted-foreground h-4 w-4"})},j=C.useMemo(()=>{const x=i.reduce((w,N)=>w+N.lessons.length,0),b=i.reduce((w,N)=>w+N.lessons.filter(q=>q.isCompleted).length,0),h=x>0?b/x*100:0;return{totalLessons:x,completedLessons:b,progressPercentage:h}},[i]);C.useEffect(()=>{const x=async()=>{var b;try{(await fetch(`/enrollment/progress/${t}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((b=document.querySelector('meta[name="csrf-token"]'))==null?void 0:b.getAttribute("content"))||""},body:JSON.stringify({progress:Math.round(j.progressPercentage)})})).ok&&f&&f(Math.round(j.progressPercentage))}catch(h){console.error("Error updating enrollment progress:",h)}};j.progressPercentage>0&&x()},[j.progressPercentage,t,f]);const T=x=>x.lessons.length>0&&x.lessons.every(b=>b.isCompleted),M=(x,b)=>{for(let h=0;h<x;h++)if(i[h].lessons.some(w=>!w.isCompleted))return!1;for(let h=0;h<b;h++)if(!i[x].lessons[h].isCompleted)return!1;return!0};return e.jsxs(Z,{collapsible:"icon",variant:"inset",children:[e.jsx(ee,{children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(B,{children:e.jsx(V,{children:e.jsx(H,{size:"lg",asChild:!0,children:e.jsxs(F,{href:"/admin/dashboard",prefetch:!0,children:[e.jsx("img",{src:"/assets/images/logo-primary.png",alt:"Arsa Cendekia",className:"block w-12 fill-current dark:hidden"}),e.jsx("img",{src:"/assets/images/logo-secondary.png",alt:"Arsa Cendekia",className:"hidden w-32 fill-current dark:block"})]})})})})})}),e.jsxs(se,{children:[r==="expanded"&&e.jsx("div",{className:"border-b px-4 py-3",children:e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"font-medium",children:"Progress Pembelajaran"}),e.jsxs("span",{className:"text-muted-foreground",children:[j.completedLessons,"/",j.totalLessons]})]}),e.jsx("div",{className:"mt-2",children:e.jsx(xe,{value:j.progressPercentage,className:"h-2 border border-gray-200 bg-white"})}),e.jsx("div",{className:"mt-1 text-right",children:e.jsxs("span",{className:"text-muted-foreground text-xs",children:[Math.round(j.progressPercentage),"% selesai"]})})]})}),e.jsx(de,{className:"w-full",expandedValue:v,onValueChange:y,children:i.map((x,b)=>e.jsxs(ce,{value:x.id,children:[e.jsx(me,{className:"px-2 text-left text-sm font-semibold hover:no-underline",children:e.jsxs("div",{className:"flex w-full items-center gap-2",children:[r==="collapsed"?e.jsx("span",{className:"flex-1 truncate",children:x.title.length>4?x.title.slice(0,4)+"...":x.title}):e.jsx("span",{className:"flex-1",children:x.title}),T(x)&&e.jsx(z,{className:"h-4 w-4 text-green-600"})]})}),e.jsx(ue,{children:e.jsx("ul",{className:"space-y-1",children:x.lessons.map((h,w)=>{const N=M(b,w);return e.jsx("li",{className:"group",children:e.jsx("div",{className:`flex items-center gap-2 ${r==="collapsed"?"justify-center":""}`,children:e.jsx(he,{children:e.jsxs(fe,{children:[e.jsx(pe,{asChild:!0,children:e.jsxs("button",{onClick:()=>N&&l(h),className:`rounded-md p-2 text-left text-sm transition-colors ${r==="collapsed"?"flex h-10 w-10 items-center justify-center":"flex flex-1 items-center gap-2"} ${(n==null?void 0:n.id)===h.id?"bg-accent text-accent-foreground":N?"text-muted-foreground hover:bg-accent hover:text-foreground":"cursor-not-allowed text-gray-400 opacity-60"}`,disabled:!N,tabIndex:N?0:-1,children:[k[h.type],r==="expanded"&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"flex-1",children:h.title}),h.isCompleted?e.jsx(z,{className:"h-4 w-4 text-green-600"}):e.jsx(je,{className:"h-4 w-4"})]})]})}),!N&&e.jsx(ge,{side:"right",children:"Silahkan selesaikan materi sebelumnya terlebih dahulu"})]})})})},h.id)})})})]},x.id))})]}),e.jsxs(te,{children:[e.jsx(ze,{items:p}),e.jsx(le,{})]})]})}const Ee=({children:t,breadcrumbs:i,courseSlug:n,courseTitle:l,modules:s,selectedLesson:f,setSelectedLesson:v,onLessonComplete:y,...r})=>{const p=async k=>{var j;try{(await fetch(`/lesson/${k}/complete`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((j=document.querySelector('meta[name="csrf-token"]'))==null?void 0:j.getAttribute("content"))||""}})).ok&&(y==null||y(k))}catch(T){console.error("Error completing lesson:",T)}};return e.jsxs(ne,{variant:"sidebar",...r,children:[e.jsx(Te,{courseSlug:n,modules:s,selectedLesson:f,setSelectedLesson:v,onLessonComplete:p}),e.jsxs(ae,{variant:"sidebar",children:[e.jsx(ie,{breadcrumbs:i,hideSidebarTrigger:!1,courseTitle:l}),t,e.jsx(ye,{position:"top-center",richColors:!0})]})]})};function Me(t){if(!t)return"";const i=/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/,n=t.match(i);if(n&&n[1])return`https://www.youtube-nocookie.com/embed/${n[1]}?rel=0&modestbranding=1&showinfo=0&controls=1&disablekb=1`;if(t.includes("youtube.com/embed/")){const l=t.replace("youtube.com","youtube-nocookie.com"),s=l.includes("?")?"&":"?";return`${l}${s}rel=0&modestbranding=1&showinfo=0&controls=1&disablekb=1`}return t}function qe({lesson:t}){const[i,n]=C.useState(!1),l=Me(t.video_url||"");return i||!l||l===t.video_url?e.jsxs("div",{className:"bg-muted/40 flex h-full flex-col items-center justify-center rounded-lg p-8 text-center",children:[e.jsx(K,{className:"text-muted-foreground mb-4 h-16 w-16"}),e.jsx("h3",{className:"mb-2 text-lg font-semibold",children:"Video External"}),e.jsx("p",{className:"text-muted-foreground mb-4 text-sm",children:"Video tidak dapat ditampilkan langsung di halaman ini"}),e.jsx(S,{asChild:!0,children:e.jsxs("a",{href:t.video_url,target:"_blank",rel:"noopener noreferrer",children:["Tonton Video ",e.jsx(K,{className:"ml-2 h-4 w-4"})]})})]}):e.jsx("iframe",{src:l,title:t.title,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0,className:"h-full w-full rounded-lg",loading:"lazy",onError:()=>n(!0),style:{border:"none",outline:"none"}})}function Pe({lesson:t,onStartQuiz:i}){var y,r;const n=(y=t.quizzes)==null?void 0:y[0];if(!n)return e.jsxs("div",{className:"bg-muted/40 flex h-full flex-col items-center justify-center rounded-lg p-8 text-center",children:[e.jsx(E,{className:"text-muted-foreground mb-4 h-16 w-16"}),e.jsx("h3",{className:"mb-2 text-lg font-semibold",children:"Quiz Belum Tersedia"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Quiz untuk materi ini belum tersedia."})]});const l=n.attempts||[],s=l.find(p=>p.is_passed),f=()=>{A.get(`/quiz/${n.id}/start`)},v=()=>{A.get(`/quiz/${n.id}/answers`)};return e.jsxs("div",{className:"mx-auto max-w-4xl p-6",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("div",{className:"mb-4 inline-flex h-16 w-16 items-center justify-center rounded-full bg-blue-100 text-blue-600",children:e.jsx(E,{className:"h-8 w-8"})}),e.jsx("h2",{className:"mb-2 text-2xl font-bold",children:n.title}),n.instructions&&e.jsx("p",{className:"text-muted-foreground mb-4",children:n.instructions}),e.jsxs("div",{className:"mb-6 grid grid-cols-1 gap-4 sm:grid-cols-3",children:[e.jsxs("div",{className:"bg-card rounded-lg border p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:((r=n.questions)==null?void 0:r.length)||0}),e.jsx("div",{className:"text-muted-foreground text-sm",children:"Total Soal"})]}),e.jsx("div",{className:"bg-card flex min-h-[72px] flex-col items-center justify-center rounded-lg border p-4",children:n.time_limit===0?e.jsx("div",{className:"flex h-full min-h-[48px] items-center justify-center text-sm font-semibold text-red-600",children:"Tanpa Batas Waktu"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:n.time_limit}),e.jsx("div",{className:"text-muted-foreground text-sm",children:"Menit"})]})}),e.jsxs("div",{className:"bg-card rounded-lg border p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-amber-600",children:n.passing_score}),e.jsx("div",{className:"text-muted-foreground text-sm",children:"Nilai Lulus"})]})]})]}),l.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"mb-4 text-lg font-semibold",children:"Riwayat Nilai"}),e.jsx("div",{className:"space-y-3",children:l.map((p,k)=>e.jsx("div",{className:`rounded-lg border p-4 ${p.is_passed?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[p.is_passed?e.jsx(z,{className:"h-5 w-5 text-green-600"}):e.jsx(we,{className:"h-5 w-5 text-red-600"}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:["Percobaan ",l.length-k,p.is_passed&&e.jsx("span",{className:"ml-2 rounded-full bg-green-100 px-2 py-1 text-xs text-green-700",children:"LULUS"})]}),e.jsx("div",{className:"text-muted-foreground text-sm",children:new Date(p.submitted_at).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`text-2xl font-bold ${p.is_passed?"text-green-600":"text-red-600"}`,children:[Math.round(p.score),"%"]}),e.jsxs("div",{className:"text-muted-foreground text-sm",children:[p.correct_answers,"/",p.total_questions," benar"]}),e.jsxs("div",{className:"text-muted-foreground text-sm",children:["Waktu Pengerjaan: ",Math.floor(p.time_taken/60),":",(p.time_taken%60).toString().padStart(2,"0")]})]})]})},p.id))})]}),e.jsxs("div",{className:"text-center",children:[s?e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"mb-4 inline-flex items-center gap-2 rounded-lg bg-green-100 px-4 py-2 text-green-600",children:[e.jsx(z,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Anda sudah lulus quiz ini!"})]}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Selamat! Anda bisa mengulang quiz ini kapan saja untuk meningkatkan pemahaman."})]}):e.jsx("div",{className:"mb-6",children:l.length>0?e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4 inline-flex items-center gap-2 rounded-lg bg-amber-100 px-4 py-2 text-amber-600",children:[e.jsx(R,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Belum lulus, jangan menyerah!"})]}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Pelajari kembali materi dan coba lagi. Anda bisa mengulang quiz ini tanpa batas."})]}):e.jsx("p",{className:"text-muted-foreground mb-4",children:"Siap untuk mengerjakan quiz? Anda bisa mengulang quiz ini tanpa batas waktu."})}),e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:justify-center",children:[e.jsx(S,{onClick:f,size:"lg",className:"gap-2",children:l.length>0?"🔄 Ulangi Quiz":"🚀 Mulai Quiz"}),l.length>0&&e.jsx(e.Fragment,{children:e.jsxs(S,{onClick:v,variant:"outline",size:"lg",className:"gap-2",children:[e.jsx(E,{className:"h-4 w-4"}),"Lihat Pembahasan"]})})]})]})]})}function Ae({lesson:t,onQuizComplete:i,courseSlug:n}){if(!t)return e.jsx("div",{className:"bg-muted/40 flex h-full items-center justify-center rounded-lg",children:e.jsx("p",{children:"Pilih materi untuk memulai belajar."})});const l=()=>{var f;const s=(f=t.quizzes)==null?void 0:f[0];s!=null&&s.id?A.get(`/quiz/${s.id}`):_.error("Quiz tidak tersedia")};switch(t.type){case"video":return e.jsx("div",{className:"aspect-video w-full",children:e.jsx(qe,{lesson:t})});case"text":return e.jsx("div",{className:"prose dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:t.content||""}});case"file":{if(!t.attachment)return e.jsxs("div",{className:"bg-muted/40 flex h-full flex-col items-center justify-center rounded-lg p-8 text-center",children:[e.jsx($,{className:"text-muted-foreground mb-4 h-16 w-16"}),e.jsx("h3",{className:"text-lg font-semibold",children:"File Tidak Tersedia"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"File materi tidak ditemukan."})]});const s=t,f=s.is_preview===!0||s.is_preview===1,v=t.attachment&&t.attachment.toLowerCase().endsWith(".pdf");return e.jsxs("div",{className:"w-full",children:[!f&&e.jsx("div",{className:"mb-4 rounded-lg border border-blue-200 bg-blue-50 p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-blue-900",children:"Silahkan download file ini untuk melanjutkan ke materi selanjutnya"}),e.jsx(S,{asChild:!0,className:"flex items-center gap-2",children:e.jsxs("a",{href:`/storage/${t.attachment}`,download:!0,target:"_blank",rel:"noopener noreferrer",children:[e.jsx($,{className:"h-4 w-4"})," Download File"]})})]})}),e.jsx("div",{className:"h-[600px] w-full",children:v?e.jsx("iframe",{src:`/storage/${t.attachment}#toolbar=0&navpanes=0&scrollbar=0`,title:t.title,className:"h-full w-full rounded-lg border",style:{border:"none",outline:"none"}}):e.jsx("div",{className:"text-muted-foreground flex h-full items-center justify-center text-sm italic",children:"Preview hanya tersedia untuk file PDF."})})]})}case"quiz":return e.jsx(Se,{children:e.jsx(Pe,{lesson:t,onStartQuiz:l})});default:return e.jsx("div",{children:"Tipe materi tidak dikenal."})}}function Ns({course:t,auto_select_lesson_id:i,progress_info:n}){var h,w,N,q,L,D;const l=t.modules&&t.modules.length>0?t.modules:[],[s,f]=C.useState(()=>{var c;const a=window.location.hash;if(a&&a.startsWith("#quiz-")){const o=a.replace("#quiz-",""),m=l.flatMap(u=>u.lessons).find(u=>u.id===o);if(m)return m}if(i){const o=l.flatMap(m=>m.lessons).find(m=>m.id===i);if(o)return o}return((c=l[0])==null?void 0:c.lessons[0])||null}),[v,y]=C.useState(!1),[r,p]=C.useState(()=>l.map(a=>({...a,lessons:a.lessons.map(c=>{let o=c.isCompleted||!1;return c.type==="quiz"&&c.quizzes&&c.quizzes.length>0&&(o=c.quizzes.some(u=>u.attempts&&u.attempts.some(d=>d.is_passed))),{...c,isCompleted:o}})})));C.useEffect(()=>{const a=window.location.hash;if(a&&a.startsWith("#quiz-")){const c=a.replace("#quiz-",""),o=r.flatMap(m=>m.lessons).find(m=>m.id===c);o&&(f(o),window.history.replaceState(null,"",window.location.pathname),console.log("Kembali ke dashboard quiz:",o.title))}},[r]),C.useEffect(()=>{n&&s&&(n.has_incomplete_lessons&&s.id===n.next_incomplete_lesson_id?_.success(`Melanjutkan pembelajaran: ${s.title}`):n.has_completed_lessons&&s.id===n.last_completed_lesson_id&&_.info("Kembali ke materi terakhir yang diselesaikan"))},[n,s]);const k=async a=>{var c,o;try{if((await fetch(`/lesson/${a}/complete`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((c=document.querySelector('meta[name="csrf-token"]'))==null?void 0:c.getAttribute("content"))||""}})).ok){p(d=>d.map(g=>({...g,lessons:g.lessons.map(P=>P.id===a?{...P,isCompleted:!0}:P)})));let u=!1;for(let d=0;d<r.length;d++){for(let g=0;g<r[d].lessons.length;g++)if(r[d].lessons[g].id===a){u=!0,g+1<r[d].lessons.length?f(r[d].lessons[g+1]):d+1<r.length&&r[d+1].lessons.length>0&&f(r[d+1].lessons[0]);break}if(u)break}try{await fetch(`/enrollment/progress/${t.slug}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((o=document.querySelector('meta[name="csrf-token"]'))==null?void 0:o.getAttribute("content"))||""}})}catch(d){console.error("Error updating enrollment progress:",d)}}}catch(m){console.error("Error completing lesson:",m)}},j=[{title:t.title,href:`learn/course/${t.slug}`}],T=a=>{for(const c of r)if(c.lessons.some(o=>o.id===a))return c.title;return""},M=s?e.jsx(Ae,{lesson:s,onQuizComplete:k,courseSlug:t.slug}):null;if((s==null?void 0:s.type)==="quiz"&&v)return e.jsxs(e.Fragment,{children:[e.jsx(O,{title:(s==null?void 0:s.title)||t.title}),M]});const x=r.every(a=>a.lessons.every(c=>c.isCompleted)),b=(()=>{if(!s||r.length===0)return!1;const a=r[r.length-1];return a.lessons.length===0?!1:s.id===a.lessons[a.lessons.length-1].id})();return e.jsxs(Ee,{breadcrumbs:j,courseSlug:t.slug,courseTitle:t.title,modules:r,selectedLesson:s,setSelectedLesson:f,onLessonComplete:k,children:[e.jsx(O,{title:(s==null?void 0:s.title)||t.title}),e.jsxs("div",{className:"m-4 h-full",children:[e.jsxs("div",{className:"mb-4",children:[s&&e.jsx("div",{className:"mb-2",children:e.jsx("span",{className:"text-muted-foreground text-sm font-medium",children:T(s.id)})}),e.jsx("h1",{className:"text-2xl font-bold",children:s==null?void 0:s.title})]}),e.jsx("div",{className:"bg-card mb-4 rounded-lg border p-4",children:M}),e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(S,{variant:"outline",onClick:()=>{let a=null,c=!1;for(const o of r){for(let m=0;m<o.lessons.length;m++)if(o.lessons[m].id===(s==null?void 0:s.id)){if(m>0)a=o.lessons[m-1];else{const u=r.indexOf(o);if(u>0){const d=r[u-1];a=d.lessons[d.lessons.length-1]}}c=!0;break}if(c)break}a&&f(a)},disabled:!s||((w=(h=r[0])==null?void 0:h.lessons[0])==null?void 0:w.id)===(s==null?void 0:s.id),className:"gap-2 disabled:cursor-not-allowed",children:[e.jsx(ke,{className:"h-4 w-4"})," Sebelumnya"]})}),s&&s.type==="quiz"?(q=(N=r.find(a=>a.lessons.find(c=>c.id===s.id)))==null?void 0:N.lessons.find(a=>a.id===s.id))!=null&&q.isCompleted?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 rounded-lg bg-green-50 px-4 py-2 text-green-600",children:[e.jsx(z,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Quiz Sudah Lulus"})]}),(()=>{if(!s||r.length===0)return null;const a=r[r.length-1];if(a.lessons.length===0||s.id===a.lessons[a.lessons.length-1].id)return null;let o=null,m=!1;for(const u of r){for(let d=0;d<u.lessons.length;d++)if(u.lessons[d].id===s.id){if(d<u.lessons.length-1)o=u.lessons[d+1];else{const g=r.indexOf(u);g<r.length-1&&(o=r[g+1].lessons[0])}m=!0;break}if(m)break}return o?e.jsxs(S,{variant:"outline",onClick:()=>f(o),className:"gap-2",children:["Selanjutnya ",e.jsx(I,{className:"h-4 w-4"})]}):null})()]}):e.jsxs("div",{className:"flex items-center gap-2 rounded-lg bg-blue-50 px-4 py-2 text-blue-600",children:[e.jsx(E,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Selesaikan Quiz untuk Melanjutkan"})]}):s&&s.type!=="quiz"&&((D=(L=r.find(a=>a.lessons.find(c=>c.id===s.id)))==null?void 0:L.lessons.find(a=>a.id===s.id))!=null&&D.isCompleted?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 rounded-lg bg-green-50 px-4 py-2 text-green-600",children:[e.jsx(z,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Materi Sudah Selesai"})]}),(()=>{if(!s||r.length===0)return null;const a=r[r.length-1];if(a.lessons.length===0||s.id===a.lessons[a.lessons.length-1].id)return null;let o=null,m=!1;for(const u of r){for(let d=0;d<u.lessons.length;d++)if(u.lessons[d].id===s.id){if(d<u.lessons.length-1)o=u.lessons[d+1];else{const g=r.indexOf(u);g<r.length-1&&(o=r[g+1].lessons[0])}m=!0;break}if(m)break}return o?e.jsxs(S,{variant:"outline",onClick:()=>f(o),className:"gap-2",children:["Selanjutnya ",e.jsx(I,{className:"h-4 w-4"})]}):null})()]}):e.jsxs(S,{onClick:()=>k(s.id),size:"lg",children:[e.jsx(z,{className:"mr-2 h-4 w-4"}),"Selesaikan Materi"]}))]}),x&&b&&e.jsxs("div",{className:"mt-4 flex flex-col items-center justify-center gap-4 md:flex-row",children:[e.jsx("div",{className:"rounded-lg bg-green-100 px-4 py-2 text-center text-sm font-medium text-green-700",children:"Anda sudah menyelesaikan kelas silahkan kembali ke halaman awal untuk mendownload sertifikat"}),e.jsx(S,{asChild:!0,size:"lg",children:e.jsx(F,{href:`/profile/my-courses/${t.slug}`,children:"Kembali ke Halaman Kelas & Download Sertifikat"})})]})]})]})}export{Ns as default};
