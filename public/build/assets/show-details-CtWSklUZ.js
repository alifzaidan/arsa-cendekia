import{K as G,r as y,m as R,j as e}from"./app-CoagF3OV.js";import{B as I}from"./badge-C3-Qgl6E.js";import{B as l}from"./button-DiwSB_ws.js";import{I as N}from"./input-BMF2iBSR.js";import{T as $,d as K,b as i,e as a}from"./table-CD34rDI3.js";import{r as T}from"./utils-C9PFdcQI.js";import{t}from"./index-vitnN30e.js";import{L as A}from"./link-uY94UlQt.js";import{E as O}from"./external-link-AB54c45d.js";import{c as q}from"./createLucideIcon-CbJIzLBb.js";import{T as F}from"./trash-2-DhQ9Prds.js";import{P as J}from"./plus-CtqBsKhf.js";import{f as x}from"./format-Bp4OdCl_.js";import{i as h}from"./id-Don4TG_0.js";import"./index-BXEQ4bzJ.js";import"./index-CvEpHCJr.js";import"./index-CokJC4k2.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],V=q("Pen",Q);function he({webinar:s}){var S;const{auth:c}=G().props,n=c.role.includes("affiliate"),[o,m]=y.useState(!1),[g,f]=y.useState(!1),{data:v,setData:j,post:_,processing:k,reset:L}=R({recording_url:s.recording_url||""}),{delete:P,processing:C}=R(),u=y.useMemo(()=>{const r=c.user.affiliate_code,d=(b,M)=>{try{const p=new URL(b);return p.searchParams.set("ref",M),p.toString()}catch{const p=b.includes("?")?"&":"?";return`${b}${p}ref=${M}`}};return n&&r?{registrationUrl:d(s.registration_url,r),webinarUrl:d(s.webinar_url,r)}:{registrationUrl:s.registration_url,webinarUrl:s.webinar_url}},[s.registration_url,s.webinar_url,c.user.affiliate_code,n]),D=async()=>{try{await navigator.clipboard.writeText(u.registrationUrl),n?t.success("Link pendaftaran dengan kode afiliasi berhasil disalin!"):t.success("Link pendaftaran berhasil disalin!")}catch{t.error("Gagal menyalin link pendaftaran")}},U=async()=>{try{await navigator.clipboard.writeText(u.webinarUrl),n?t.success("Link webinar dengan kode afiliasi berhasil disalin!"):t.success("Link webinar berhasil disalin!")}catch{t.error("Gagal menyalin link webinar")}},E=()=>{_(route("webinars.recording.add",s.id),{onSuccess:()=>{t.success("Link rekaman berhasil ditambahkan!"),f(!1),m(!1),L()},onError:()=>{t.error("Gagal menambahkan link rekaman")}})},z=()=>{_(route("webinars.recording.add",s.id),{onSuccess:()=>{t.success("Link rekaman berhasil diperbarui!"),m(!1)},onError:()=>{t.error("Gagal memperbarui link rekaman")}})},B=()=>{confirm("Apakah Anda yakin ingin menghapus link rekaman ini?")&&P(route("webinars.recording.remove",s.id),{onSuccess:()=>{t.success("Link rekaman berhasil dihapus!"),m(!1),L()},onError:()=>{t.error("Gagal menghapus link rekaman")}})},H=()=>{m(!1),f(!1),j("recording_url",s.recording_url||"")},W=()=>{s.recording_url&&window.open(s.recording_url,"_blank","noopener,noreferrer")};return e.jsxs("div",{className:"space-y-6 rounded-lg border p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-medium",children:"Share Link untuk Menerima Pendaftaran"}),n&&e.jsx("div",{className:"rounded-full bg-green-100 px-3 py-1 text-xs font-medium text-green-800",children:"Mode Afiliasi"})]}),n&&e.jsx("div",{className:"rounded-lg border border-blue-200 bg-blue-50 p-3 dark:border-blue-800 dark:bg-blue-900/20",children:e.jsx("div",{className:"flex items-start gap-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-blue-800 dark:text-blue-200",children:"Link Afiliasi Otomatis"}),e.jsxs("p",{className:"mt-1 text-sm text-blue-700 dark:text-blue-300",children:["Link di bawah sudah menyertakan kode afiliasi Anda (",c.user.affiliate_code,"). Setiap pendaftaran melalui link ini akan memberikan komisi untuk Anda."]})]})})}),e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row",children:[e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700",children:["Link Pendaftaran ",n&&"(dengan kode afiliasi)"]}),e.jsx(N,{type:"text",value:u.registrationUrl,readOnly:!0,className:"rounded border p-2 text-sm",placeholder:"Link Pendaftaran"}),e.jsxs(l,{type:"button",onClick:D,className:"w-full hover:cursor-pointer",disabled:s.status==="draft"||s.status==="archived",children:[n?"Salin Link Afiliasi Pendaftaran":"Salin Link Pendaftaran"," ",e.jsx(A,{})]})]}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700",children:["Link Webinar ",n&&"(dengan kode afiliasi)"]}),e.jsx(N,{type:"text",value:u.webinarUrl,readOnly:!0,className:"rounded border p-2 text-sm",placeholder:"Link Webinar"}),e.jsxs(l,{type:"button",onClick:U,className:"w-full hover:cursor-pointer",disabled:s.status==="draft"||s.status==="archived",children:[n?"Salin Link Afiliasi Webinar":"Salin Link Webinar"," ",e.jsx(A,{})]})]})]}),s.status==="published"?e.jsx("p",{className:"text-muted-foreground text-center text-sm",children:n?"Share link afiliasi diatas ke sosial media, whatsapp, tiktok, landing page, email ataupun channel penjualan lainnya untuk mendapatkan komisi dari setiap pendaftaran":"Share link diatas ke sosial media, whatsapp, tiktok, landing page, email ataupun channel penjualan lainnya untuk menerima order dan pembayaran"}):e.jsx("p",{className:"text-center text-sm text-red-500",children:"Webinar ini belum diterbitkan. Silakan terbitkan webinar terlebih dahulu untuk membagikan link akses webinar."}),n&&s.status==="published"&&e.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-3 dark:border-gray-700 dark:bg-gray-800",children:[e.jsx("h4",{className:"mb-2 text-sm font-medium",children:"Detail Link Afiliasi:"}),e.jsxs("div",{className:"space-y-2 text-xs text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Link Asli:"})," ",s.registration_url]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Kode Afiliasi:"})," ",c.user.affiliate_code]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Rate Komisi:"})," ",c.user.commission,"%"]})]})]}),e.jsx($,{children:e.jsxs(K,{children:[e.jsxs(i,{children:[e.jsx(a,{children:"Status"}),e.jsx(a,{children:(()=>{const r=s.status;let d="bg-gray-200 text-gray-800";return r==="draft"&&(d="bg-gray-200 text-gray-800"),r==="published"&&(d="bg-blue-100 text-blue-800"),r==="archived"&&(d="bg-zinc-300 text-zinc-700"),e.jsx(I,{className:`capitalize ${d} border-0`,children:r})})()})]}),e.jsxs(i,{children:[e.jsx(a,{children:"Kategori"}),e.jsx(a,{children:(S=s.category)==null?void 0:S.name})]}),e.jsxs(i,{children:[e.jsx(a,{children:"Nama Webinar"}),e.jsx(a,{children:s.title})]}),e.jsxs(i,{children:[e.jsx(a,{children:"Harga"}),e.jsx(a,{children:s.price===0?e.jsx("span",{children:"Gratis"}):e.jsxs("span",{children:[s.strikethrough_price>0&&e.jsxs("span",{className:"text-xs text-gray-500 line-through",children:[T.format(s.strikethrough_price)," "]}),e.jsx("span",{className:"text-base font-semibold",children:T.format(s.price)})]})})]}),e.jsxs(i,{children:[e.jsx(a,{children:"Deskripsi"}),e.jsx(a,{children:e.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:s.description??"-"}})})]}),e.jsxs(i,{children:[e.jsx(a,{children:"Benefit"}),e.jsx(a,{children:e.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:s.benefits??"-"}})})]}),e.jsxs(i,{children:[e.jsx(a,{children:"Batch"}),e.jsx(a,{children:s.batch??"-"})]}),e.jsxs(i,{children:[e.jsx(a,{children:"Kuota"}),e.jsx(a,{children:s.quota===0?"Tak terbatas":s.quota})]}),e.jsxs(i,{children:[e.jsx(a,{children:"Waktu Pelaksanaan"}),e.jsxs(a,{children:[x(new Date(s.start_time),"dd MMMM yyyy",{locale:h})," ",x(new Date(s.start_time),"HH:mm",{locale:h})," -"," ",x(new Date(s.end_time),"dd MMMM yyyy",{locale:h})," ",x(new Date(s.end_time),"HH:mm",{locale:h})]})]}),e.jsxs(i,{children:[e.jsx(a,{children:"Deadline Pendaftaran"}),e.jsx(a,{children:x(new Date(s.registration_deadline),"dd MMMM yyyy HH:mm",{locale:h})})]}),e.jsxs(i,{children:[e.jsx(a,{children:"Link Group Peserta"}),e.jsx(a,{children:s.group_url??"-"})]}),e.jsxs(i,{children:[e.jsx(a,{children:"Pemateri"}),e.jsxs(a,{children:[e.jsx("div",{children:s.host_name??"-"}),e.jsx("div",{className:"text-muted-foreground text-xs",children:s.host_description??""})]})]}),e.jsxs(i,{children:[e.jsx(a,{children:"Link Rekaman"}),e.jsx(a,{children:e.jsxs("div",{className:"space-y-3",children:[s.recording_url&&!o&&!g?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1",children:e.jsx("a",{href:s.recording_url,target:"_blank",rel:"noopener noreferrer",className:"text-sm break-all text-blue-600 hover:underline",children:s.recording_url})}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(l,{size:"sm",variant:"outline",onClick:W,className:"p-2",title:"Buka di tab baru",children:e.jsx(O,{className:"h-3 w-3"})}),e.jsx(l,{size:"sm",variant:"outline",onClick:()=>{m(!0),j("recording_url",s.recording_url||"")},className:"p-2",title:"Edit link rekaman",children:e.jsx(V,{className:"h-3 w-3"})}),e.jsx(l,{size:"sm",variant:"destructive",onClick:B,disabled:C,className:"p-2",title:"Hapus link rekaman",children:e.jsx(F,{className:"h-3 w-3"})})]})]}):!o&&!g&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"-"}),e.jsxs(l,{size:"sm",variant:"outline",onClick:()=>f(!0),className:"text-xs",children:[e.jsx(J,{className:"mr-1 h-3 w-3"}),"Tambah Link Rekaman"]})]}),(o||g)&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{type:"url",value:v.recording_url,onChange:r=>j("recording_url",r.target.value),placeholder:"https://example.com/recording",className:"text-sm"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{size:"sm",onClick:o?z:E,disabled:k||!v.recording_url.trim(),className:"text-xs",children:k?"Menyimpan...":o?"Update":"Simpan"}),e.jsx(l,{size:"sm",variant:"outline",onClick:H,disabled:k,className:"text-xs",children:"Batal"})]})]})]})})]})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"font-semibold",children:"Tools yang Digunakan:"}),s.tools&&s.tools.length>0?e.jsx("div",{className:"grid grid-cols-3 gap-4 md:grid-cols-4 lg:grid-cols-5",children:s.tools.map(r=>e.jsxs("div",{children:[e.jsx("img",{src:r.icon?`/storage/${r.icon}`:"/assets/images/placeholder.png",alt:"Tool Icon",className:"mx-auto my-1 mt-2 h-24 rounded border object-cover"}),e.jsx("h4",{className:"text-center text-sm font-medium",children:r.name})]},r.name))}):e.jsx("span",{className:"text-muted-foreground text-sm",children:"Belum ada tools yang ditentukan."})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Thumbnail:"}),e.jsx("img",{src:s.thumbnail?`/storage/${s.thumbnail}`:"/assets/images/placeholder.png",alt:s.title,className:"my-1 mt-2 h-40 w-64 rounded border object-cover"}),s.thumbnail?null:e.jsx("span",{className:"text-muted-foreground text-sm",children:"Thumbnail belum diunggah."})]})]})}export{he as default};
