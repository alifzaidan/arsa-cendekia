import{r as I,j as e,L as A,S as o}from"./app-BfgZ1jJD.js";import{D as M}from"./delete-dialog-DPIX4Sl9.js";import{B as m}from"./badge-CQkAYN-A.js";import{B as d}from"./button-BJ2tfxUg.js";import{D as E,a as L,b as U}from"./dialog-CblXDkko.js";import{S as W}from"./separator-OAx4gj7V.js";import{T as u,a as j,b as g}from"./tooltip-YszIhp1B.js";import{A as z}from"./admin-layout-DjhmQln_.js";import K from"./edit-qFBRsfT5.js";import{S as $}from"./square-pen-DbTNzW_h.js";import{T as F}from"./trash-sHtd9XMx.js";import{U as H}from"./user-954k5RzP.js";import{M as O}from"./mail-1ViNCBmL.js";import{P as R}from"./phone-CV8fUjTg.js";import{C as q}from"./calendar-DULIxk6K.js";import{D as G}from"./dollar-sign-Dexcs9z8.js";import{C as w}from"./credit-card-DOUWp7Ir.js";import{B as k,M as D}from"./monitor-play-DF4fahFT.js";import{C as Y}from"./circle-check-big-BvayT9Ds.js";import{C as Z}from"./clock-DULUCW5e.js";import{U as J}from"./users-EydSv-Es.js";import{C as Q}from"./circle-play-BS5DSqlw.js";import{C as V}from"./chevron-left-D4wjm_3Q.js";import{C as X}from"./chevron-right-BoyAfqJq.js";import"./alert-dialog-KBGciRPH.js";import"./index-DtSPkv89.js";import"./index-tEHxzkPb.js";import"./index-Cmel2OYl.js";import"./Combination-Dyc663Sd.js";import"./utils-C1iKCs30.js";import"./index-yQBepqoG.js";import"./x-CquPhaxv.js";import"./createLucideIcon-DE9Tn2K0.js";import"./index-Z40DZPLH.js";import"./index-Dn_VzzJM.js";import"./floating-ui.react-dom-C37UeumF.js";import"./index-Co0ZWakJ.js";import"./index-DkgfW9Gg.js";import"./sonner-DK45uaK0.js";import"./index-CUDXU6sL.js";import"./breadcrumbs-CIofoTQN.js";import"./dropdown-menu-D-RFvgcT.js";import"./index-W6qf3D2J.js";import"./check-A_SiYeLL.js";import"./app-sidebar-header-DinrI-BJ.js";import"./chevrons-up-down-BfiKwgcd.js";import"./banknote-f_p9E3cg.js";import"./input-error--WoyB8xM.js";import"./input-DAiJIf4x.js";import"./label-wqJbabk0.js";const f=s=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(s),x=s=>new Date(s).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),ee=s=>{const r={paid:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",pending:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",failed:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"},t={paid:"Lunas",pending:"Pending",failed:"Gagal"};return e.jsx(m,{className:r[s]||r.pending,children:t[s]||s})},se=s=>s===100?e.jsx(m,{className:"bg-green-100 text-green-800",children:"Selesai"}):s>0?e.jsxs(m,{className:"bg-blue-100 text-blue-800",children:["Berlangsung (",s,"%)"]}):e.jsx(m,{className:"bg-gray-100 text-gray-800",children:"Belum Dimulai"}),v=s=>{const r={course:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",webinar:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"},t={course:"Kelas",webinar:"Webinar"};return e.jsx(m,{className:r[s]||r.course,children:t[s]||s})},ae=s=>{const r=[];return s.courseItems&&r.push(...s.courseItems.map(t=>({type:"course",title:t.course.title,mentor:t.course.user.name,thumbnail:t.course.thumbnail,price:t.course.price}))),s.webinarItems&&r.push(...s.webinarItems.map(t=>({type:"webinar",title:t.webinar.title,mentor:t.webinar.user.name,thumbnail:t.webinar.thumbnail,price:t.webinar.price}))),r},y=s=>{switch(s){case"course":return e.jsx(k,{className:"h-4 w-4"});case"webinar":return e.jsx(D,{className:"h-4 w-4"});default:return e.jsx(Q,{className:"h-4 w-4"})}},C=({currentPage:s,lastPage:r,total:t,from:l,to:h,onPageChange:n})=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-muted-foreground text-sm",children:["Menampilkan ",l," sampai ",h," dari ",t," entri"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(d,{variant:"outline",size:"sm",onClick:()=>n(s-1),disabled:s<=1,children:[e.jsx(V,{className:"h-4 w-4"}),"Sebelumnya"]}),e.jsxs("span",{className:"text-sm",children:["Halaman ",s," dari ",r]}),e.jsxs(d,{variant:"outline",size:"sm",onClick:()=>n(s+1),disabled:s>=r,children:["Selanjutnya",e.jsx(X,{className:"h-4 w-4"})]})]})]});function Xe({user:s,invoices:r,enrollments:t,stats:l}){var b,N;const[h,n]=I.useState(!1),_=[{title:"Dashboard",href:"/admin/dashboard"},{title:"Kelola Peserta",href:"/admin/users"},{title:s.name,href:`/admin/users/${s.id}`}],S=a=>{o.get(`/admin/users/${s.id}`,{invoices_page:a},{preserveState:!0})},B=a=>{o.get(`/admin/users/${s.id}`,{enrollments_page:a},{preserveState:!0})},P=()=>{o.delete(route("users.destroy",s.id),{onSuccess:()=>{o.visit("/admin/users")}})};let p="";if(s!=null&&s.phone_number){let a=s.phone_number.replace(/\D/g,"");a.startsWith("0")&&(a="62"+a.substring(1)),p=`https://wa.me/${a}`}return e.jsxs(z,{breadcrumbs:_,children:[e.jsx(A,{title:`Detail Peserta - ${s.name}`}),e.jsxs("div",{className:"space-y-6 px-4 py-4 md:px-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Detail Peserta"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Informasi lengkap dan aktivitas peserta"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[p&&e.jsxs(u,{children:[e.jsx(j,{asChild:!0,children:e.jsx(d,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs("a",{href:p,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2",children:[e.jsxs("svg",{role:"img",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:"w-4 fill-[#25D366]",children:[e.jsx("title",{children:"WhatsApp"}),e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})]}),"WhatsApp"]})})}),e.jsx(g,{children:e.jsx("p",{children:"Hubungi via WhatsApp"})})]}),e.jsxs(E,{open:h,onOpenChange:n,children:[e.jsxs(u,{children:[e.jsx(j,{asChild:!0,children:e.jsx(L,{asChild:!0,children:e.jsxs(d,{variant:"outline",size:"sm",children:[e.jsx($,{className:"mr-2 h-4 w-4"}),"Edit"]})})}),e.jsx(g,{children:e.jsx("p",{children:"Edit Data Pengguna"})})]}),e.jsx(U,{children:e.jsx(K,{user:{...s,phone_number:s.phone_number??""},setOpen:n})})]}),e.jsxs(u,{children:[e.jsx(j,{asChild:!0,children:e.jsx("div",{children:e.jsx(M,{trigger:e.jsxs(d,{variant:"outline",size:"sm",className:"border-red-200 text-red-600 hover:border-red-300 hover:text-red-700",children:[e.jsx(F,{className:"mr-2 h-4 w-4"}),"Hapus"]}),title:"Apakah Anda yakin ingin menghapus pengguna ini?",itemName:s.name,onConfirm:P})})}),e.jsx(g,{children:e.jsx("p",{children:"Hapus Pengguna"})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"lg:col-span-1",children:[e.jsx("div",{className:"border-border bg-card text-card-foreground rounded-xl border p-6 shadow-sm",children:e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("div",{className:"mb-4 flex h-20 w-20 items-center justify-center rounded-full bg-blue-100",children:s.avatar?e.jsx("img",{src:s.avatar,alt:s.name,className:"h-20 w-20 rounded-full object-cover"}):e.jsx(H,{className:"h-10 w-10 text-blue-600"})}),e.jsx("h3",{className:"text-lg font-semibold",children:s.name}),e.jsx("p",{className:"text-muted-foreground mb-4 text-sm",children:((b=s.roles[0])==null?void 0:b.name)==="user"?"Peserta":(N=s.roles[0])==null?void 0:N.name}),e.jsxs("div",{className:"w-full space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(O,{className:"text-muted-foreground h-4 w-4"}),e.jsx("span",{children:s.email})]}),s.phone_number&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(R,{className:"text-muted-foreground h-4 w-4"}),e.jsx("span",{children:s.phone_number})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(q,{className:"text-muted-foreground h-4 w-4"}),e.jsxs("span",{children:["Bergabung ",x(s.created_at)]})]})]})]})}),e.jsxs("div",{className:"border-border bg-card text-card-foreground mt-6 rounded-xl border p-6 shadow-sm",children:[e.jsx("h3",{className:"mb-4 text-lg font-semibold",children:"Statistik"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm",children:"Total Belanja"})]}),e.jsx("span",{className:"font-medium",children:f(l.total_spent)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-sm",children:"Total Transaksi"})]}),e.jsx("span",{className:"font-medium",children:l.total_transactions})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{className:"h-4 w-4 text-purple-600"}),e.jsx("span",{className:"text-sm",children:"Kelas Diikuti"})]}),e.jsx("span",{className:"font-medium",children:l.total_courses})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-4 w-4 text-pink-600"}),e.jsx("span",{className:"text-sm",children:"Webinar Diikuti"})]}),e.jsx("span",{className:"font-medium",children:l.total_webinars})]}),e.jsx(W,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm",children:"Kelas Selesai"})]}),e.jsx("span",{className:"font-medium",children:l.completed_courses})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-4 w-4 text-yellow-600"}),e.jsx("span",{className:"text-sm",children:"Kelas Aktif"})]}),e.jsx("span",{className:"font-medium",children:l.active_courses})]})]})]})]}),e.jsxs("div",{className:"space-y-6 lg:col-span-2",children:[e.jsxs("div",{className:"border-border bg-card text-card-foreground rounded-xl border p-6 shadow-sm",children:[e.jsx("h3",{className:"mb-4 text-lg font-semibold",children:"Program Yang Diikuti"}),t.data.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[e.jsx(J,{className:"mb-2 h-12 w-12 text-gray-400"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Belum mengikuti program apapun"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-4 space-y-4",children:t.data.map(a=>{const i=a.course||a.webinar;return e.jsxs("div",{className:"flex items-start gap-4 rounded-lg border p-4",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-gray-100",children:y(a.type)}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[e.jsx("h4",{className:"font-medium",children:i==null?void 0:i.title}),v(a.type)]}),e.jsxs("p",{className:"text-muted-foreground text-sm",children:["Mentor: ",i==null?void 0:i.user.name]}),e.jsxs("p",{className:"text-muted-foreground text-sm",children:["Bergabung: ",x(a.created_at)]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"mb-2",children:f((i==null?void 0:i.price)||0)}),a.type==="course"&&a.progress!==void 0&&se(a.progress)]})]})})]},a.id)})}),e.jsx(C,{currentPage:t.current_page,lastPage:t.last_page,total:t.total,from:t.from,to:t.to,onPageChange:B})]})]}),e.jsxs("div",{className:"border-border bg-card text-card-foreground rounded-xl border p-6 shadow-sm",children:[e.jsx("h3",{className:"mb-4 text-lg font-semibold",children:"Riwayat Transaksi"}),r.data.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[e.jsx(w,{className:"mb-2 h-12 w-12 text-gray-400"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Belum ada transaksi"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-4 space-y-4",children:r.data.map(a=>{const i=ae(a);return e.jsxs("div",{className:"rounded-lg border p-4",children:[e.jsxs("div",{className:"mb-3 flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium",children:["#",a.invoice_code]}),e.jsx("p",{className:"text-muted-foreground text-sm",children:x(a.created_at)}),a.paid_at&&e.jsxs("p",{className:"text-muted-foreground text-sm",children:["Dibayar: ",x(a.paid_at)]})]}),e.jsxs("div",{className:"text-right",children:[ee(a.status),e.jsx("div",{className:"mt-1 font-medium",children:f(a.nett_amount)})]})]}),i.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Item yang dibeli:"}),i.map((c,T)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[y(c.type),e.jsx("span",{className:"font-medium",children:c.title}),v(c.type),e.jsxs("span",{className:"text-muted-foreground",children:["- Mentor: ",c.mentor]})]},T))]})]},a.id)})}),e.jsx(C,{currentPage:r.current_page,lastPage:r.last_page,total:r.total,from:r.from,to:r.to,onPageChange:S})]})]})]})]})]})]})}export{Xe as default};
