import{r as i,m as E,j as e}from"./app-k8zswjN4.js";import{I as u}from"./input-error-D_1uxFxj.js";import{B as v}from"./button-DXavOchq.js";import{b as F,c as w,d as I,e as M,f as P}from"./dialog-BuCqyxzX.js";import{I as d}from"./input-Dxh7gntF.js";import{L as g}from"./label-C9tmqixz.js";import{t as b}from"./index-D_K9UrkW.js";import"./utils-CkV0Qb-V.js";import"./index-yeKsPfmp.js";import"./index-pHOxZwLY.js";import"./index-pXs-r0Ho.js";import"./index-D6V9crY2.js";import"./Combination-BrdjsB_W.js";import"./x-Brw5WuUb.js";import"./createLucideIcon-D-iNy-Um.js";function Y({setOpen:f}){const h=i.useRef(null),o=i.useRef(null),[k,l]=i.useState(null),[y,m]=i.useState(!1),{data:r,setData:t,post:T,processing:j,reset:C,errors:p,clearErrors:D}=E({name:"",position:"",image:null}),N=s=>{s.preventDefault();const a=new FormData;a.append("name",r.name),a.append("position",r.position),r.image&&a.append("image",r.image),T(route("certificate-signs.store"),{preserveScroll:!0,onSuccess:()=>{f(!1),C(),D(),l(null),o.current&&(o.current.value="")},onError:()=>{var n;return(n=h.current)==null?void 0:n.focus()}})};return e.jsxs(F,{className:"max-w-md",children:[e.jsx(w,{children:"Tambah Tanda Tangan"}),e.jsx(I,{children:"Silakan masukkan data tanda tangan baru yang ingin Anda tambahkan."}),e.jsxs("form",{className:"space-y-4",onSubmit:N,children:[e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{children:[e.jsx(g,{htmlFor:"name",children:"Nama"}),e.jsx(d,{id:"name",type:"text",name:"name",ref:h,value:r.name,onChange:s=>t("name",s.target.value),placeholder:"Masukkan nama",autoComplete:"off",required:!0}),e.jsx(u,{message:p.name})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"position",children:"Posisi/Jabatan"}),e.jsx(d,{id:"position",type:"text",name:"position",value:r.position,onChange:s=>t("position",s.target.value),placeholder:"Masukkan posisi/jabatan (opsional)",autoComplete:"off"}),e.jsx(u,{message:p.position})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"image",children:"Tanda Tangan"}),e.jsx("img",{src:k||"/assets/images/placeholder.png",alt:"Preview Signature",className:"my-1 mt-2 h-24 rounded border object-contain"}),e.jsx(d,{id:"image",type:"file",name:"image",ref:o,accept:"image/png, image/jpeg, image/jpg",className:y?"border-red-500 focus-visible:ring-red-500":"",onChange:s=>{var n;const a=((n=s.target.files)==null?void 0:n[0])??null;if(a){if(!["image/png","image/jpeg","image/jpg"].includes(a.type)){m(!0),t("image",null),b("Gambar harus png, jpg, atau jpeg");return}if(a.size>2*1024*1024){m(!0),t("image",null),b("Ukuran file maksimal 2MB!");return}}if(m(!1),t("image",a),a){const c=new FileReader;c.onload=S=>{var x;return l((x=S.target)==null?void 0:x.result)},c.readAsDataURL(a)}else l(null)}}),e.jsx("p",{className:"text-muted-foreground mt-1 text-xs",children:"Format: JPEG, PNG, JPG. Maksimal 2MB."}),e.jsx(u,{message:p.image})]})]}),e.jsxs(M,{className:"gap-2",children:[e.jsx(P,{asChild:!0,children:e.jsx(v,{variant:"secondary",onClick:()=>f(!1),className:"hover:cursor-pointer",children:"Batal"})}),e.jsx(v,{disabled:j,asChild:!0,className:"hover:cursor-pointer",children:e.jsx("button",{type:"submit",children:j?"Menyimpan...":"Tambah Tanda Tangan"})})]})]})]})}export{Y as default};
