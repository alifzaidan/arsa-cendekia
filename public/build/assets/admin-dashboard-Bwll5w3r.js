import{r as i,j as e,S as j}from"./app-0I1QzVTg.js";import{B as $}from"./badge-CjFQCB4e.js";import{B as c}from"./button-D2ZpcnoY.js";import{C as b}from"./calendar-C7CkyaD-.js";import{P as N,a as v,b as y}from"./popover-OVqhZvMy.js";import{S as L}from"./separator-DFkbzSLT.js";import{c as _}from"./utils-liWpcwDK.js";import{ParticipantChart as F}from"./participant-chart-BpQ0D2rb.js";import{RevenueChart as B}from"./revenue-chart-BlYSrls8.js";import{D as z}from"./dollar-sign-D30D1dLF.js";import{E,F as O,C as V}from"./filter-D6-pDMek.js";import{T as p,a as A}from"./trending-up-Bef1YMpx.js";import{c as x}from"./createLucideIcon-CstU9H3f.js";import{U as H}from"./user-check-CU66v9ir.js";import{B as U}from"./book-open-DPeyVw3G.js";import{C as w}from"./calendar-ChXQrJJ2.js";import{C as k}from"./chevron-down-B9nJkVIc.js";import{X as K}from"./x-C19WkH_u.js";import{f as m}from"./format-Bp4OdCl_.js";import{i as D}from"./id-Don4TG_0.js";import"./index-Bota6Y3-.js";import"./index-57D5-Vr4.js";import"./chevron-left-B3Wkr27h.js";import"./chevron-right-c3YFH7gb.js";import"./index-uHisoZSR.js";import"./floating-ui.react-dom-BJinGOXu.js";import"./Combination-DeKqWJgp.js";import"./index-BS3cphgy.js";import"./card-BRhIXrGS.js";import"./chart-BehtgzQd.js";import"./index-DLSjWhDk.js";import"./select-VJ5t5ozs.js";import"./index-D2fVTj-3.js";import"./index-C2hMLgem.js";import"./index-ByifcKOL.js";import"./check-Bn2WpFkP.js";import"./chevron-up-B02KnPY6.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["path",{d:"M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16",key:"tarvll"}]],W=x("Laptop",R);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],G=x("Mic",q);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],Z=x("Network",X);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Q=x("UserPlus",J),Y=a=>`${a>=0?"+":""}${a.toFixed(1)}%`,ee=a=>a>0?"text-green-600":a<0?"text-red-600":"text-gray-600",te=a=>a>0?e.jsx(p,{className:"h-3 w-3"}):a<0?e.jsx(A,{className:"h-3 w-3"}):e.jsx(V,{className:"h-3 w-3"}),l=a=>{const s=typeof a=="string"?parseFloat(a):a;return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(s)},ae=a=>{var s,r,o;return(s=a.course_items)!=null&&s.length&&a.course_items.length>0?`Kelas: ${a.course_items[0].course.title}`:(r=a.bootcamp_items)!=null&&r.length&&a.bootcamp_items.length>0?`Bootcamp: ${a.bootcamp_items[0].bootcamp.title}`:(o=a.webinar_items)!=null&&o.length&&a.webinar_items.length>0?`Webinar: ${a.webinar_items[0].webinar.title}`:"Produk tidak diketahui"},se=a=>{const s={course:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",bootcamp:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",webinar:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"},r={course:"Kelas",bootcamp:"Bootcamp",webinar:"Webinar"};return e.jsx($,{variant:"secondary",className:s[a],children:r[a]})};function Ae({stats:a,filters:s}){const[r,o]=i.useState(()=>{if(s!=null&&s.start_date){const t=new Date(s.start_date+"T00:00:00");return isNaN(t.getTime())?void 0:t}}),[n,d]=i.useState(()=>{if(s!=null&&s.end_date){const t=new Date(s.end_date+"T00:00:00");return isNaN(t.getTime())?void 0:t}}),[S,g]=i.useState(!1),[T,h]=i.useState(!1),P=()=>{const t={};r&&(t.start_date=m(r,"yyyy-MM-dd")),n&&(t.end_date=m(n,"yyyy-MM-dd")),j.get(route("dashboard"),t,{preserveState:!1,preserveScroll:!0})},C=()=>{o(void 0),d(void 0),j.get(route("dashboard"),{},{preserveState:!1,preserveScroll:!0})},f=r&&n;i.useEffect(()=>{if(s!=null&&s.start_date){const t=new Date(s.start_date+"T00:00:00");isNaN(t.getTime())||o(t)}else o(void 0);if(s!=null&&s.end_date){const t=new Date(s.end_date+"T00:00:00");isNaN(t.getTime())||d(t)}else d(void 0)},[s==null?void 0:s.start_date,s==null?void 0:s.end_date]);const I=[{title:"Total Pendapatan",value:l(a.total_revenue),icon:e.jsx(z,{className:"text-muted-foreground size-5"}),color:"bg-green-100",subtitle:f&&a.filtered_date_range?`${a.filtered_date_range.start} - ${a.filtered_date_range.end}`:"Semua periode"},{title:"Pendapatan Bulan Ini",value:l(a.revenue_this_month),icon:e.jsx(E,{className:"text-muted-foreground size-5"}),color:"bg-blue-100",percentage:a.monthly_revenue_change,comparison:` bulan lalu (${l(a.revenue_last_month)})`},{title:"Pendapatan Hari Ini",value:l(a.revenue_today),icon:e.jsx(p,{className:"text-muted-foreground size-5"}),color:"bg-yellow-100",percentage:a.daily_revenue_change,comparison:` kemarin (${l(a.revenue_yesterday)})`}],M=[{title:"Total Pengguna",value:a.total_users.toLocaleString("id-ID"),icon:e.jsx(Q,{className:"text-muted-foreground size-5"}),subValue:`+${a.new_users_last_week.toLocaleString("id-ID")} dalam 7 hari`,color:"bg-purple-100"},{title:"Total Mentor",value:a.total_mentors.toLocaleString("id-ID"),icon:e.jsx(H,{className:"text-muted-foreground size-5"}),subValue:`+${a.new_mentors_last_week.toLocaleString("id-ID")} dalam 7 hari`,color:"bg-green-100"},{title:"Total Afiliasi",value:a.total_affiliates.toLocaleString("id-ID"),icon:e.jsx(Z,{className:"text-muted-foreground size-5"}),subValue:`+${a.new_affiliates_last_week.toLocaleString("id-ID")} dalam 7 hari`,color:"bg-blue-100"},{title:"Total Kelas Online",value:a.total_courses.toLocaleString("id-ID"),icon:e.jsx(U,{className:"text-muted-foreground size-5"}),color:"bg-yellow-100"},{title:"Total Bootcamp",value:a.total_bootcamps.toLocaleString("id-ID"),icon:e.jsx(W,{className:"text-muted-foreground size-5"}),color:"bg-red-100"},{title:"Total Webinar",value:a.total_webinars.toLocaleString("id-ID"),icon:e.jsx(G,{className:"text-muted-foreground size-5"}),color:"bg-purple-200"}];return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-1 items-start gap-6 xl:grid-cols-3",children:[e.jsxs("div",{className:"space-y-6 xl:col-span-2",children:[e.jsx("div",{className:"bg-card mb-6 rounded-lg border p-4",children:e.jsxs("div",{className:"flex flex-col gap-4 2xl:flex-row 2xl:items-end",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Filter Total Pendapatan"}),e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row",children:[e.jsxs(N,{open:S,onOpenChange:g,children:[e.jsx(v,{asChild:!0,children:e.jsxs(c,{variant:"outline",className:_("w-full justify-between text-left font-normal sm:w-[200px]",!r&&"text-muted-foreground"),children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(w,{className:"mr-2 h-4 w-4"}),r?m(r,"dd MMM yyyy",{locale:D}):"Tanggal mulai"]}),e.jsx(k,{className:"h-4 w-4"})]})}),e.jsx(y,{className:"w-auto overflow-hidden p-0",align:"start",children:e.jsx(b,{mode:"single",selected:r,captionLayout:"dropdown",onSelect:t=>{o(t),g(!1)},disabled:t=>t>new Date||(n?t>n:!1),initialFocus:!0})})]}),e.jsxs(N,{open:T,onOpenChange:h,children:[e.jsx(v,{asChild:!0,children:e.jsxs(c,{variant:"outline",className:_("w-full justify-between text-left font-normal sm:w-[200px]",!n&&"text-muted-foreground"),children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(w,{className:"mr-2 h-4 w-4"}),n?m(n,"dd MMM yyyy",{locale:D}):"Tanggal selesai"]}),e.jsx(k,{className:"h-4 w-4"})]})}),e.jsx(y,{className:"w-auto overflow-hidden p-0",align:"start",children:e.jsx(b,{mode:"single",selected:n,captionLayout:"dropdown",onSelect:t=>{d(t),h(!1)},disabled:t=>t>new Date||(r?t<r:!1),initialFocus:!0})})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(c,{onClick:P,disabled:!r||!n,className:"flex items-center gap-2",children:[e.jsx(O,{className:"h-4 w-4"}),"Terapkan Filter"]}),f&&e.jsxs(c,{variant:"outline",onClick:C,className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-4 w-4"}),"Hapus Filter"]})]})]})}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:I.map((t,u)=>e.jsxs("div",{className:"border-border bg-card text-card-foreground rounded-xl border p-6 shadow-sm",children:[e.jsxs("div",{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx("h3",{className:"text-sm font-medium tracking-tight",children:t.title}),e.jsx("div",{className:`flex h-10 w-10 items-center justify-center rounded-full ${t.color}`,children:t.icon})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 text-2xl font-bold",children:t.value}),t.subtitle&&e.jsx("p",{className:"text-muted-foreground mb-2 text-xs",children:t.subtitle}),t.percentage!==void 0&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsxs("span",{className:`flex items-center text-xs font-medium ${ee(t.percentage)}`,children:[te(t.percentage),e.jsx("span",{className:"ml-1",children:Y(t.percentage)})]}),e.jsx("span",{className:"text-muted-foreground text-xs",children:t.comparison})]})]})]},u))}),e.jsx(B,{data:a.monthly_revenue_data}),e.jsx(F,{data:a.participant_data}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:M.map((t,u)=>e.jsxs("div",{className:"border-border bg-card text-card-foreground rounded-xl border p-6 shadow-sm",children:[e.jsxs("div",{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx("h3",{className:"text-sm font-medium tracking-tight",children:t.title}),e.jsx("div",{className:`flex h-10 w-10 items-center justify-center rounded-full ${t.color}`,children:t.icon})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-1 text-2xl font-bold",children:t.value}),t.subValue&&e.jsx("p",{className:"text-muted-foreground text-xs",children:t.subValue})]})]},u))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border-border bg-card text-card-foreground rounded-xl border p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Pendaftar Produk"}),e.jsx("div",{className:"mb-2 text-2xl font-bold text-green-500",children:a.total_participants.toLocaleString("id-ID")}),e.jsxs("div",{className:"text-muted-foreground mb-4 flex items-center gap-2",children:[e.jsxs("p",{className:"text-sm",children:[a.participants_this_month.toLocaleString("id-ID")," Pendaftar Bulan ini"]}),e.jsx(p,{size:"20"})]}),e.jsx(L,{className:"mb-4"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Pendaftar Produk Terbaru"}),e.jsx("div",{className:"mt-4 space-y-6",children:a.recent_sales.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 py-12",children:[e.jsx("img",{src:"/assets/images/not-found.webp",alt:"Penjualan Tidak Tersedia",className:"w-48"}),e.jsx("div",{className:"text-center text-gray-500",children:"Belum ada penjualan terbaru saat ini."})]}):a.recent_sales.map(t=>e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx("p",{className:"text-sm leading-none font-medium",children:t.user.name}),e.jsx("p",{className:"text-muted-foreground text-sm",children:ae(t)})]}),e.jsx("div",{className:"font-medium",children:l(t.nett_amount)})]},t.id))})]}),e.jsxs("div",{className:"border-border bg-card text-card-foreground rounded-xl border p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Produk Terpopuler"}),e.jsx("p",{className:"text-muted-foreground mb-4 text-sm",children:"Produk dengan pendaftar terbanyak."}),e.jsx("div",{className:"space-y-4",children:a.popular_products.length===0?e.jsx("div",{className:"py-8 text-center text-gray-500",children:"Belum ada data produk populer."}):a.popular_products.slice(0,8).map(t=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex min-w-0 flex-1 items-center space-x-3",children:e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"truncate text-sm font-medium",children:t.title}),e.jsxs("div",{className:"mt-1 flex items-center space-x-2",children:[se(t.type),e.jsx("span",{className:"text-muted-foreground text-xs",children:l(t.price)})]})]})}),e.jsxs("div",{className:"flex-shrink-0 text-right",children:[e.jsx("span",{className:"text-sm font-semibold",children:t.enrollment_count}),e.jsx("p",{className:"text-muted-foreground text-xs",children:"pendaftar"})]})]},t.id))})]})]})]})})}export{Ae as default};
