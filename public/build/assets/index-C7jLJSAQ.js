import{K as re,r as i,j as e,L as T,$ as q}from"./app-0I1QzVTg.js";import{B as c}from"./button-D2ZpcnoY.js";import{C as le}from"./checkbox-BahJMLR_.js";import{I as N}from"./input-BEoPePt1.js";import{L as h}from"./label-B5pGucUU.js";import{S as H}from"./separator-DFkbzSLT.js";import{T as ne,a as ie,b as M,c as z}from"./tabs-Ci54nyf0.js";import{U as C}from"./user-layout-BNhF3X2t.js";import{U as G}from"./user-DFjCH8AI.js";import{B as P}from"./badge-check-xDup0vpw.js";import{H as oe}from"./hourglass-Cxu9oQ8x.js";import{C as X}from"./check-Bn2WpFkP.js";import{X as ce}from"./x-C19WkH_u.js";import"./index-Bota6Y3-.js";import"./index-57D5-Vr4.js";import"./utils-liWpcwDK.js";import"./index-BS3cphgy.js";import"./index-uHisoZSR.js";import"./index-D2fVTj-3.js";import"./floating-ui.react-dom-BJinGOXu.js";import"./index-ByifcKOL.js";import"./index-B7VqJuUm.js";import"./sonner-DAwbnb_L.js";import"./index-_fiB5kas.js";import"./breadcrumbs-D7kDS1RW.js";import"./createLucideIcon-CstU9H3f.js";import"./index-gMo3zbQG.js";import"./Combination-DeKqWJgp.js";import"./tooltip-Bgr99O1S.js";import"./dropdown-menu-Ba8NYkgA.js";import"./index-C2hMLgem.js";import"./circle-GcGN6Pbe.js";import"./chevron-right-c3YFH7gb.js";import"./icon-DCFX0qpW.js";import"./badge-CjFQCB4e.js";import"./command-B6NJ2fw6.js";import"./dialog-x_8xUkrq.js";import"./circle-check-big-Bg27NMmT.js";import"./clock-CZHKhQei.js";import"./house-CW1yAxLJ.js";import"./monitor-play-CKPUeDqI.js";import"./presentation-DuCFxc_8.js";function F(r){if(!r)return[];const f=r.match(/<li>(.*?)<\/li>/g);return f?f.map(g=>g.replace(/<\/?li>/g,"").trim()):[]}function We({bootcamp:r,hasAccess:f,pendingInvoiceUrl:g,referralInfo:m}){var K;const{auth:L}=re().props,A=!!L.user,B=A&&((K=L.user)==null?void 0:K.phone_number),[b,J]=i.useState(!1),[j,u]=i.useState(!1),[d,$]=i.useState(""),[s,k]=i.useState(null),[D,R]=i.useState(!1),[w,p]=i.useState(""),[V,E]=i.useState(!1),[x,_]=i.useState({ig_follow_proof:null,tiktok_follow_proof:null,tag_friend_proof:null}),Y=F(r.requirements),Q=F(r.benefits),W=F(r.curriculum),n=r.price===0,v=5e3,Z=r.price,ee=(s==null?void 0:s.discount_amount)||0,I=Z-ee,U=n?0:I+v;i.useEffect(()=>{const a=new URLSearchParams(window.location.search).get("ref");a?sessionStorage.setItem("referral_code",a):m.code&&sessionStorage.setItem("referral_code",m.code)},[m]),i.useEffect(()=>{if(!d.trim()||n){k(null),p("");return}const t=setTimeout(()=>{ae()},500);return()=>clearTimeout(t)},[d]);const ae=async()=>{var t;if(!(!d.trim()||n)){R(!0),p("");try{const l=await(await fetch("/api/discount-codes/validate",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.content)||""},credentials:"same-origin",body:JSON.stringify({code:d,amount:r.price,product_type:"bootcamp",product_id:r.id})})).json();l.valid?(k(l),p("")):(k(null),p(l.message||"Kode promo tidak valid"))}catch{k(null),p("Terjadi kesalahan saat memvalidasi kode promo")}finally{R(!1)}}},te=async t=>{var l;if(t.preventDefault(),!x.ig_follow_proof||!x.tiktok_follow_proof||!x.tag_friend_proof){alert("Harap upload semua bukti yang diperlukan!");return}u(!0);const a=new FormData;a.append("type","bootcamp"),a.append("id",r.id),a.append("ig_follow_proof",x.ig_follow_proof),a.append("tiktok_follow_proof",x.tiktok_follow_proof),a.append("tag_friend_proof",x.tag_friend_proof);try{const y=await fetch(route("enroll.free"),{method:"POST",headers:{"X-CSRF-TOKEN":((l=document.querySelector('meta[name="csrf-token"]'))==null?void 0:l.content)||""},body:a}),o=await y.json();y.ok&&o.redirect_url?window.location.href=o.redirect_url:alert(o.message||"Gagal mendaftar bootcamp gratis.")}catch{alert("Terjadi kesalahan saat proses pendaftaran.")}finally{u(!1)}},se=async t=>{var a;if(t.preventDefault(),!B){alert("Profil Anda belum lengkap! Harap lengkapi nomor telepon terlebih dahulu."),window.location.href=route("profile.edit");return}if(!b&&!n){alert("Anda harus menyetujui syarat dan ketentuan!");return}if(u(!0),n){E(!0),u(!1);return}try{const l=r.strikethrough_price>0?r.strikethrough_price-r.price:0,y=(s==null?void 0:s.discount_amount)||0,o={type:"bootcamp",id:r.id,discount_amount:l+y,nett_amount:I,transaction_fee:v,total_amount:U};s!=null&&s.valid&&(o.discount_code_id=s.discount_code.id,o.discount_code_amount=s.discount_amount),console.log("Sending invoice data:",o);const O=await fetch(route("invoice.store"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((a=document.querySelector('meta[name="csrf-token"]'))==null?void 0:a.content)||""},credentials:"same-origin",body:JSON.stringify(o)}),S=await O.json();O.ok&&S.url?window.location.href=S.url:alert(S.message||"Gagal membuat invoice.")}catch(l){console.error("Checkout error:",l),alert("Terjadi kesalahan saat proses pembayaran.")}finally{u(!1)}};if(!A){const t=window.location.href,a=route("login",{redirect:t});return e.jsxs(C,{children:[e.jsx(T,{title:"Login Required"}),e.jsx("section",{className:"to-primary w-full bg-gradient-to-tl from-black px-4",children:e.jsxs("div",{className:"mx-auto my-12 w-full max-w-7xl px-4",children:[e.jsxs("h2",{className:"mx-auto mb-4 max-w-3xl bg-gradient-to-r from-[#71D0F7] via-white to-[#E6834A] bg-clip-text text-center text-3xl font-bold text-transparent italic sm:text-4xl",children:['Daftar Bootcamp "',r.title,'"']}),e.jsx("p",{className:"text-center text-gray-400",children:"Silakan login terlebih dahulu untuk mendaftar bootcamp."})]})}),e.jsx("section",{className:"mx-auto my-4 w-full max-w-7xl px-4",children:e.jsxs("div",{className:"flex h-full flex-col items-center justify-center space-y-4 rounded-lg border p-6 text-center",children:[e.jsx(G,{size:64,className:"text-blue-500"}),e.jsx("h2",{className:"text-xl font-bold",children:"Login Diperlukan"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Anda perlu login terlebih dahulu untuk mendaftar bootcamp ini.",m.hasActive&&" Kode referral Anda akan tetap tersimpan."]}),e.jsxs("div",{className:"flex w-full max-w-md gap-2",children:[e.jsx(c,{asChild:!0,className:"flex-1",children:e.jsx("a",{href:a,children:"Login"})}),e.jsx(c,{asChild:!0,variant:"outline",className:"flex-1",children:e.jsx(q,{href:route("register",m.code?{ref:m.code}:{}),children:"Daftar"})})]})]})})]})}return B?e.jsxs(C,{children:[e.jsx(T,{title:"Daftar Bootcamp"}),e.jsx("section",{className:"to-primary w-full bg-gradient-to-tl from-black px-4",children:e.jsxs("div",{className:"mx-auto my-12 w-full max-w-7xl px-4",children:[e.jsxs("h2",{className:"mx-auto mb-4 max-w-3xl bg-gradient-to-r from-[#71D0F7] via-white to-[#E6834A] bg-clip-text text-center text-3xl font-bold text-transparent italic sm:text-4xl",children:['Daftar Bootcamp "',r.title,'"']}),e.jsx("p",{className:"text-center text-gray-400",children:n?"Silahkan lengkapi persyaratan berikut untuk mendaftar bootcamp.":"Silakan selesaikan pembayaran untuk mendaftar bootcamp."})]})}),e.jsx("section",{className:"mx-auto my-4 w-full max-w-7xl px-4",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-3 lg:gap-6",children:[e.jsxs(ne,{defaultValue:"detail",className:"lg:col-span-2",children:[e.jsxs(ie,{children:[e.jsx(M,{value:"detail",children:"Detail Bootcamp"}),e.jsx(M,{value:"curriculum",children:"Kurikulum Bootcamp"})]}),e.jsx(z,{value:"detail",children:e.jsxs("div",{className:"h-full rounded-lg border p-4",children:[e.jsx("h2",{className:"text-3xl font-bold italic",children:"Yang akan kamu dapatkan"}),e.jsx("p",{className:"mt-2 mb-4 text-sm text-gray-600",children:"Manfaat yang akan kamu peroleh setelah mengikuti bootcamp ini."}),e.jsx("ul",{className:"space-y-2",children:Q.map((t,a)=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(P,{size:18,className:"mt-1 min-w-6 text-green-600"}),e.jsx("p",{className:"text-sm md:text-base",children:t})]},a))}),e.jsx("h2",{className:"mt-6 text-3xl font-bold italic",children:"Persyaratan Peserta"}),e.jsx("p",{className:"mt-2 mb-4 text-sm text-gray-600",children:"Pastikan kamu memenuhi persyaratan berikut sebelum mendaftar bootcamp ini."}),e.jsx("ul",{className:"space-y-2",children:Y.map((t,a)=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(P,{size:18,className:"mt-1 min-w-6 text-green-600"}),e.jsx("p",{className:"text-sm md:text-base",children:t})]},a))})]})}),e.jsx(z,{value:"curriculum",children:e.jsxs("div",{className:"h-full rounded-lg border p-4",children:[e.jsx("h2",{className:"text-3xl font-bold italic",children:"Kurikulum"}),e.jsx("p",{className:"mt-2 mb-4 text-sm text-gray-600",children:"Berikut adalah daftar materi yang akan dipelajari selama bootcamp ini."}),e.jsx("ul",{className:"space-y-2",children:W.map((t,a)=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsxs("p",{className:"font-semibold",children:[a+1,"."]}),e.jsx("p",{className:"text-sm md:text-base",children:t})]},a))})]})})]}),f?e.jsxs("div",{className:"flex h-full flex-col items-center justify-center space-y-4 rounded-lg border p-6 text-center",children:[e.jsx(P,{size:64,className:"text-green-500"}),e.jsx("h2",{className:"text-xl font-bold",children:"Anda Sudah Memiliki Akses"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Anda sudah terdaftar di bootcamp ini. Silakan masuk ke dalam grup."}),e.jsx(c,{asChild:!0,className:"w-full",children:e.jsx("a",{href:r.group_url??"",target:"_blank",rel:"noopener noreferrer",children:"Masuk Group Bootcamp"})})]}):g?e.jsxs("div",{className:"flex h-full flex-col items-center justify-center space-y-4 rounded-lg border p-6 text-center",children:[e.jsx(oe,{size:64,className:"text-yellow-500"}),e.jsx("h2",{className:"text-xl font-bold",children:"Pembayaran Tertunda"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Anda memiliki pembayaran yang belum selesai untuk bootcamp ini. Silakan lanjutkan untuk membayar."}),e.jsx(c,{asChild:!0,className:"w-full",children:e.jsx("a",{href:g,children:"Lanjutkan Pembayaran"})})]}):V?e.jsxs("form",{onSubmit:te,children:[e.jsx("h2",{className:"my-2 text-xl font-bold italic",children:"Upload Bukti Follow & Tag"}),e.jsxs("div",{className:"space-y-4 rounded-lg border p-4",children:[e.jsxs("div",{children:[e.jsx(h,{children:"Bukti Follow Instagram"}),e.jsx(N,{type:"file",accept:"image/*",onChange:t=>_(a=>{var l;return{...a,ig_follow_proof:((l=t.target.files)==null?void 0:l[0])||null}}),required:!0}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Screenshot halaman profil Instagram kami yang menunjukkan Anda sudah follow"})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Bukti Follow TikTok"}),e.jsx(N,{type:"file",accept:"image/*",onChange:t=>_(a=>{var l;return{...a,tiktok_follow_proof:((l=t.target.files)==null?void 0:l[0])||null}}),required:!0}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Screenshot halaman profil TikTok kami yang menunjukkan Anda sudah follow"})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Bukti Tag 3 Teman di Instagram"}),e.jsx(N,{type:"file",accept:"image/*",onChange:t=>_(a=>{var l;return{...a,tag_friend_proof:((l=t.target.files)==null?void 0:l[0])||null}}),required:!0}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Screenshot postingan Instagram kami yang menunjukkan Anda sudah tag 3 teman di komentar"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{type:"button",variant:"outline",onClick:()=>E(!1),className:"flex-1",children:"Kembali"}),e.jsx(c,{type:"submit",disabled:j,className:"flex-1",children:j?"Memproses...":"Dapatkan Akses Gratis"})]})]})]}):e.jsxs("form",{onSubmit:se,children:[e.jsxs("h2",{className:"my-2 text-xl font-bold italic",children:["Detail ",n?"Pendaftaran":"Pembayaran"]}),e.jsxs("div",{className:"space-y-4 rounded-lg border p-4",children:[n?e.jsxs("div",{className:"space-y-2 text-center",children:[e.jsx("div",{className:"flex items-center justify-between p-4",children:e.jsx("span",{className:"w-full text-2xl font-bold text-green-600",children:"BOOTCAMP GRATIS"})}),e.jsx("p",{className:"text-sm text-gray-600",children:"Untuk mendapatkan akses gratis, Anda perlu:"}),e.jsxs("ul",{className:"space-y-1 text-left text-sm",children:[e.jsxs("li",{children:["• Follow Instagram kami"," ",e.jsx("a",{href:"https://www.instagram.com/aksarateknologi/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline",children:"@aksarateknologi"})," ",e.jsx("a",{href:"https://www.instagram.com/aksademy/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline",children:"@aksademy"})]}),e.jsxs("li",{children:["• Follow TikTok kami"," ",e.jsx("a",{href:"https://www.tiktok.com/@aksarateknologimandiri",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline",children:"@aksarateknologi"})]}),e.jsx("li",{children:"• Tag 3 teman di postingan Instagram kami"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Upload bukti follow dan tag untuk mendapatkan akses"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"promo-code",children:"Kode Promo (Opsional)"}),e.jsxs("div",{className:"relative",children:[e.jsx(N,{id:"promo-code",type:"text",placeholder:"Masukkan kode promo",value:d,onChange:t=>$(t.target.value.toUpperCase()),className:"pr-10"}),D&&e.jsx("div",{className:"absolute top-1/2 right-3 -translate-y-1/2 transform",children:e.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-b-2 border-blue-600"})}),!D&&d&&e.jsx("div",{className:"absolute top-1/2 right-3 -translate-y-1/2 transform",children:s!=null&&s.valid?e.jsx(X,{className:"h-4 w-4 text-green-600"}):w?e.jsx(ce,{className:"h-4 w-4 text-red-600"}):null})]}),w&&e.jsx("p",{className:"text-sm text-red-600",children:w}),(s==null?void 0:s.valid)&&e.jsxs("div",{className:"rounded-lg border border-green-200 bg-green-50 p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{className:"h-4 w-4 text-green-600"}),e.jsxs("p",{className:"text-sm font-medium text-green-800",children:['Kode promo "',s.discount_code.code,'" berhasil diterapkan!']})]}),e.jsxs("p",{className:"mt-1 text-xs text-green-600",children:[s.discount_code.name," - Diskon ",s.discount_code.formatted_value]})]})]}),e.jsxs("div",{className:"space-y-2 rounded-lg border p-4",children:[r.strikethrough_price>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Harga Asli"}),e.jsxs("span",{className:"font-semibold text-gray-500 line-through",children:["Rp ",r.strikethrough_price.toLocaleString("id-ID")]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Diskon"}),e.jsxs("span",{className:"font-semibold text-red-500",children:["-Rp ",(r.strikethrough_price-r.price).toLocaleString("id-ID")]})]}),e.jsx(H,{className:"my-2"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Harga Bootcamp"}),e.jsxs("span",{className:"font-semibold text-gray-500",children:["Rp ",r.price.toLocaleString("id-ID")]})]}),(s==null?void 0:s.valid)&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-gray-600",children:["Diskon Promo (",s.discount_code.code,")"]}),e.jsxs("span",{className:"font-semibold text-green-600",children:["-Rp ",s.discount_amount.toLocaleString("id-ID")]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Biaya Transaksi"}),e.jsxs("span",{className:"font-semibold text-gray-500",children:["Rp ",v.toLocaleString("id-ID")]})]}),e.jsx(H,{className:"my-2"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-semibold text-gray-900",children:"Total Pembayaran"}),e.jsxs("span",{className:"text-primary text-xl font-bold",children:["Rp ",U.toLocaleString("id-ID")]})]})]})]}),!n&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(le,{id:"terms",checked:b,onCheckedChange:t=>J(t===!0)}),e.jsxs(h,{htmlFor:"terms",children:["Saya menyetujui"," ",e.jsx("a",{href:"/terms-and-conditions",target:"_blank",rel:"noopener noreferrer",className:"text-blue-700 hover:underline",children:"syarat dan ketentuan"})]})]}),e.jsx(c,{className:"w-full",type:"submit",disabled:(n?!1:!b)||j,children:j?"Memproses...":n?"Upload Bukti Follow":"Lanjutkan Pembayaran"})]})]})]})})]}):e.jsxs(C,{children:[e.jsx(T,{title:"Daftar Bootcamp"}),e.jsx("section",{className:"to-primary w-full bg-gradient-to-tl from-black px-4",children:e.jsxs("div",{className:"mx-auto my-12 w-full max-w-7xl px-4",children:[e.jsxs("h2",{className:"mx-auto mb-4 max-w-3xl bg-gradient-to-r from-[#71D0F7] via-white to-[#E6834A] bg-clip-text text-center text-3xl font-bold text-transparent italic sm:text-4xl",children:['Daftar Bootcamp "',r.title,'"']}),e.jsx("p",{className:"text-center text-gray-400",children:"Silakan lengkapi profil Anda terlebih dahulu."})]})}),e.jsx("section",{className:"mx-auto my-4 w-full max-w-7xl px-4",children:e.jsxs("div",{className:"flex h-full flex-col items-center justify-center space-y-4 rounded-lg border p-6 text-center",children:[e.jsx(G,{size:64,className:"text-orange-500"}),e.jsx("h2",{className:"text-xl font-bold",children:"Profil Belum Lengkap"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Profil Anda belum lengkap! Harap lengkapi nomor telepon terlebih dahulu untuk mendaftar bootcamp."}),e.jsx(c,{asChild:!0,className:"w-full max-w-md",children:e.jsx(q,{href:route("profile.edit",{redirect:window.location.href}),children:"Lengkapi Profil"})})]})})]})}export{We as default};
