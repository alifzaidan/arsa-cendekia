import{r as d,m as B,j as e}from"./app-DJanRBGl.js";import{I as h}from"./input-error-DPRj4YbU.js";import{B as m}from"./button-Bifx8rgB.js";import{b as E,c as F,d as P,e as q,f as R}from"./dialog-DaLJLFR-.js";import{I as V}from"./input-C5a_LEF8.js";import{L as l}from"./label-D8bc7pG-.js";import{R as y,a as j}from"./radio-group-D0_ox5pY.js";import{S as k,a as G,b as $,c as z,d as C}from"./select-UDo__-Yq.js";import{T as N}from"./textarea-DIFTQ3aq.js";import{T as L}from"./trash-UkGvvz4U.js";import"./utils-DR74k2Cn.js";import"./index-BSP57wh6.js";import"./index-CaYodV7O.js";import"./index-CgMUabIG.js";import"./index-DUJzXC_7.js";import"./Combination-BCQ0aFO3.js";import"./x-BgLTBkg8.js";import"./createLucideIcon-C0a0JXVI.js";import"./circle-D2lE2dRL.js";import"./index-DmWanXx_.js";import"./index-Cmhq_reI.js";import"./floating-ui.react-dom-DPYed0W_.js";import"./index-B-7nvAfE.js";import"./index-B3-HGKk4.js";import"./index-D0jymGb1.js";import"./chevron-down-ysu_lXVV.js";import"./chevron-up-C27pEBqf.js";function je({question:i,setOpen:f,onSuccess:_}){var b;const g=d.useRef(null),[s,S]=d.useState((b=i.options)!=null&&b.length?i.options.map(t=>({id:t.id,option_text:t.option_text,is_correct:t.is_correct})):[{option_text:"",is_correct:!1},{option_text:"",is_correct:!1}]),[x,T]=d.useState(i.type),{data:v,setData:p,put:w,processing:I,errors:u,clearErrors:O}=B({question_text:i.question_text,type:i.type,options:s,explanation:i.explanation||""}),n=t=>{S(t),p("options",t)},D=t=>{t.preventDefault(),w(route("questions.update",i.id),{preserveScroll:!0,onSuccess:()=>{f(!1),O(),_&&_()},onError:()=>{var a;return(a=g.current)==null?void 0:a.focus()}})};return e.jsxs(E,{children:[e.jsx(F,{children:"Edit Pertanyaan"}),e.jsx(P,{children:"Ubah pertanyaan dan opsi jawaban."}),e.jsxs("form",{className:"space-y-4",onSubmit:D,children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"question_text",children:"Pertanyaan"}),e.jsx(N,{id:"question_text",name:"question_text",ref:g,value:v.question_text,onChange:t=>p("question_text",t.target.value),placeholder:"Tulis pertanyaan...",autoComplete:"off",required:!0}),e.jsx(h,{message:u.question_text}),e.jsx(l,{htmlFor:"explanation",className:"mt-2",children:"Pembahasan (Opsional)"}),e.jsx(N,{id:"explanation",name:"explanation",value:v.explanation,onChange:t=>p("explanation",t.target.value),placeholder:"Tulis pembahasan jawaban yang benar...",rows:3,autoComplete:"off"}),e.jsx(h,{message:u.explanation}),e.jsx(l,{htmlFor:"type",className:"mt-2",children:"Tipe Pertanyaan"}),e.jsxs(k,{value:x,onValueChange:t=>{var r,o;const a=t;T(a),p("type",a),n(a==="true_false"?[{option_text:"Benar",is_correct:((r=s[0])==null?void 0:r.is_correct)??!1},{option_text:"Salah",is_correct:((o=s[1])==null?void 0:o.is_correct)??!1}]:s.length>=2?s:[{option_text:"",is_correct:!1},{option_text:"",is_correct:!1}])},children:[e.jsx(G,{className:"w-full",children:e.jsx($,{placeholder:"Pilih tipe pertanyaan"})}),e.jsxs(z,{children:[e.jsx(C,{value:"multiple_choice",children:"Pilihan Ganda"}),e.jsx(C,{value:"true_false",children:"Benar/Salah"})]})]})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Opsi Jawaban"}),e.jsxs("div",{className:"mt-2 space-y-2",children:[x==="true_false"?e.jsxs(y,{value:s.findIndex(t=>t.is_correct).toString(),onValueChange:t=>{const a=Number(t),r=s.map((o,c)=>({...o,is_correct:c===a}));n(r)},children:[e.jsxs("div",{className:"mb-1 flex items-center space-x-2",children:[e.jsx(j,{value:"0",id:"option-0"}),e.jsx(l,{htmlFor:"option-0",children:"Benar"})]}),e.jsxs("div",{className:"mb-1 flex items-center space-x-2",children:[e.jsx(j,{value:"1",id:"option-1"}),e.jsx(l,{htmlFor:"option-1",children:"Salah"})]})]}):e.jsx(y,{value:s.findIndex(t=>t.is_correct).toString(),onValueChange:t=>{const a=Number(t),r=s.map((o,c)=>({...o,is_correct:c===a}));n(r)},children:s.map((t,a)=>e.jsxs("div",{className:"mb-1 flex items-center space-x-2",children:[e.jsx(V,{type:"text",value:t.option_text,onChange:r=>{const o=[...s];o[a].option_text=r.target.value,n(o)},placeholder:`Opsi ${String.fromCharCode(65+a)}`,required:!0,className:t.is_correct?"border-green-500 ring-2 ring-green-500":""}),e.jsx(j,{value:a.toString(),id:`option-${a}`}),e.jsx(l,{htmlFor:`option-${a}`,className:"hover:cursor-pointer",children:"Benar"}),s.length>2&&e.jsx(m,{type:"button",variant:"destructive",size:"sm",onClick:()=>{const r=s.filter((o,c)=>c!==a);n(r)},className:"hover:cursor-pointer",children:e.jsx(L,{})})]},t.id??a))}),x==="multiple_choice"&&e.jsx(m,{type:"button",size:"sm",className:"hover:cursor-pointer",onClick:()=>n([...s,{option_text:"",is_correct:!1}]),children:"+ Tambah Opsi"})]}),e.jsx(h,{message:u.options})]}),e.jsxs(q,{className:"gap-2",children:[e.jsx(R,{asChild:!0,children:e.jsx(m,{variant:"secondary",onClick:()=>f(!1),className:"hover:cursor-pointer",children:"Batal"})}),e.jsx(m,{disabled:I,asChild:!0,className:"hover:cursor-pointer",children:e.jsx("button",{type:"submit",children:"Simpan Perubahan"})})]})]})]})}export{je as default};
