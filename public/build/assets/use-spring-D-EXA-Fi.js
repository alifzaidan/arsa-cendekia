import{r as p}from"./app-DJanRBGl.js";import{b as M,f as y,d as x,e as f,g as E,u as F,h,J as I,M as J}from"./proxy-DvaMOcZG.js";import{u as V}from"./use-motion-value-Cn_PATF3.js";function A(t,e){const o=V(e()),r=()=>o.set(e());return r(),M(()=>{const n=()=>y.preRender(r,!1,!0),s=t.map(a=>a.on("change",n));return()=>{s.forEach(a=>a()),x(r)}}),o}function L(t){f.current=[],t();const e=A(f.current,t);return f.current=void 0,e}function N(...t){const e=!Array.isArray(t[0]),o=e?0:-1,r=t[0+o],n=t[1+o],s=t[2+o],a=t[3+o],i=E(n,s,a);return e?i(r):i}function R(t,e,o,r){if(typeof t=="function")return L(t);const n=typeof e=="function"?e:N(e,o,r);return Array.isArray(t)?m(t,n):m([t],([s])=>n(s))}function m(t,e){const o=F(()=>[]);return A(t,()=>{o.length=0;const r=t.length;for(let n=0;n<r;n++)o[n]=t[n].get();return e(o)})}function U(t,e,o){const r=t.get();let n=null,s=r,a;const i=typeof r=="string"?r.replace(/[\d.-]/g,""):void 0,l=()=>{n&&(n.stop(),n=null)},S=()=>{l(),n=new I({keyframes:[g(t.get()),g(s)],velocity:t.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...o,onUpdate:a})};t.attach((c,b)=>(s=c,a=C=>b(d(C,i)),y.postRender(S),t.get()),l);let u;return h(e)&&(u=e.on("change",c=>t.set(d(c,i))),t.on("destroy",u)),u}function d(t,e){return e?t+e:t}function g(t){return typeof t=="number"?t:parseFloat(t)}function j(t,e={}){const{isStatic:o}=p.useContext(J),r=()=>h(t)?t.get():t;if(o)return R(r);const n=V(r());return p.useInsertionEffect(()=>U(n,t,e),[n,JSON.stringify(e)]),n}export{R as a,j as u};
