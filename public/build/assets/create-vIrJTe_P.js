import{r as x,m as O,j as e}from"./app-C0K1I_jK.js";import{I as h}from"./input-error-CN9zDaQb.js";import{B as p}from"./button-C0f-v_s_.js";import{b as D,c as B,d as F,e as P,f as k}from"./dialog-B2WTaC3E.js";import{I as E}from"./input-DDTkEvwP.js";import{L as n}from"./label-BeufQ9l8.js";import{R as v,a as d}from"./radio-group-BzbwuYTW.js";import{S as R,a as V,b as z,c as G,d as b}from"./select-BogcASc-.js";import{T as y}from"./textarea-YCmxEH3b.js";import{T as $}from"./trash-4eczIUPK.js";import"./utils-CdAyi53O.js";import"./index-ckKaZFui.js";import"./index-f6q-RnpV.js";import"./index-7sZO0JmH.js";import"./index-KzWdGhLx.js";import"./Combination-BOkQOgPX.js";import"./x-Dpjmwsro.js";import"./createLucideIcon-DWBoakhq.js";import"./circle-B3o1emxb.js";import"./index-BZY2Yx9m.js";import"./index-CsZu0GWq.js";import"./floating-ui.react-dom-BGNFrYFh.js";import"./index-CSVoZn40.js";import"./index-DjYZhB_P.js";import"./index-DmObuSOr.js";import"./chevron-down-CvGsghYA.js";import"./check-DbTA4r3O.js";import"./chevron-up-BZ7W6mO5.js";function fe({setOpen:f,quizId:C}){const j=x.useRef(null),[a,_]=x.useState([{option_text:"",is_correct:!1},{option_text:"",is_correct:!1}]),[m,N]=x.useState("multiple_choice"),{data:g,setData:c,post:S,processing:T,reset:q,errors:u,clearErrors:w}=O({question_text:"",type:"multiple_choice",explanation:"",quiz_id:C,options:a}),r=t=>{_(t),c("options",t)},I=t=>{t.preventDefault(),S(route("questions.store"),{preserveScroll:!0,onSuccess:()=>{f(!1),q(),w(),_([{option_text:"",is_correct:!1},{option_text:"",is_correct:!1}])},onError:()=>{var s;return(s=j.current)==null?void 0:s.focus()}})};return e.jsxs(D,{className:"max-h-[90vh] overflow-y-auto",children:[e.jsx(B,{children:"Tambah Pertanyaan"}),e.jsx(F,{children:"Masukkan pertanyaan dan opsi jawaban."}),e.jsxs("form",{className:"space-y-4",onSubmit:I,children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(n,{htmlFor:"question_text",children:"Pertanyaan"}),e.jsx(y,{id:"question_text",name:"question_text",ref:j,value:g.question_text,onChange:t=>c("question_text",t.target.value),placeholder:"Tulis pertanyaan...",autoComplete:"off",required:!0}),e.jsx(h,{message:u.question_text}),e.jsx(n,{htmlFor:"explanation",className:"mt-2",children:"Pembahasan (Opsional)"}),e.jsx(y,{id:"explanation",name:"explanation",value:g.explanation,onChange:t=>c("explanation",t.target.value),placeholder:"Tulis pembahasan jawaban yang benar...",rows:3,autoComplete:"off"}),e.jsx(h,{message:u.explanation}),e.jsx(n,{htmlFor:"type",className:"mt-2",children:"Tipe Pertanyaan"}),e.jsxs(R,{value:m,onValueChange:t=>{const s=t;N(s),c("type",s),r(s==="true_false"?[{option_text:"Benar",is_correct:!1},{option_text:"Salah",is_correct:!1}]:[{option_text:"",is_correct:!1},{option_text:"",is_correct:!1}])},children:[e.jsx(V,{className:"w-full",children:e.jsx(z,{placeholder:"Pilih tipe pertanyaan"})}),e.jsxs(G,{children:[e.jsx(b,{value:"multiple_choice",children:"Pilihan Ganda"}),e.jsx(b,{value:"true_false",children:"Benar/Salah"})]})]})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Opsi Jawaban"}),e.jsxs("div",{className:"mt-2 space-y-2",children:[m==="true_false"?e.jsxs(v,{value:a.findIndex(t=>t.is_correct).toString(),onValueChange:t=>{const s=Number(t),o=a.map((i,l)=>({...i,is_correct:l===s}));r(o)},children:[e.jsxs("div",{className:"mb-1 flex items-center space-x-2",children:[e.jsx(d,{value:"0",id:"option-0"}),e.jsx(n,{htmlFor:"option-0",children:"Benar"})]}),e.jsxs("div",{className:"mb-1 flex items-center space-x-2",children:[e.jsx(d,{value:"1",id:"option-1"}),e.jsx(n,{htmlFor:"option-1",children:"Salah"})]})]}):e.jsx(v,{value:a.findIndex(t=>t.is_correct).toString(),onValueChange:t=>{const s=Number(t),o=a.map((i,l)=>({...i,is_correct:l===s}));r(o)},children:a.map((t,s)=>e.jsxs("div",{className:"mb-1 flex items-center space-x-2",children:[e.jsx(E,{type:"text",value:t.option_text,onChange:o=>{const i=[...a];i[s].option_text=o.target.value,r(i)},placeholder:`Opsi ${String.fromCharCode(65+s)}`,required:!0,className:t.is_correct?"border-green-500 ring-2 ring-green-500":""}),e.jsx(d,{value:s.toString(),id:`option-${s}`}),e.jsx(n,{htmlFor:`option-${s}`,className:"hover:cursor-pointer",children:"Benar"}),a.length>2&&e.jsx(p,{type:"button",variant:"destructive",size:"sm",onClick:()=>{const o=a.filter((i,l)=>l!==s);r(o)},className:"hover:cursor-pointer",children:e.jsx($,{})})]},s))}),m==="multiple_choice"&&e.jsx(p,{type:"button",size:"sm",className:"hover:cursor-pointer",onClick:()=>r([...a,{option_text:"",is_correct:!1}]),children:"+ Tambah Opsi"})]}),e.jsx(h,{message:u.options})]}),e.jsxs(P,{className:"gap-2",children:[e.jsx(k,{asChild:!0,children:e.jsx(p,{variant:"secondary",onClick:()=>f(!1),className:"hover:cursor-pointer",children:"Batal"})}),e.jsx(p,{disabled:T,asChild:!0,className:"hover:cursor-pointer",children:e.jsx("button",{type:"submit",children:"Tambah Pertanyaan"})})]})]})]})}export{fe as default};
