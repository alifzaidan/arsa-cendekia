import{r as y,j as e,L as ae,S as se}from"./app-DJanRBGl.js";import{B as f}from"./button-Bifx8rgB.js";import{C as re,a as ie}from"./calendar-CGsg3qX5.js";import{C as M,a as F,b as O,c as I,d as A,e as D}from"./command-bDhWogib.js";import{u as te,F as ne,a as t,b as n,c as o,d as l,e as v,f as c,s as oe,o as le,g as d,h as ce}from"./types-DCbuC9hX.js";import{I as j}from"./input-C5a_LEF8.js";import{P as N,a as C,b as k}from"./popover-CrkFnK1a.js";import{S as de,a as me,b as ue,c as he,d as W}from"./select-UDo__-Yq.js";import{T as xe}from"./textarea-DIFTQ3aq.js";import{A as pe}from"./admin-layout-B_Qa5VjE.js";import{c as x}from"./utils-DR74k2Cn.js";import{A as $}from"./award-CRxsxEMN.js";import{C as je}from"./calendar-fold-CsnwPz30.js";import{C as V}from"./chevrons-up-down-ZDmbQ5Jj.js";import{C as B}from"./index-B-7nvAfE.js";import{C as fe}from"./chevron-down-ysu_lXVV.js";import{f as g}from"./format-Bp4OdCl_.js";import{i as z}from"./id-Don4TG_0.js";import"./index-BSP57wh6.js";import"./index-CaYodV7O.js";import"./chevron-left-_KMMEj_d.js";import"./createLucideIcon-C0a0JXVI.js";import"./chevron-right-BXsuuH2D.js";import"./index-CgMUabIG.js";import"./index-DUJzXC_7.js";import"./Combination-BCQ0aFO3.js";import"./index-Cmhq_reI.js";import"./index-DmWanXx_.js";import"./floating-ui.react-dom-DPYed0W_.js";import"./label-D8bc7pG-.js";import"./index-B3-HGKk4.js";import"./index-D0jymGb1.js";import"./chevron-up-C27pEBqf.js";import"./sonner-C1sHfgUN.js";import"./index-BMMgGDcw.js";import"./breadcrumbs-CDwZdaIA.js";import"./x-BgLTBkg8.js";import"./tooltip-DCkcHdKe.js";import"./index-3EjGfcbu.js";import"./dropdown-menu-BB6Qm6J4.js";import"./circle-D2lE2dRL.js";import"./user-V0ewPpIP.js";import"./app-sidebar-header-BSBfksQi.js";import"./monitor-play-BqQuA5LE.js";import"./banknote-B4h5PG5L.js";import"./dollar-sign-CpDmjeLc.js";const ge=[{title:"Sertifikat",href:route("certificates.index")},{title:"Tambah Sertifikat Baru",href:route("certificates.create")}],be=le({design_id:d().nonempty("Desain sertifikat harus dipilih"),sign_id:d().nonempty("Tanda tangan harus dipilih"),certificate_number:d().nonempty("Nomor sertifikat harus diisi"),title:d().nonempty("Judul sertifikat harus diisi"),description:d().nullable(),header_top:d().nullable(),header_bottom:d().nullable(),issued_date:d().nullable(),period:d().nullable(),program_type:ce(["course","webinar"]).refine(m=>m!==void 0,{message:"Jenis program harus dipilih"}),course_id:d().nullable(),webinar_id:d().nullable()}),ye=()=>g(new Date,"yyyy-MM-dd"),ve=()=>{const m=new Date,b=ie(m,5),P=g(m,"MMMM yyyy",{locale:z}),w=g(b,"MMMM yyyy",{locale:z});return`${P} - ${w}`};function xa({designs:m,signs:b,courses:P,webinars:w,prefilledData:u={}}){const[R,L]=y.useState(!1),[U,E]=y.useState(!1),[G,J]=y.useState(!1),[Y,H]=y.useState(!1),r=te({resolver:oe(be),defaultValues:{design_id:"",sign_id:"",certificate_number:"",title:u.title||"",description:u.description||"",header_top:"CV ARSA CENDEKIA",header_bottom:"No: AHU-0071686-AH.0114 Tahun 2025",issued_date:ye(),period:ve(),program_type:u.program_type,course_id:u.course_id||"",webinar_id:u.webinar_id||""}}),h=r.watch("program_type"),q=!!u.course_id,Q=!!u.webinar_id,p=q||Q;function X(a){se.post(route("certificates.store"),a)}const _=()=>{switch(h){case"course":return P;case"webinar":return w;default:return[]}},S=()=>{switch(h){case"course":return"course_id";case"webinar":return"webinar_id";default:return""}},Z=()=>{switch(h){case"course":return"Pilih kelas online";case"webinar":return"Pilih webinar";default:return"Pilih program"}},K=()=>{const a=S(),i=r.watch(a),T=_().find(ee=>ee.id===i);return(T==null?void 0:T.title)||""};return e.jsxs(pe,{breadcrumbs:ge,children:[e.jsx(ae,{title:"Tambah Sertifikat Baru"}),e.jsxs("div",{className:"px-4 py-4 md:px-6",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Tambah Sertifikat Baru"}),e.jsx("p",{className:"text-muted-foreground mb-6 max-w-2xl text-sm",children:"Silakan isi form di bawah ini untuk membuat sertifikat baru. Pastikan semua informasi yang diperlukan telah diisi dengan benar."}),p&&e.jsxs("div",{className:"mb-6 rounded-lg bg-blue-50 p-4",children:[e.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[e.jsx($,{className:"h-4 w-4 text-blue-600"}),e.jsx("h3",{className:"text-sm font-medium text-blue-900",children:"Program Terpilih"})]}),e.jsxs("p",{className:"text-sm text-blue-700",children:["Sertifikat ini akan dibuat untuk program: ",e.jsx("strong",{children:K()})]})]}),e.jsx(ne,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(X),className:"grid grid-cols-1 items-start gap-6 lg:grid-cols-2",children:[e.jsxs("div",{className:"space-y-6 rounded-lg border p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{size:16}),e.jsx("h3",{className:"font-medium",children:"Informasi Sertifikat"})]}),e.jsx(t,{control:r.control,name:"certificate_number",render:({field:a})=>e.jsxs(n,{children:[e.jsxs(o,{children:["Nomor Sertifikat ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(l,{children:e.jsx(j,{placeholder:"Contoh: LT-TOACB1/2025",...a,autoComplete:"off"})}),e.jsx(v,{children:"Nomor unik untuk sertifikat ini"}),e.jsx(c,{})]})}),e.jsx(t,{control:r.control,name:"title",render:({field:a})=>e.jsxs(n,{children:[e.jsxs(o,{children:["Judul Sertifikat ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(l,{children:e.jsx(j,{placeholder:"Masukkan judul sertifikat",...a,autoComplete:"off"})}),e.jsx(c,{})]})}),e.jsx(t,{control:r.control,name:"description",render:({field:a})=>e.jsxs(n,{children:[e.jsx(o,{children:"Deskripsi"}),e.jsx(xe,{...a,value:a.value??"",className:"w-full rounded border p-2",placeholder:"Masukkan deskripsi sertifikat",autoComplete:"off"}),e.jsx(c,{})]})}),e.jsx(t,{control:r.control,name:"header_top",render:({field:a})=>e.jsxs(n,{children:[e.jsx(o,{children:"Header Atas"}),e.jsx(l,{children:e.jsx(j,{placeholder:"Teks untuk header bagian atas",...a,value:a.value??"",autoComplete:"off"})}),e.jsx(c,{})]})}),e.jsx(t,{control:r.control,name:"header_bottom",render:({field:a})=>e.jsxs(n,{children:[e.jsx(o,{children:"Header Bawah"}),e.jsx(l,{children:e.jsx(j,{placeholder:"Teks untuk header bagian bawah",...a,value:a.value??"",autoComplete:"off"})}),e.jsx(c,{})]})})]}),e.jsxs("div",{className:"space-y-6 rounded-lg border p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(je,{size:16}),e.jsx("h3",{className:"font-medium",children:"Detail Tambahan"})]}),e.jsx(t,{control:r.control,name:"program_type",render:({field:a})=>e.jsxs(n,{children:[e.jsxs(o,{children:["Jenis Program ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(de,{onValueChange:i=>{a.onChange(i),p||(r.setValue("course_id",""),r.setValue("webinar_id",""))},defaultValue:a.value,disabled:p,children:[e.jsx(l,{children:e.jsx(me,{children:e.jsx(ue,{placeholder:"Pilih jenis program"})})}),e.jsxs(he,{children:[e.jsx(W,{value:"course",children:"Kelas Online"}),e.jsx(W,{value:"webinar",children:"Webinar"})]})]}),p&&e.jsx(v,{className:"text-blue-600",children:"Program sudah dipilih dari halaman detail program"}),e.jsx(c,{})]})}),h&&e.jsx(t,{control:r.control,name:S(),render:({field:a})=>{var i;return e.jsxs(n,{className:"flex flex-col",children:[e.jsxs(o,{children:[h==="course"?"Kelas Online":"Webinar"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),p?e.jsx(l,{children:e.jsx(j,{value:K(),disabled:!0,className:"bg-gray-50"})}):e.jsxs(N,{open:G,onOpenChange:J,children:[e.jsx(C,{asChild:!0,children:e.jsx(l,{children:e.jsxs(f,{variant:"outline",role:"combobox",className:x("justify-between",!a.value&&"text-muted-foreground"),children:[a.value?(i=_().find(s=>s.id===a.value))==null?void 0:i.title:Z(),e.jsx("span",{className:"sr-only",children:"Pilih program"}),e.jsx(V,{className:"opacity-50"})]})})}),e.jsx(k,{className:"p-0",children:e.jsxs(M,{children:[e.jsx(F,{placeholder:`Cari ${h}...`,className:"h-9"}),e.jsxs(O,{children:[e.jsxs(I,{children:["Tidak ada ",h," ditemukan."]}),e.jsx(A,{children:_().map(s=>e.jsxs(D,{value:s.title,onSelect:()=>{r.setValue(S(),s.id),J(!1)},children:[s.title,e.jsx(B,{className:x("ml-auto",s.id===a.value?"opacity-100":"opacity-0")})]},s.id))})]})]})})]}),p&&e.jsx(v,{className:"text-blue-600",children:"Program sudah dipilih dari halaman detail"}),e.jsx(c,{})]})}}),e.jsx(t,{control:r.control,name:"design_id",render:({field:a})=>{var i;return e.jsxs(n,{className:"flex flex-col",children:[e.jsxs(o,{children:["Desain Sertifikat ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(N,{open:R,onOpenChange:L,children:[e.jsx(C,{asChild:!0,children:e.jsx(l,{children:e.jsxs(f,{variant:"outline",role:"combobox",className:x("justify-between",!a.value&&"text-muted-foreground"),children:[a.value?(i=m.find(s=>s.id===a.value))==null?void 0:i.name:"Pilih desain sertifikat",e.jsx("span",{className:"sr-only",children:"Pilih desain"}),e.jsx(V,{className:"opacity-50"})]})})}),e.jsx(k,{className:"p-0",children:e.jsxs(M,{children:[e.jsx(F,{placeholder:"Cari desain...",className:"h-9"}),e.jsxs(O,{children:[e.jsx(I,{children:"Tidak ada desain ditemukan."}),e.jsx(A,{children:m.map(s=>e.jsxs(D,{value:s.name,onSelect:()=>{r.setValue("design_id",s.id),L(!1)},children:[s.name,e.jsx(B,{className:x("ml-auto",s.id===a.value?"opacity-100":"opacity-0")})]},s.id))})]})]})})]}),e.jsx(c,{})]})}}),e.jsx(t,{control:r.control,name:"sign_id",render:({field:a})=>{var i;return e.jsxs(n,{className:"flex flex-col",children:[e.jsxs(o,{children:["Tanda Tangan ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(N,{open:U,onOpenChange:E,children:[e.jsx(C,{asChild:!0,children:e.jsx(l,{children:e.jsxs(f,{variant:"outline",role:"combobox",className:x("justify-between",!a.value&&"text-muted-foreground"),children:[a.value?(i=b.find(s=>s.id===a.value))==null?void 0:i.name:"Pilih tanda tangan",e.jsx("span",{className:"sr-only",children:"Pilih tanda tangan"}),e.jsx(V,{className:"opacity-50"})]})})}),e.jsx(k,{className:"p-0",children:e.jsxs(M,{children:[e.jsx(F,{placeholder:"Cari tanda tangan...",className:"h-9"}),e.jsxs(O,{children:[e.jsx(I,{children:"Tidak ada tanda tangan ditemukan."}),e.jsx(A,{children:b.map(s=>e.jsxs(D,{value:s.name,onSelect:()=>{r.setValue("sign_id",s.id),E(!1)},children:[s.name,e.jsx(B,{className:x("ml-auto",s.id===a.value?"opacity-100":"opacity-0")})]},s.id))})]})]})})]}),e.jsx(c,{})]})}}),e.jsx(t,{control:r.control,name:"issued_date",render:({field:a})=>e.jsxs(n,{className:"flex flex-col",children:[e.jsx(o,{children:"Tanggal Terbit"}),e.jsxs(N,{open:Y,onOpenChange:H,children:[e.jsx(C,{asChild:!0,children:e.jsx(l,{children:e.jsxs(f,{variant:"outline",className:x("justify-between font-normal",!a.value&&"text-muted-foreground"),children:[a.value?g(new Date(a.value),"dd MMMM yyyy"):"Pilih tanggal terbit",e.jsx(fe,{className:"h-4 w-4 opacity-50"})]})})}),e.jsx(k,{className:"w-auto overflow-hidden p-0",align:"start",children:e.jsx(re,{mode:"single",selected:a.value?new Date(a.value):void 0,onSelect:i=>{i?a.onChange(g(i,"yyyy-MM-dd")):a.onChange(""),H(!1)},captionLayout:"dropdown"})})]}),e.jsx(c,{})]})}),e.jsx(t,{control:r.control,name:"period",render:({field:a})=>e.jsxs(n,{children:[e.jsx(o,{children:"Periode"}),e.jsx(l,{children:e.jsx(j,{placeholder:"Contoh: Januari - Maret 2025",...a,value:a.value??"",autoComplete:"off"})}),e.jsx(v,{children:"Periode berlakunya sertifikat"}),e.jsx(c,{})]})})]}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx(f,{type:"submit",className:"hover:cursor-pointer",children:"Simpan Sertifikat"})})]})})]})]})}export{xa as default};
