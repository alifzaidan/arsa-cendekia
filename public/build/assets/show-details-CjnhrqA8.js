import{K as N,r as v,j as e}from"./app-0I1QzVTg.js";import{B as u}from"./badge-CjFQCB4e.js";import{B as j}from"./button-D2ZpcnoY.js";import{I as b}from"./input-BEoPePt1.js";import{T as L,d as w,b as n,e as i}from"./table-BAIJCxg1.js";import{r as o}from"./utils-liWpcwDK.js";import{t as d}from"./index-_fiB5kas.js";import{L as f}from"./link-JvGEf2f9.js";import{S as _}from"./star-Dgx6K6QM.js";import"./index-Bota6Y3-.js";import"./index-57D5-Vr4.js";import"./index-uHisoZSR.js";import"./createLucideIcon-CstU9H3f.js";function H({course:a,averageRating:x}){var p;const{auth:r}=N().props,t=r.role.includes("affiliate"),m=v.useMemo(()=>{const s=r.user.affiliate_code,l=(h,g)=>{try{const c=new URL(h);return c.searchParams.set("ref",g),c.toString()}catch{const c=h.includes("?")?"&":"?";return`${h}${c}ref=${g}`}};return t&&s?{registrationUrl:l(a.registration_url,s),courseUrl:l(a.course_url,s)}:{registrationUrl:a.registration_url,courseUrl:a.course_url}},[a.registration_url,a.course_url,r.user.affiliate_code,t]),k=async()=>{try{await navigator.clipboard.writeText(m.registrationUrl),t?d.success("Link pembelian dengan kode afiliasi berhasil disalin!"):d.success("Link pembelian berhasil disalin!")}catch{d.error("Gagal menyalin link pembelian")}},y=async()=>{try{await navigator.clipboard.writeText(m.courseUrl),t?d.success("Link kelas dengan kode afiliasi berhasil disalin!"):d.success("Link kelas berhasil disalin!")}catch{d.error("Gagal menyalin link kelas")}};return e.jsxs("div",{className:"space-y-6 rounded-lg border p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-medium",children:"Share Link untuk Mengakses Kelas"}),t&&e.jsx("div",{className:"rounded-full bg-green-100 px-3 py-1 text-xs font-medium text-green-800",children:"Mode Afiliasi"})]}),t&&e.jsx("div",{className:"rounded-lg border border-blue-200 bg-blue-50 p-3 dark:border-blue-800 dark:bg-blue-900/20",children:e.jsx("div",{className:"flex items-start gap-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-blue-800 dark:text-blue-200",children:"Link Afiliasi Otomatis"}),e.jsxs("p",{className:"mt-1 text-sm text-blue-700 dark:text-blue-300",children:["Link di bawah sudah menyertakan kode afiliasi Anda (",r.user.affiliate_code,"). Setiap pembelian melalui link ini akan memberikan komisi untuk Anda."]})]})})}),e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row",children:[e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700",children:["Link Pembelian ",t&&"(dengan kode afiliasi)"]}),e.jsx(b,{type:"text",value:m.registrationUrl,readOnly:!0,className:"rounded border p-2 text-sm",placeholder:"Link Pembelian"}),e.jsxs(j,{type:"button",onClick:k,className:"w-full hover:cursor-pointer",disabled:a.status==="draft"||a.status==="archived",children:[t?"Salin Link Afiliasi Pembelian":"Salin Link Pembelian"," ",e.jsx(f,{})]})]}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700",children:["Link Kelas ",t&&"(dengan kode afiliasi)"]}),e.jsx(b,{type:"text",value:m.courseUrl,readOnly:!0,className:"rounded border p-2 text-sm",placeholder:"Link Kelas"}),e.jsxs(j,{type:"button",onClick:y,className:"w-full hover:cursor-pointer",disabled:a.status==="draft"||a.status==="archived",children:[t?"Salin Link Afiliasi Kelas":"Salin Link Kelas"," ",e.jsx(f,{})]})]})]}),a.status==="published"?e.jsx("p",{className:"text-muted-foreground text-center text-sm",children:t?"Share link afiliasi diatas ke sosial media, whatsapp, tiktok, landing page, email ataupun channel penjualan lainnya untuk mendapatkan komisi dari setiap pembelian":"Share link diatas ke sosial media, whatsapp, tiktok, landing page, email ataupun channel penjualan lainnya agar peserta dapat mengakses kelas online ini."}):e.jsx("p",{className:"text-center text-sm text-red-500",children:"Kelas ini belum diterbitkan. Silakan terbitkan kelas terlebih dahulu untuk membagikan link akses kelas."}),t&&a.status==="published"&&e.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-3 dark:border-gray-700 dark:bg-gray-800",children:[e.jsx("h4",{className:"mb-2 text-sm font-medium",children:"Detail Komisi:"}),e.jsxs("div",{className:"space-y-2 text-xs text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Harga Kelas:"})," ",o.format(a.price)]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Rate Komisi:"})," ",r.user.commission,"%"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Komisi per Penjualan:"})," ",o.format(a.price*(r.user.commission/100))]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Kode Afiliasi:"})," ",r.user.affiliate_code]})]})]}),e.jsx(L,{children:e.jsxs(w,{children:[e.jsxs(n,{children:[e.jsx(i,{children:"Rating"}),e.jsx(i,{children:x?e.jsxs("div",{className:"flex gap-4",children:[e.jsx("span",{className:"text-lg font-semibold",children:x.toFixed(1)}),e.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(s=>e.jsx(_,{size:16,className:`${s<=Math.round(x)?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},s))})]}):e.jsx("span",{className:"text-gray-500",children:"Belum ada rating"})})]}),e.jsxs(n,{children:[e.jsx(i,{children:"Status"}),e.jsx(i,{children:(()=>{const s=a.status;let l="bg-gray-200 text-gray-800";return s==="draft"&&(l="bg-gray-200 text-gray-800"),s==="published"&&(l="bg-blue-100 text-blue-800"),s==="archived"&&(l="bg-zinc-300 text-zinc-700"),e.jsx(u,{className:`capitalize ${l} border-0`,children:s})})()})]}),e.jsxs(n,{children:[e.jsx(i,{children:"Tingkat Kesulitan"}),e.jsx(i,{children:(()=>{const s=a.level;let l="bg-gray-200 text-gray-800";return s==="beginner"&&(l="bg-green-100 text-green-800"),s==="intermediate"&&(l="bg-yellow-100 text-yellow-800"),s==="advanced"&&(l="bg-red-100 text-red-800"),e.jsx(u,{className:`capitalize ${l} border-0`,children:s})})()})]}),e.jsxs(n,{children:[e.jsx(i,{children:"Kategori"}),e.jsx(i,{children:(p=a.category)==null?void 0:p.name})]}),e.jsxs(n,{children:[e.jsx(i,{children:"Nama Kelas"}),e.jsx(i,{children:a.title})]}),e.jsxs(n,{children:[e.jsx(i,{children:"Harga"}),e.jsx(i,{children:a.price===0?e.jsx("span",{children:"Gratis"}):e.jsxs("span",{children:[a.strikethrough_price>0&&e.jsxs("span",{className:"text-xs text-gray-500 line-through",children:[o.format(a.strikethrough_price)," "]}),e.jsx("span",{className:"text-base font-semibold",children:o.format(a.price)})]})})]}),e.jsxs(n,{children:[e.jsx(i,{children:"Deskripsi Singkat"}),e.jsx(i,{children:e.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:a.short_description??"-"}})})]}),e.jsxs(n,{children:[e.jsx(i,{children:"Deskripsi Lengkap"}),e.jsx(i,{children:e.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:a.description??"-"}})})]}),e.jsxs(n,{children:[e.jsx(i,{children:"Poin Utama"}),e.jsx(i,{children:e.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:a.key_points??"-"}})})]})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"font-semibold",children:"Tools yang Digunakan:"}),a.tools&&a.tools.length>0?e.jsx("div",{className:"grid grid-cols-3 gap-4 md:grid-cols-4 lg:grid-cols-5",children:a.tools.map(s=>e.jsxs("div",{children:[e.jsx("img",{src:s.icon?`/storage/${s.icon}`:"/assets/images/placeholder.png",alt:"Tool Icon",className:"mx-auto my-1 mt-2 h-24 rounded border object-cover"}),e.jsx("h4",{className:"text-center text-sm font-medium",children:s.name})]},s.name))}):e.jsx("span",{className:"text-muted-foreground text-sm",children:"Belum ada tools yang ditentukan."})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Thumbnail:"}),e.jsx("img",{src:a.thumbnail?`/storage/${a.thumbnail}`:"/assets/images/placeholder.png",alt:a.title,className:"my-1 mt-2 aspect-video h-40 rounded border object-cover"}),a.thumbnail?null:e.jsx("span",{className:"text-muted-foreground text-sm",children:"Thumbnail belum diunggah."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"mb-2 font-semibold",children:"Sneak Peek Kelas:"}),a.images&&a.images.length>0?e.jsx("div",{className:"flex flex-wrap gap-2",children:a.images.map((s,l)=>e.jsx("img",{src:`/storage/${s.image_url}`,alt:`Sneak Peek ${l+1}`,className:"aspect-video h-24 rounded border object-cover"},l))}):e.jsx("span",{className:"text-muted-foreground text-sm",children:"Belum ada gambar sneak peek yang ditentukan."})]})]})}export{H as default};
