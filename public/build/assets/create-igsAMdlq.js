import{r as o,m as F,j as e}from"./app-CoagF3OV.js";import{I as l}from"./input-error-D1VF60E_.js";import{B as x}from"./button-DiwSB_ws.js";import{b as w,c as R,d as B,e as L,f as P}from"./dialog-B6AyxOKJ.js";import{I as u}from"./input-BMF2iBSR.js";import{L as n}from"./label-Dp7V1G_b.js";import{T as U}from"./textarea-HtiC7Uui.js";import{t as j}from"./index-vitnN30e.js";import"./utils-C9PFdcQI.js";import"./index-BXEQ4bzJ.js";import"./index-CvEpHCJr.js";import"./index-DS7d39Bl.js";import"./index-CokJC4k2.js";import"./Combination-BqWVWUy8.js";import"./x--5bXEWR7.js";import"./createLucideIcon-CbJIzLBb.js";function O({setOpen:p}){const d=o.useRef(null),b=o.useRef(null),v=o.useRef(null),[y,g]=o.useState(null),[N,i]=o.useState(!1),{data:m,setData:r,submit:T,processing:C,reset:D,errors:t,clearErrors:I}=F({name:"",slug:"",description:null,icon:null}),k=a=>a.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),S=a=>{a.preventDefault(),T("post",route("tools.store"),{preserveScroll:!0,onSuccess:()=>{p(!1),D(),I()},onError:()=>{var s;return(s=d.current)==null?void 0:s.focus()}})};return e.jsxs(w,{children:[e.jsx(R,{children:"Tambah Tool Baru"}),e.jsx(B,{children:"Silakan masukkan nama tool baru yang ingin Anda tambahkan."}),e.jsxs("form",{className:"space-y-6",onSubmit:S,children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(n,{htmlFor:"name",className:"sr-only",children:"Nama Tool"}),e.jsx(u,{id:"name",type:"text",name:"name",ref:d,value:m.name,onChange:a=>{r("name",a.target.value),r("slug",k(a.target.value))},placeholder:"Nama Tool",autoComplete:"off"}),e.jsx(l,{message:t.name}),e.jsx(n,{htmlFor:"slug",className:"sr-only",children:"Slug"}),e.jsx(u,{id:"slug",type:"text",name:"slug",value:m.slug,onChange:a=>r("slug",a.target.value),placeholder:"Slug",autoComplete:"off",disabled:!0}),e.jsx(l,{message:t.slug}),e.jsx(n,{htmlFor:"description",className:"sr-only",children:"Deskripsi"}),e.jsx(U,{id:"description",name:"description",ref:b,value:m.description??"",onChange:a=>r("description",a.target.value),placeholder:"Deskripsi (opsional)",className:"resize-none"}),e.jsx(l,{message:t.description}),e.jsx(n,{htmlFor:"icon",className:"sr-only",children:"Unggah Icon"}),e.jsx("img",{src:y||"/assets/images/placeholder.png",alt:"Preview Icon",className:"my-1 mt-2 h-24 w-24 rounded border object-cover"}),e.jsx(u,{id:"icon",type:"file",name:"icon",ref:v,accept:"image/png, image/jpeg, image/jpg",className:N?"border-red-500 focus-visible:ring-red-500":"",onChange:a=>{var f;const s=((f=a.target.files)==null?void 0:f[0])??null;if(s){if(!["image/png","image/jpeg","image/jpg"].includes(s.type)){i(!0),r("icon",null),j("Gambar harus png, jpg, atau jpeg");return}if(s.size>2*1024*1024){i(!0),r("icon",null),j("Ukuran file maksimal 2MB!");return}}if(i(!1),r("icon",s),s){const c=new FileReader;c.onload=E=>{var h;return g((h=E.target)==null?void 0:h.result)},c.readAsDataURL(s)}else g(null)}}),e.jsx(l,{message:t.icon}),e.jsx("p",{className:"text-muted-foreground ms-1 text-xs",children:"Upload Icon. Format: PNG atau JPG Max 2 Mb"})]}),e.jsxs(L,{className:"gap-2",children:[e.jsx(P,{asChild:!0,children:e.jsx(x,{variant:"secondary",onClick:()=>p(!1),className:"hover:cursor-pointer",children:"Batal"})}),e.jsx(x,{disabled:C,asChild:!0,className:"hover:cursor-pointer",children:e.jsx("button",{type:"submit",children:"Tambah Tool"})})]})]})]})}export{O as default};
