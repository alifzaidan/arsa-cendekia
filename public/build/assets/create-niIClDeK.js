import{r as n,m as S,j as e}from"./app-BfgZ1jJD.js";import{I as h}from"./input-error--WoyB8xM.js";import{B as D}from"./button-BJ2tfxUg.js";import{b as T,c as M,d as R,e as B,f as J}from"./dialog-CblXDkko.js";import{I as j}from"./input-DAiJIf4x.js";import{L as x}from"./label-wqJbabk0.js";import{t as o}from"./index-CUDXU6sL.js";import"./utils-C1iKCs30.js";import"./index-Cmel2OYl.js";import"./index-yQBepqoG.js";import"./index-DtSPkv89.js";import"./index-tEHxzkPb.js";import"./Combination-Dyc663Sd.js";import"./x-CquPhaxv.js";import"./createLucideIcon-DE9Tn2K0.js";function ee({setOpen:b}){const v=n.useRef(null),y=n.useRef(null),k=n.useRef(null),[N,g]=n.useState(null),[E,u]=n.useState(null),[w,c]=n.useState(!1),[C,p]=n.useState(!1),{data:l,setData:s,post:G,processing:_,reset:P,errors:d,clearErrors:F}=S({name:"",image_1:null,image_2:null}),I=i=>{i.preventDefault();const a=new FormData;a.append("name",l.name),l.image_1&&a.append("image_1",l.image_1),l.image_2&&a.append("image_2",l.image_2),G(route("certificate-designs.store"),{preserveScroll:!0,onSuccess:()=>{b(!1),P(),F(),g(null),u(null)},onError:()=>{var r;return(r=v.current)==null?void 0:r.focus()}})};return e.jsxs(T,{className:"max-w-md",children:[e.jsx(M,{children:"Tambah Desain Sertifikat"}),e.jsx(R,{children:"Silakan masukkan data desain sertifikat baru yang ingin Anda tambahkan."}),e.jsxs("form",{className:"space-y-4",onSubmit:I,children:[e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"name",children:"Nama Desain"}),e.jsx(j,{id:"name",type:"text",name:"name",ref:v,value:l.name,onChange:i=>s("name",i.target.value),placeholder:"Masukkan nama desain",autoComplete:"off",required:!0}),e.jsx(h,{message:d.name})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"image_1",children:"Gambar 1"}),e.jsx("img",{src:N||"/assets/images/placeholder.png",alt:"Preview Icon",className:"my-1 mt-2 h-24 rounded border object-cover"}),e.jsx(j,{id:"image_1",type:"file",name:"image_1",ref:y,accept:"image/png, image/jpeg, image/jpg",className:w?"border-red-500 focus-visible:ring-red-500":"",onChange:i=>{var r;const a=((r=i.target.files)==null?void 0:r[0])??null;if(a){if(!["image/png","image/jpeg","image/jpg"].includes(a.type)){c(!0),s("image_1",null),o("Gambar harus png, jpg, atau jpeg");return}if(a.size>2*1024*1024){c(!0),s("image_1",null),o("Ukuran file maksimal 2MB!");return}}if(c(!1),s("image_1",a),a){const t=new FileReader;t.onload=f=>{var m;return g((m=f.target)==null?void 0:m.result)},t.readAsDataURL(a)}else g(null)}}),e.jsx("p",{className:"text-muted-foreground mt-1 text-xs",children:"Format: JPEG, PNG, JPG. Maksimal 2MB."}),e.jsx(h,{message:d.image_1})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"image_2",children:"Gambar 2 (Opsional)"}),e.jsx("img",{src:E||"/assets/images/placeholder.png",alt:"Preview Icon",className:"my-1 mt-2 h-24 rounded border object-cover"}),e.jsx(j,{id:"image_2",type:"file",name:"image_2",ref:k,accept:"image/png, image/jpeg, image/jpg",className:C?"border-red-500 focus-visible:ring-red-500":"",onChange:i=>{var r;const a=((r=i.target.files)==null?void 0:r[0])??null;if(a){if(!["image/png","image/jpeg","image/jpg"].includes(a.type)){p(!0),s("image_2",null),o("Gambar harus png, jpg, atau jpeg");return}if(a.size>2*1024*1024){p(!0),s("image_2",null),o("Ukuran file maksimal 2MB!");return}}if(p(!1),s("image_2",a),a){const t=new FileReader;t.onload=f=>{var m;return u((m=f.target)==null?void 0:m.result)},t.readAsDataURL(a)}else u(null)}}),e.jsx("p",{className:"text-muted-foreground mt-1 text-xs",children:"Format: JPEG, PNG, JPG. Maksimal 2MB."}),e.jsx(h,{message:d.image_2})]})]}),e.jsxs(B,{className:"gap-2",children:[e.jsx(J,{asChild:!0,children:e.jsx(D,{variant:"secondary",onClick:()=>b(!1),className:"hover:cursor-pointer",children:"Batal"})}),e.jsx(D,{disabled:_,asChild:!0,className:"hover:cursor-pointer",children:e.jsx("button",{type:"submit",children:_?"Menyimpan...":"Tambah Desain"})})]})]})]})}export{ee as default};
