import{r as i,j as c,R as A}from"./app-BqUceOHM.js";import{c as M}from"./utils-mqEhXaFl.js";import{M as R,i as T,u as I,P as W,a as B,b as D,L as H,l as K,m as U}from"./proxy-BB2iLvUp.js";class _ extends i.Component{getSnapshotBeforeUpdate(r){const e=this.props.childRef.current;if(e&&r.isPresent&&!this.props.isPresent){const s=e.offsetParent,o=T(s)&&s.offsetWidth||0,n=this.props.sizeRef.current;n.height=e.offsetHeight||0,n.width=e.offsetWidth||0,n.top=e.offsetTop,n.left=e.offsetLeft,n.right=o-n.width-n.left}return null}componentDidUpdate(){}render(){return this.props.children}}function F({children:t,isPresent:r,anchorX:e}){const s=i.useId(),o=i.useRef(null),n=i.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:d}=i.useContext(R);return i.useInsertionEffect(()=>{const{width:p,height:a,top:x,left:l,right:h}=n.current;if(r||!o.current||!p||!a)return;const m=e==="left"?`left: ${l}`:`right: ${h}`;o.current.dataset.motionPopId=s;const f=document.createElement("style");return d&&(f.nonce=d),document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${p}px !important;
            height: ${a}px !important;
            ${m}px !important;
            top: ${x}px !important;
          }
        `),()=>{document.head.contains(f)&&document.head.removeChild(f)}},[r]),c.jsx(_,{isPresent:r,childRef:o,sizeRef:n,children:i.cloneElement(t,{ref:o})})}const G=({children:t,initial:r,isPresent:e,onExitComplete:s,custom:o,presenceAffectsLayout:n,mode:d,anchorX:p})=>{const a=I(J),x=i.useId();let l=!0,h=i.useMemo(()=>(l=!1,{id:x,initial:r,isPresent:e,custom:o,onExitComplete:m=>{a.set(m,!0);for(const f of a.values())if(!f)return;s&&s()},register:m=>(a.set(m,!1),()=>a.delete(m))}),[e,a,s]);return n&&l&&(h={...h}),i.useMemo(()=>{a.forEach((m,f)=>a.set(f,!1))},[e]),i.useEffect(()=>{!e&&!a.size&&s&&s()},[e]),d==="popLayout"&&(t=c.jsx(F,{isPresent:e,anchorX:p,children:t})),c.jsx(W.Provider,{value:h,children:t})};function J(){return new Map}const y=t=>t.key||"";function $(t){const r=[];return i.Children.forEach(t,e=>{i.isValidElement(e)&&r.push(e)}),r}const O=({children:t,custom:r,initial:e=!0,onExitComplete:s,presenceAffectsLayout:o=!0,mode:n="sync",propagate:d=!1,anchorX:p="left"})=>{const[a,x]=B(d),l=i.useMemo(()=>$(t),[t]),h=d&&!a?[]:l.map(y),m=i.useRef(!0),f=i.useRef(l),v=I(()=>new Map),[k,z]=i.useState(l),[g,S]=i.useState(l);D(()=>{m.current=!1,f.current=l;for(let C=0;C<g.length;C++){const u=y(g[C]);h.includes(u)?v.delete(u):v.get(u)!==!0&&v.set(u,!1)}},[g,h.length,h.join("-")]);const j=[];if(l!==k){let C=[...l];for(let u=0;u<g.length;u++){const E=g[u],w=y(E);h.includes(w)||(C.splice(u,0,E),j.push(E))}return n==="wait"&&j.length&&(C=j),S($(C)),z(l),null}const{forceRender:P}=i.useContext(H);return c.jsx(c.Fragment,{children:g.map(C=>{const u=y(C),E=d&&!a?!1:l===g||h.includes(u),w=()=>{if(v.has(u))v.set(u,!0);else return;let b=!0;v.forEach(N=>{N||(b=!1)}),b&&(P==null||P(),S(f.current),d&&(x==null||x()),s&&s())};return c.jsx(G,{isPresent:E,initial:!m.current||e?void 0:!1,custom:r,presenceAffectsLayout:o,mode:n,onExitComplete:E?void 0:w,anchorX:p,children:C},u)})})};function X({children:t,isValidProp:r,...e}){r&&K(r),e={...i.useContext(R),...e},e.isStatic=I(()=>e.isStatic);const s=i.useMemo(()=>e,[JSON.stringify(e.transition),e.transformPagePoint,e.reducedMotion]);return c.jsx(R.Provider,{value:s,children:t})}const L=i.createContext(void 0);function V(){const t=i.useContext(L);if(!t)throw new Error("useAccordion must be used within an AccordionProvider");return t}function q({children:t,variants:r,expandedValue:e,onValueChange:s}){const[o,n]=i.useState(null),d=e!==void 0?e:o,p=a=>{const x=d===a?null:a;s?s(x):n(x)};return c.jsx(L.Provider,{value:{expandedValue:d,toggleItem:p,variants:r},children:t})}function ee({children:t,className:r,transition:e,variants:s,expandedValue:o,onValueChange:n}){return c.jsx(X,{transition:e,children:c.jsx("div",{className:M("relative",r),"aria-orientation":"vertical",children:c.jsx(q,{variants:s,expandedValue:o,onValueChange:n,children:t})})})}function te({value:t,children:r,className:e}){const{expandedValue:s}=V(),o=t===s;return c.jsx("div",{className:M("overflow-hidden",e),...o?{"data-expanded":""}:{"data-closed":""},children:A.Children.map(r,n=>A.isValidElement(n)?A.cloneElement(n,{...n.props,value:t,expanded:o}):n)})}function ne({children:t,className:r,...e}){const{toggleItem:s,expandedValue:o}=V(),n=e.value,d=n===o;return c.jsx("button",{onClick:()=>n!==void 0&&s(n),"aria-expanded":d,type:"button",className:M("group",r),...d?{"data-expanded":""}:{"data-closed":""},children:t})}function se({children:t,className:r,...e}){const{expandedValue:s,variants:o}=V(),d=e.value===s,p={expanded:{height:"auto",opacity:1},collapsed:{height:0,opacity:0}},a={expanded:{...p.expanded,...o==null?void 0:o.expanded},collapsed:{...p.collapsed,...o==null?void 0:o.collapsed}};return c.jsx(O,{initial:!1,children:d&&c.jsx(U.div,{initial:"collapsed",animate:"expanded",exit:"collapsed",variants:a,className:r,children:t})})}export{ee as A,te as a,ne as b,se as c};
