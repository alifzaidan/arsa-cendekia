import{r as v,j as e,L as Z,S as ee}from"./app-BCQAouuw.js";import{B as f}from"./button-DXP6Q-wK.js";import{b as H,C as T}from"./calendar-DDVWuwpP.js";import{C as ae}from"./checkbox-DDUUwGnu.js";import{C as te,a as re,b as ne,c as se,d as oe,e as ie}from"./command-Bz3pNv4h.js";import{u as le,F as ce,a as l,b as c,c as m,d as b,f as d,e as k,s as me,o as de,i as ue,n as C,g as x,j as pe}from"./types-CmoiMEuT.js";import{I as g}from"./input-AFx9Uce7.js";import{L as he}from"./label-BprQ5Y9K.js";import{P as S,a as w,b as y}from"./popover-C3rcLI6x.js";import{S as xe}from"./switch-DvRA0iYV.js";import{T as $}from"./textarea-Dl0r0IDz.js";import{A as ge}from"./admin-layout-CkRVDZWW.js";import{c as R,r as q,p as z}from"./utils-C5uPrUnR.js";import{E as je}from"./Editor-B_c1SOV-.js";import{t as A}from"./index-BYfPN2xp.js";import{e as ve,t as N,q as be}from"./format-Bp4OdCl_.js";import{B as fe}from"./book-marked-DZee4iSi.js";import{C as ke}from"./chevrons-up-down-DIUwaWj7.js";import{C as Ce}from"./index-DLjS3uAJ.js";import{C as Se}from"./calendar-fold-CrICutDO.js";import{C as F}from"./chevron-down-nWzHvEst.js";import"./index-CJ4J6dKF.js";import"./index-CUHDoZby.js";import"./chevron-left-Dq7OxiY8.js";import"./createLucideIcon-CpwwlDj_.js";import"./chevron-right-DVkZ2REO.js";import"./index-IYjuPMHC.js";import"./index-Bksihhv_.js";import"./index-ia4IXwrZ.js";import"./floating-ui.react-dom-CIa1FZ6R.js";import"./index-WGLdZ-ay.js";import"./index-BCCJhP44.js";import"./index-CfPVAXCn.js";import"./Combination-BcTXxegO.js";import"./sonner-DNRlwVFm.js";import"./breadcrumbs-D_BbBpYK.js";import"./x-BaSYQBEZ.js";import"./tooltip-DITUUh-o.js";import"./index-DYzEDVxC.js";import"./dropdown-menu-C-0ZxPQ9.js";import"./circle-Ce0Ea8_f.js";import"./user-DnsLu74L.js";import"./app-sidebar-header-D8SMl0V3.js";import"./monitor-play-BOGPVpyV.js";import"./banknote-9XcW39Yz.js";import"./dollar-sign-Bvh3qVC2.js";import"./index-C1tqd0NU.js";function we(i,p,u){return ve(i,+N(i)+p)}function ye(i,p,u){return we(i,p*be)}function Ne(i,p,u){const h=N(i,u==null?void 0:u.in);return h.setHours(p),h}function De(i,p,u){const h=N(i,u==null?void 0:u.in);return h.setMinutes(p),h}function _e(i,p,u){const h=N(i,u==null?void 0:u.in);return h.setSeconds(p),h}const Te=[{title:"Webinar",href:route("webinars.index")},{title:"Tambah Webinar Baru",href:route("webinars.create")}],$e=de({title:x().nonempty("Judul harus diisi"),category_id:x().nonempty("Kategori harus dipilih"),description:x().nullable(),benefits:x().nullable(),thumbnail:pe().nullable(),start_time:x(),end_time:x(),registration_deadline:x(),host_name:x().nullable(),host_description:x().nullable(),strikethrough_price:C().min(0),price:C().min(0),quota:C().min(0),group_url:x().nullable(),batch:C().min(0),tools:ue(x()).optional()}).refine(i=>i.strikethrough_price>0?i.strikethrough_price>i.price:!0,{message:"Harga coret harus lebih besar dari harga normal.",path:["strikethrough_price"]});function wa({categories:i,tools:p}){const[u,h]=v.useState(!1),[Y,M]=v.useState(!1),[G,P]=v.useState(!1),[U,I]=v.useState(!1),[L,K]=v.useState(!1),[J,E]=v.useState(null),[V,D]=v.useState(!1),O=new Date,B=H(O,7),Q=ye(B,2);let j=H(O,6);j=Ne(j,23),j=De(j,59),j=_e(j,0);const n=le({resolver:me($e),defaultValues:{title:"",category_id:"",description:"",benefits:`<ul>
                        <li>Mendapatkan materi eksklusif (Contoh)</li>
                        <li>Sertifikat peserta (Contoh)</li>
                        <li>Akses rekaman webinar (Contoh)</li>
                    </ul>`,thumbnail:"",start_time:B.toISOString(),end_time:Q.toISOString(),registration_deadline:j.toISOString(),host_name:"",host_description:"",strikethrough_price:0,price:0,quota:0,group_url:"",batch:1,tools:[]}});function X(a){ee.post(route("webinars.store"),a,{forceFormData:!0})}return e.jsxs(ge,{breadcrumbs:Te,children:[e.jsx(Z,{title:"Tambah Webinar Baru"}),e.jsxs("div",{className:"px-4 py-4 md:px-6",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Tambah Webinar Baru"}),e.jsx("p",{className:"text-muted-foreground mb-6 max-w-2xl text-sm",children:'Silakan isi form di bawah ini untuk membuat webinar baru. Setelah selesai, klik tombol "Simpan Draft" untuk menyimpan webinar sebagai draft.'}),e.jsx(ce,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(X),className:"grid grid-cols-1 items-start gap-6 lg:grid-cols-2",children:[e.jsxs("div",{className:"space-y-6 rounded-lg border p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fe,{size:16}),e.jsx("h3",{className:"font-medium",children:"Detail Informasi Webinar"})]}),e.jsx(l,{control:n.control,name:"title",render:({field:a})=>e.jsxs(c,{children:[e.jsxs(m,{children:["Judul Webinar ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(b,{children:e.jsx(g,{placeholder:"Masukkan judul webinar",...a,autoComplete:"off"})}),e.jsx(d,{})]})}),e.jsx(l,{control:n.control,name:"category_id",render:({field:a})=>{var t;return e.jsxs(c,{className:"flex flex-col",children:[e.jsxs(m,{children:["Kategori ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(S,{open:u,onOpenChange:h,children:[e.jsx(w,{asChild:!0,children:e.jsx(b,{children:e.jsxs(f,{variant:"outline",role:"combobox",className:R("justify-between",!a.value&&"text-muted-foreground"),children:[a.value?(t=i.find(r=>r.id===a.value))==null?void 0:t.name:"Pilih kategori",e.jsx("span",{className:"sr-only",children:"Pilih kategori"}),e.jsx(ke,{className:"opacity-50"})]})})}),e.jsx(y,{className:"p-0",children:e.jsxs(te,{children:[e.jsx(re,{placeholder:"Cari kategori...",className:"h-9"}),e.jsxs(ne,{children:[e.jsx(se,{children:"Tidak ada kategori ditemukan."}),e.jsx(oe,{children:i.map(r=>e.jsxs(ie,{value:r.name,onSelect:()=>{n.setValue("category_id",r.id),h(!1)},children:[r.name,e.jsx(Ce,{className:R("ml-auto",r.id===a.value?"opacity-100":"opacity-0")})]},r.id))})]})]})})]}),e.jsx(d,{})]})}}),e.jsx(l,{control:n.control,name:"tools",render:()=>e.jsxs(c,{children:[e.jsx(m,{children:"Tools yang Digunakan"}),e.jsx("div",{className:"text-muted-foreground mb-2 text-sm",children:"Pilih tools yang digunakan pada webinar ini."}),e.jsx("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4",children:p.map(a=>e.jsx(l,{control:n.control,name:"tools",render:({field:t})=>{var r;return e.jsxs(c,{className:"flex flex-row items-center gap-2 space-y-0",children:[e.jsx(b,{children:e.jsx(ae,{checked:(r=t.value)==null?void 0:r.includes(a.id),onCheckedChange:o=>{var s;o?t.onChange([...t.value??[],a.id]):t.onChange((s=t.value)==null?void 0:s.filter(_=>_!==a.id))}})}),e.jsx(m,{className:"text-sm font-normal",children:a.name})]})}},a.id))}),e.jsx(d,{})]})}),e.jsx(l,{control:n.control,name:"description",render:({field:a})=>e.jsxs(c,{children:[e.jsx(m,{children:"Deskripsi Lengkap"}),e.jsx($,{...a,value:a.value??"",className:"w-full rounded border p-2",placeholder:"Masukkan deskripsi lengkap",autoComplete:"off"}),e.jsx(d,{})]})}),e.jsx(l,{control:n.control,name:"thumbnail",render:({field:a})=>e.jsxs(c,{children:[e.jsx(m,{children:"Thumbnail (File Upload)"}),e.jsx("img",{src:J||"/assets/images/placeholder.png",alt:"Preview Thumbnail",className:"my-1 mt-2 h-40 w-64 rounded border object-cover"}),e.jsx(g,{type:"file",name:a.name,accept:"image/png, image/jpeg, image/jpg",className:V?"border-red-500 focus-visible:ring-red-500":"",onChange:t=>{var o;const r=((o=t.target.files)==null?void 0:o[0])??null;if(r){if(!["image/png","image/jpeg","image/jpg"].includes(r.type)){D(!0),A("Gambar harus png, jpg, atau jpeg");return}if(r.size>2*1024*1024){D(!0),A("Ukuran file maksimal 2MB!");return}}if(D(!1),a.onChange(r),r){const s=new FileReader;s.onload=_=>{var W;return E((W=_.target)==null?void 0:W.result)},s.readAsDataURL(r)}else E(null)}}),e.jsx(k,{className:"ms-1",children:"Upload Icon. Format: PNG atau JPG Max 2 Mb"}),e.jsx(d,{})]})}),e.jsxs("div",{className:"space-y-4 rounded-md border p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xe,{id:"show-strikethrough",checked:L,onCheckedChange:a=>{K(a),a||n.setValue("strikethrough_price",0)}}),e.jsx(he,{htmlFor:"show-strikethrough",children:"Aktifkan Harga Coret (Opsional)"})]}),L&&e.jsx(l,{control:n.control,name:"strikethrough_price",render:({field:a})=>e.jsxs(c,{children:[e.jsx(m,{children:"Harga Coret"}),e.jsx(g,{...a,type:"text",placeholder:"Rp 0",value:q.format(a.value||0),onChange:t=>a.onChange(z(t.target.value)),autoComplete:"off"}),e.jsx(k,{children:"Harga asli yang akan ditampilkan tercoret."}),e.jsx(d,{})]})})]}),e.jsx(l,{control:n.control,name:"price",render:({field:a})=>e.jsxs(c,{children:[e.jsxs(m,{children:["Harga ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(g,{...a,type:"text",placeholder:"Masukkan harga kursus",value:q.format(a.value||0),onChange:t=>a.onChange(z(t.target.value)),autoComplete:"off"}),e.jsx(k,{className:"ms-1",children:"Isi 0 untuk harga webinar gratis"}),e.jsx(d,{})]})}),e.jsx(l,{control:n.control,name:"batch",render:({field:a})=>e.jsxs(c,{children:[e.jsx(m,{children:"Batch"}),e.jsx(b,{children:e.jsx(g,{type:"number",...a,onChange:t=>a.onChange(parseInt(t.target.value,10)),placeholder:"Masukkan batch",autoComplete:"off"})}),e.jsx(d,{})]})}),e.jsx(l,{control:n.control,name:"quota",render:({field:a})=>e.jsxs(c,{children:[e.jsx(m,{children:"Kuota Peserta"}),e.jsx(b,{children:e.jsx(g,{type:"number",...a,onChange:t=>a.onChange(parseInt(t.target.value,10)),placeholder:"Masukkan kuota peserta",autoComplete:"off"})}),e.jsx(k,{className:"ms-1",children:"Isi 0 untuk kuota tak terbatas"}),e.jsx(d,{})]})})]}),e.jsxs("div",{className:"space-y-6 rounded-lg border p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Se,{size:16}),e.jsx("h3",{className:"font-medium",children:"Tanggal dan Informasi Pemateri"})]}),e.jsx(l,{control:n.control,name:"start_time",render:({field:a})=>e.jsxs(c,{className:"flex flex-col",children:[e.jsxs(m,{children:["Waktu Mulai ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex flex-col gap-3",children:e.jsxs(S,{open:Y,onOpenChange:M,children:[e.jsx(w,{asChild:!0,children:e.jsxs(f,{variant:"outline",id:"date",className:"w-32 justify-between font-normal",type:"button",children:[a.value?new Date(a.value).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}):"Pilih tanggal",e.jsx(F,{})]})}),e.jsx(y,{className:"w-auto overflow-hidden p-0",align:"start",children:e.jsx(T,{mode:"single",selected:a.value?new Date(a.value):void 0,captionLayout:"dropdown",onSelect:t=>{if(!t)return;const o=(a.value?new Date(a.value):new Date).toTimeString().slice(0,8)||"00:00:00",s=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`;a.onChange(`${s}T${o}`),M(!1)}})})]})}),e.jsx("div",{className:"flex flex-col gap-3",children:e.jsx(g,{type:"time",id:"time",step:"60",value:a.value?new Date(a.value).toTimeString().slice(0,5):"10:30",onChange:t=>{const r=a.value?new Date(a.value):new Date,o=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(r.getDate()).padStart(2,"0")}`,s=t.target.value||"00:00";a.onChange(`${o}T${s}:00`)},className:"bg-background appearance-none [&::-webkit-calendar-picker-indicator]:hidden [&::-webkit-calendar-picker-indicator]:appearance-none"})})]}),e.jsx(d,{})]})}),e.jsx(l,{control:n.control,name:"end_time",render:({field:a})=>e.jsxs(c,{className:"flex flex-col",children:[e.jsxs(m,{children:["Waktu Selesai ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex flex-col gap-3",children:e.jsxs(S,{open:G,onOpenChange:P,children:[e.jsx(w,{asChild:!0,children:e.jsxs(f,{variant:"outline",id:"date",className:"w-32 justify-between font-normal",type:"button",children:[a.value?new Date(a.value).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}):"Pilih tanggal",e.jsx(F,{})]})}),e.jsx(y,{className:"w-auto overflow-hidden p-0",align:"start",children:e.jsx(T,{mode:"single",selected:a.value?new Date(a.value):void 0,captionLayout:"dropdown",onSelect:t=>{const o=(a.value?new Date(a.value):new Date).toTimeString().split(" ")[0],s=t?`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`:"";a.onChange(s&&o?`${s}T${o}`:""),P(!1)}})})]})}),e.jsx("div",{className:"flex flex-col gap-3",children:e.jsx(g,{type:"time",id:"time",step:"60",value:a.value?new Date(a.value).toTimeString().slice(0,5):"10:30",onChange:t=>{const r=a.value?new Date(a.value):new Date,o=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(r.getDate()).padStart(2,"0")}`,s=t.target.value||"00:00";a.onChange(`${o}T${s}:00`)},className:"bg-background appearance-none [&::-webkit-calendar-picker-indicator]:hidden [&::-webkit-calendar-picker-indicator]:appearance-none"})})]}),e.jsx(d,{})]})}),e.jsx(l,{control:n.control,name:"registration_deadline",render:({field:a})=>e.jsxs(c,{className:"flex flex-col",children:[e.jsxs(m,{children:["Deadline Pendaftaran ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex flex-col gap-3",children:e.jsxs(S,{open:U,onOpenChange:I,children:[e.jsx(w,{asChild:!0,children:e.jsxs(f,{variant:"outline",id:"date",className:"w-32 justify-between font-normal",type:"button",children:[a.value?new Date(a.value).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}):"Pilih tanggal",e.jsx(F,{})]})}),e.jsx(y,{className:"w-auto overflow-hidden p-0",align:"start",children:e.jsx(T,{mode:"single",selected:a.value?new Date(a.value):void 0,captionLayout:"dropdown",onSelect:t=>{const o=(a.value?new Date(a.value):new Date).toTimeString().split(" ")[0],s=t?`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`:"";a.onChange(s&&o?`${s}T${o}`:""),I(!1)}})})]})}),e.jsx("div",{className:"flex flex-col gap-3",children:e.jsx(g,{type:"time",id:"time",step:"60",value:a.value?new Date(a.value).toTimeString().slice(0,5):"10:30",onChange:t=>{const r=a.value?new Date(a.value):new Date,o=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(r.getDate()).padStart(2,"0")}`,s=t.target.value||"00:00";a.onChange(`${o}T${s}:00`)},className:"bg-background appearance-none [&::-webkit-calendar-picker-indicator]:hidden [&::-webkit-calendar-picker-indicator]:appearance-none"})})]}),e.jsx(d,{})]})}),e.jsx(l,{control:n.control,name:"host_name",render:({field:a})=>e.jsxs(c,{children:[e.jsx(m,{children:"Nama Pemateri"}),e.jsx(b,{children:e.jsx(g,{placeholder:"Masukkan nama pemateri",...a,value:a.value??"",autoComplete:"off"})}),e.jsx(d,{})]})}),e.jsx(l,{control:n.control,name:"host_description",render:({field:a})=>e.jsxs(c,{children:[e.jsx(m,{children:"Deskripsi Pemateri"}),e.jsx($,{...a,value:a.value??"",className:"w-full rounded border p-2",placeholder:"Masukkan deskripsi pemateri",autoComplete:"off"}),e.jsx(d,{})]})}),e.jsx(l,{control:n.control,name:"benefits",render:({field:a})=>e.jsxs(c,{children:[e.jsx(m,{children:"Benefit Mengikuti Webinar"}),e.jsx(je,{apiKey:"ezdq40mjneld4d8pnta3pfr55y39ttbvvtyp6xrhqswrefxz",value:a.value??"",onEditorChange:t=>a.onChange(t),init:{plugins:["anchor","autolink","charmap","codesample","emoticons","image","link","lists","media","searchreplace","table","visualblocks","wordcount"],onboarding:!1,toolbar:"undo redo | blocks fontfamily fontsize | bold italic underline strikethrough | link image media table mergetags | addcomment showcomments | spellcheckdialog a11ycheck typography | align lineheight | checklist numlist bullist indent outdent | emoticons charmap | removeformat",tinycomments_mode:"embedded",tinycomments_author:"Author name",mergetags_list:[{value:"First.Name",title:"First Name"},{value:"Email",title:"Email"}],height:300}}),e.jsx(d,{})]})}),e.jsx(l,{control:n.control,name:"group_url",render:({field:a})=>e.jsxs(c,{children:[e.jsx(m,{children:"Link Group Peserta"}),e.jsx($,{...a,value:a.value??"",className:"w-full rounded border p-2",placeholder:"Masukkan link grup peserta",autoComplete:"off"}),e.jsx(d,{})]})})]}),e.jsx(f,{type:"submit",className:"hover:cursor-pointer",children:"Simpan Draft"})]})})]})]})}export{wa as default};
