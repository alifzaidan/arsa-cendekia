import{r as d,m as O,j as e}from"./app-0I1QzVTg.js";import{I as v}from"./input-error-Cgmc7RXS.js";import{B as p}from"./button-D2ZpcnoY.js";import{b as q,c as B,d as E,e as F,f as P}from"./dialog-x_8xUkrq.js";import{I as R}from"./input-BEoPePt1.js";import{L as l}from"./label-B5pGucUU.js";import{R as y,a as x}from"./radio-group-tM16WKRn.js";import{S as V,a as k,b as G,c as $,d as b}from"./select-VJ5t5ozs.js";import{T as z}from"./textarea-BFAtLBqy.js";import{T as L}from"./trash-BcpPclEH.js";import"./utils-liWpcwDK.js";import"./index-Bota6Y3-.js";import"./index-57D5-Vr4.js";import"./index-gMo3zbQG.js";import"./index-uHisoZSR.js";import"./Combination-DeKqWJgp.js";import"./x-C19WkH_u.js";import"./createLucideIcon-CstU9H3f.js";import"./circle-GcGN6Pbe.js";import"./index-D2fVTj-3.js";import"./index-BS3cphgy.js";import"./floating-ui.react-dom-BJinGOXu.js";import"./index-C2hMLgem.js";import"./index-ByifcKOL.js";import"./chevron-down-B9nJkVIc.js";import"./check-Bn2WpFkP.js";import"./chevron-up-B02KnPY6.js";function fe({question:n,setOpen:h,onSuccess:f}){var g;const j=d.useRef(null),[s,S]=d.useState((g=n.options)!=null&&g.length?n.options.map(t=>({id:t.id,option_text:t.option_text,is_correct:t.is_correct})):[{option_text:"",is_correct:!1},{option_text:"",is_correct:!1}]),[m,N]=d.useState(n.type),{data:C,setData:u,put:T,processing:I,errors:_,clearErrors:w}=O({question_text:n.question_text,type:n.type,options:s}),i=t=>{S(t),u("options",t)},D=t=>{t.preventDefault(),T(route("questions.update",n.id),{preserveScroll:!0,onSuccess:()=>{h(!1),w(),f&&f()},onError:()=>{var r;return(r=j.current)==null?void 0:r.focus()}})};return e.jsxs(q,{children:[e.jsx(B,{children:"Edit Pertanyaan"}),e.jsx(E,{children:"Ubah pertanyaan dan opsi jawaban."}),e.jsxs("form",{className:"space-y-4",onSubmit:D,children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"question_text",children:"Pertanyaan"}),e.jsx(z,{id:"question_text",name:"question_text",ref:j,value:C.question_text,onChange:t=>u("question_text",t.target.value),placeholder:"Tulis pertanyaan...",autoComplete:"off",required:!0}),e.jsx(v,{message:_.question_text}),e.jsx(l,{htmlFor:"type",className:"mt-2",children:"Tipe Pertanyaan"}),e.jsxs(V,{value:m,onValueChange:t=>{var o,a;const r=t;N(r),u("type",r),i(r==="true_false"?[{option_text:"Benar",is_correct:((o=s[0])==null?void 0:o.is_correct)??!1},{option_text:"Salah",is_correct:((a=s[1])==null?void 0:a.is_correct)??!1}]:s.length>=2?s:[{option_text:"",is_correct:!1},{option_text:"",is_correct:!1}])},children:[e.jsx(k,{className:"w-full",children:e.jsx(G,{placeholder:"Pilih tipe pertanyaan"})}),e.jsxs($,{children:[e.jsx(b,{value:"multiple_choice",children:"Pilihan Ganda"}),e.jsx(b,{value:"true_false",children:"Benar/Salah"})]})]})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Opsi Jawaban"}),e.jsxs("div",{className:"mt-2 space-y-2",children:[m==="true_false"?e.jsxs(y,{value:s.findIndex(t=>t.is_correct).toString(),onValueChange:t=>{const r=Number(t),o=s.map((a,c)=>({...a,is_correct:c===r}));i(o)},children:[e.jsxs("div",{className:"mb-1 flex items-center space-x-2",children:[e.jsx(x,{value:"0",id:"option-0"}),e.jsx(l,{htmlFor:"option-0",children:"Benar"})]}),e.jsxs("div",{className:"mb-1 flex items-center space-x-2",children:[e.jsx(x,{value:"1",id:"option-1"}),e.jsx(l,{htmlFor:"option-1",children:"Salah"})]})]}):e.jsx(y,{value:s.findIndex(t=>t.is_correct).toString(),onValueChange:t=>{const r=Number(t),o=s.map((a,c)=>({...a,is_correct:c===r}));i(o)},children:s.map((t,r)=>e.jsxs("div",{className:"mb-1 flex items-center space-x-2",children:[e.jsx(R,{type:"text",value:t.option_text,onChange:o=>{const a=[...s];a[r].option_text=o.target.value,i(a)},placeholder:`Opsi ${String.fromCharCode(65+r)}`,required:!0,className:t.is_correct?"border-green-500 ring-2 ring-green-500":""}),e.jsx(x,{value:r.toString(),id:`option-${r}`}),e.jsx(l,{htmlFor:`option-${r}`,className:"hover:cursor-pointer",children:"Benar"}),s.length>2&&e.jsx(p,{type:"button",variant:"destructive",size:"sm",onClick:()=>{const o=s.filter((a,c)=>c!==r);i(o)},className:"hover:cursor-pointer",children:e.jsx(L,{})})]},t.id??r))}),m==="multiple_choice"&&e.jsx(p,{type:"button",size:"sm",className:"hover:cursor-pointer",onClick:()=>i([...s,{option_text:"",is_correct:!1}]),children:"+ Tambah Opsi"})]}),e.jsx(v,{message:_.options})]}),e.jsxs(F,{className:"gap-2",children:[e.jsx(P,{asChild:!0,children:e.jsx(p,{variant:"secondary",onClick:()=>h(!1),className:"hover:cursor-pointer",children:"Batal"})}),e.jsx(p,{disabled:I,asChild:!0,className:"hover:cursor-pointer",children:e.jsx("button",{type:"submit",children:"Simpan Perubahan"})})]})]})]})}export{fe as default};
