import{r as o,m as F,j as e}from"./app-0I1QzVTg.js";import{I as g}from"./input-error-Cgmc7RXS.js";import{B as N}from"./button-D2ZpcnoY.js";import{c as I,d as B,e as G,f as M}from"./dialog-x_8xUkrq.js";import{I as x}from"./input-BEoPePt1.js";import{L as h}from"./label-B5pGucUU.js";import{t as k}from"./index-_fiB5kas.js";import"./utils-liWpcwDK.js";import"./index-Bota6Y3-.js";import"./index-57D5-Vr4.js";import"./index-gMo3zbQG.js";import"./index-uHisoZSR.js";import"./Combination-DeKqWJgp.js";import"./x-C19WkH_u.js";import"./createLucideIcon-CstU9H3f.js";function X({sign:s,setOpen:j}){const f=o.useRef(null),T=o.useRef(null),[l,m]=o.useState(null),[y,d]=o.useState(!1),{data:i,setData:t,post:E,processing:b,reset:P,errors:c,clearErrors:p}=F({name:s.name,position:s.position||"",image:null,_method:"PUT"});o.useEffect(()=>{t({name:s.name,position:s.position||"",image:null,_method:"PUT"}),p(),m(null)},[s,t,p]);const C=r=>{r.preventDefault();const a=new FormData;a.append("name",i.name),a.append("position",i.position),a.append("_method","PUT"),i.image&&a.append("image",i.image),E(route("certificate-signs.update",s.id),{preserveScroll:!0,onSuccess:()=>{j(!1),P(),p(),m(null)},onError:()=>{var n;return(n=f.current)==null?void 0:n.focus()}})},D=r=>{var n;const a=((n=r.target.files)==null?void 0:n[0])??null;if(a){if(!["image/png","image/jpeg","image/jpg"].includes(a.type)){d(!0),t("image",null),k("Gambar harus png, jpg, atau jpeg");return}if(a.size>2*1024*1024){d(!0),t("image",null),k("Ukuran file maksimal 2MB!");return}}if(d(!1),t("image",a),a){const u=new FileReader;u.onload=S=>{var v;return m((v=S.target)==null?void 0:v.result)},u.readAsDataURL(a)}else m(null)};return e.jsxs(e.Fragment,{children:[e.jsx(I,{children:"Edit Tanda Tangan"}),e.jsx(B,{children:"Ubah nama, posisi, atau gambar tanda tangan."}),e.jsxs("form",{className:"space-y-4",onSubmit:C,children:[e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{children:[e.jsx(h,{htmlFor:"name",children:"Nama"}),e.jsx(x,{id:"name",type:"text",name:"name",ref:f,value:i.name,onChange:r=>t("name",r.target.value),placeholder:"Masukkan nama",autoComplete:"off",required:!0}),e.jsx(g,{message:c.name})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"position",children:"Posisi/Jabatan"}),e.jsx(x,{id:"position",type:"text",name:"position",value:i.position,onChange:r=>t("position",r.target.value),placeholder:"Masukkan posisi/jabatan (opsional)"}),e.jsx(g,{message:c.position})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"image",children:"Tanda Tangan"}),e.jsxs("div",{className:"my-2 flex gap-4",children:[s.image&&e.jsxs("div",{className:"text-center",children:[e.jsx("img",{src:`/storage/${s.image}`,alt:"Current Signature",className:"h-24 rounded border object-contain"}),e.jsx("p",{className:"text-muted-foreground mt-1 text-xs",children:"Gambar saat ini"})]}),l&&e.jsxs("div",{className:"text-center",children:[e.jsx("img",{src:l,alt:"Preview Signature",className:"h-24 rounded border object-contain"}),e.jsx("p",{className:"mt-1 text-xs text-green-600",children:"Gambar baru"})]}),!s.image&&!l&&e.jsxs("div",{className:"text-center",children:[e.jsx("img",{src:"/assets/images/placeholder.png",alt:"Placeholder",className:"h-24 rounded border object-cover"}),e.jsx("p",{className:"text-muted-foreground mt-1 text-xs",children:"Tidak ada gambar"})]})]}),e.jsx(x,{id:"image",type:"file",name:"image",ref:T,accept:"image/png, image/jpeg, image/jpg",className:y?"border-red-500 focus-visible:ring-red-500":"",onChange:D}),e.jsx("p",{className:"text-muted-foreground mt-1 text-xs",children:"Biarkan kosong jika tidak ingin mengubah gambar. Format: JPEG, PNG, JPG. Maksimal 2MB."}),e.jsx(g,{message:c.image})]})]}),e.jsxs(G,{className:"gap-2",children:[e.jsx(M,{asChild:!0,children:e.jsx(N,{variant:"secondary",onClick:()=>j(!1),className:"hover:cursor-pointer",children:"Batal"})}),e.jsx(N,{disabled:b,asChild:!0,className:"hover:cursor-pointer",children:e.jsx("button",{type:"submit",children:b?"Menyimpan...":"Simpan Perubahan"})})]})]})]})}export{X as default};
